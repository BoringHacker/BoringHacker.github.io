<!DOCTYPE html>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  
  <title itemprop="name">?????100?? 11~20?? | BoringHacker&#39;s Blog</title>
  
    <link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/BoringHacker/cdn/images/icons/favicon.png">
  
  <meta http-equiv="x-dns-prefetch-control" content="on">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+SerifMerriweather|Merriweather+Sans|Source+Code+Pro|Ubuntu:400,700|Noto+Serif+SC" media="all">
  <link rel="dns-prefetch" href="//cdn.jsdelivr.net">
  <link rel="stylesheet" id="saukra_css-css" href="/css/style.css" type="text/css" media="all">
  <link rel="stylesheet" href="/css/lib.min.css" media="all">
  <link rel="stylesheet" href="/css/font.css" media="all">
  <link rel="stylesheet" href="/css/insight.css" media="all">
  <link rel="stylesheet" href="/css/jquery.fancybox.min.css" media="all">
  <link rel="stylesheet" href="/css/zoom.css" media="all">
    <style>
  .emoji-coda {
      display: inline-block !important;
      position: relative;
      width: 45px;
      top: 2px;
      margin: -3px 3px !important;
      padding: 0;
  }
  </style>

  <link rel="stylesheet" type="text/css" href="/css/sharejs.css">
<!--   <link rel="stylesheet" id="saukra_css-css" href="https://2heng.xin/wp-content/cache/autoptimize/css/autoptimize_ad42a61f4c7d4bdd9f91afcff6b5dda5.css
" type="text/css" media="all"> -->
  <script>
  /*Initial Variables*/
  var mashiro_option = new Object();
  var mashiro_global = new Object();
  mashiro_option.NProgressON = true;
  /* 
   * 邮箱信息之类的东西可以填在这里，这些js变量基本都作用于sakura-app.js
   * 这样的设置仅是为了方便在基于PHP开发的主题中设置js变量，既然移植到了Node上，我想或许可以精简这一逻辑吧
   */
  mashiro_option.email_domain = "";
  mashiro_option.email_name = "";
  mashiro_option.cookie_version_control = "";
  mashiro_option.qzone_autocomplete = false;
  mashiro_option.site_name = "BoringHacker'sBlog";
  mashiro_option.author_name = "Blog";
  mashiro_option.site_url = "https://www.orchid-any.cf/";
  mashiro_option.v_appId = "8Hho6gvnedMT9NMEhnEx3UOg-gzGzoHsz";
  mashiro_option.v_appKey = "gU70zYoblzxCmc6iL697pp69";
  mashiro_option.mathjax = "1";
  mashiro_option.qq_api_url = "https://api.mashiro.top/qqinfo/"; 
  mashiro_option.qq_avatar_api_url = "https://api.mashiro.top/qqinfo/";

  // mashiro_option.jsdelivr_css_src = "https://cdn.jsdelivr.net/gh/moezx/cdn@3.4.5/css/lib.min.css";
  // mashiro_option.float_player_on = true;

  /*End of Initial Variables*/
  </script>
  <script type="text/javascript">
  var bg = "https://cdn.jsdelivr.net/gh/BoringHacker/cdn/images/icons/index1.png,https://cdn.jsdelivr.net/gh/BoringHacker/cdn/images/icons/index2.png,https://cdn.jsdelivr.net/gh/BoringHacker/cdn/images/icons/index3.png,https://cdn.jsdelivr.net/gh/BoringHacker/cdn/images/icons/index4.png,https://cdn.jsdelivr.net/gh/BoringHacker/cdn/images/icons/index5.png,https://cdn.jsdelivr.net/gh/BoringHacker/cdn/images/icons/index6.png,https://cdn.jsdelivr.net/gh/BoringHacker/cdn/images/icons/index7.png,https://cdn.jsdelivr.net/gh/BoringHacker/cdn/images/icons/index8.png".split(",");
  var bgindex = Math.floor(Math.random()*bg.length);
  if (!!window.ActiveXObject || "ActiveXObject" in window) { //is IE?
    alert('朋友，IE浏览器未适配哦~');
  }
  </script>
  <style type="text/css">
  .hljs-ln{border-collapse:collapse}.hljs-ln td{padding:0}.hljs-ln-n:before{content:attr(data-line-number)}
  </style>
  <style type="text/css">.site-top .lower nav{display:block !important;}.author-profile i,.post-like a,.post-share .show-share,.sub-text,.we-info a,span.sitename,.post-more i:hover,#pagination a:hover,.post-content a:hover,.float-content i:hover{color:#FE9600}.feature i,.download,.navigator i:hover,.links ul li:before,.ar-time i,span.ar-circle,.object,.comment .comment-reply-link,.siren-checkbox-radio:checked + .siren-checkbox-radioInput:after{background:#FE9600}::-webkit-scrollbar-thumb{background:#FE9600}.download,.navigator i:hover,.link-title,.links ul li:hover,#pagination a:hover,.comment-respond input[type='submit']:hover{border-color:#FE9600}.entry-content a:hover,.site-info a:hover,.comment h4 a,#comments-navi a.prev,#comments-navi a.next,.comment h4 a:hover,.site-top ul li a:hover,.entry-title a:hover,#archives-temp h3,span.page-numbers.current,.sorry li a:hover,.site-title a:hover,i.iconfont.js-toggle-search.iconsearch:hover,.comment-respond input[type='submit']:hover{color:#FE9600}.comments .comments-main{display:block !important;}.comments .comments-hidden{display:none !important;}background-position:center center;background-attachment:inherit;}
  </style>
</head>
</html>
<body class="page-template page-template-user page-template-page-analytics page-template-userpage-analytics-php page page-id-1297 chinese-font serif isWebKit">
    <style type="text/css">
    @import url("/code.css");
  </style>
   <div class="skin-menu no-select" id="mainskin" style="position: fixed;bottom:65px;left:31px;">
    <div class="theme-controls row-container">
          <p style="text-align:center;font-family:'Monaco';font-weight:bold;color:#444"><i style="color:grey" class="fa fa-chevron-left"></i> background <i style="color:grey" class="fa fa-chevron-right"></i></p>
        <ul class="menu-list"> <li id="white-bg"> 
            <i class="fa fa-television" aria-hidden="true">
            </i>
            </li> 
            <li id="sakura-bg"> 
                <i class="iconfont icon-sakura">
                </i>
            </li>
            <li id="gribs-bg">
                <i class="fa fa-slack" aria-hidden="true">
                </i>
            </li>
            <li id="KAdots-bg">
                <i class="iconfont icon-dots">
                </i>
            </li>
            <li id="totem-bg">
                <i class="fa fa-optin-monster" aria-hidden="true">
                </i>
            </li>
            <li id="pixiv-bg">
                <i class="iconfont icon-pixiv">
                </i>
            </li>
            <li id="bing-bg">
                <i class="iconfont icon-bing">
                </i>
            </li>
            <li id="dark-bg">
                <i class="fa fa-moon-o" aria-hidden="true">
                </i>
            </li>
        </ul>
    </div>
      <hr>
  <p style="text-align:center;font-family:'Monaco';font-weight:bold;color:#444"><i style="color:grey" class="fa fa-chevron-left"></i> font <i style="color:grey" class="fa fa-chevron-right"></i></p>
  <div class="font-family-controls row-container">
    <button type="button" class="control-btn-serif " data-mode="serif" onclick="mashiro_global.font_control.change_font()">Serif</button>
    <button type="button" class="control-btn-sans-serif" data-mode="sans-serif" onclick="mashiro_global.font_control.change_font()">Sans Serif</button>
  </div>
  <hr>
  <p style="text-align:center;font-family:'Monaco';font-weight:bold;color:#444"><i style="color:grey" class="fa fa-chevron-left"></i> script <i style="color:grey" class="fa fa-chevron-right"></i></p>
  <div class="theme-controls row-container">
  <ul class="menu-list">
    <li id="empty-effect">
      <i class="fa fa-ban">
      </i>
    </li>
    <li id="sakura-rain-effect">
      <i class="iconfont icon-sakura">
      </i>
    </li>
    <li id="snowy-effect">
      <i class="fa fa-snowflake-o">
      </i>
    </li>
    <li id="lines-effect">
      <i class="fa fa-chevron-left">
      </i>
    </li>
    <li id="colorful-belts-effect">
      <i class="fa fa-map"></i>
      </i>
    </li>
    <li id="words-rain-effect">
      <i class="fa fa-font"></i>
    </li>
    <li id="point-rain-effect">
      <i class="iconfont icon-dots"></i>
    </li>
    <li id="rain-drop-effect">
      <i class="fa fa-tint"></i>
    </li>
  </ul>
  </div>

    <canvas id="night-mode-cover">
    </canvas>
</div>
 
 <div class="changeSkin-gear no-select" style="background: rgba(0, 0, 0, 0) none repeat scroll 0% 0%; visibility: visible; bottom: 0px;"> 
  <div class="keys" id="setbtn"> 
    <button id="open-skinMenu">
        <style>
        button#open-skinMenu{
            transition: all 0.2s linear 0s;
            outline:none;
            position:fixed;
            bottom:13px;
            left:15px;
            font-size:16px;
            background-color: rgba(255,255,255,.95);
            border-radius: 20px;
            box-shadow: 0 3px 8px 0 rgba(0,0,0,0.1), 0 3px 8px 0 rgba(0,0,0,0.1);
        }
        button#open-skinMenu:hover{
            transition: all 0.2s linear 0s;
            background-color: rgb(255, 165, 0);
            color: rgba(255,255,255);
        }
        </style>
        <i class="iconfont icon-gear inline-block rotating">
      </i> 
        SCHEME TOOL | 主题工具 
    </button>
  </div> 
</div>


  <div class="scrollbar" id="bar">
  </div>
  <a href="#" class="cd-top faa-float animated"></a>
  <section id="main-container">
    <div class="headertop ">
  <div id="banner_wave_1"></div>
  <div id="banner_wave_2"></div>
  <figure id="centerbg" class="centerbg">
    <div class="focusinfo no-select">
      <div class="header-tou">
        <a href="https://www.orchid-any.cf/">
          <img src="https://cdn.jsdelivr.net/gh/BoringHacker/cdn/images/icons/avatar.png">
        </a>
      </div>
      <div class="header-info">
        <p>Stay Hungry, Stay Foolish</p>
        <div class="top-social_v2">
          <li id="bg-pre">
            <img class="flipx" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/next-b.svg">
          </li>
          
            
              
                <li>
                  <a href="http://github.com/boringhacker" target="_blank" class="social-github" title="github">
                    <img src="https://cdn.jsdelivr.net/gh/BoringHacker/cdn/images/icons/github.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://music.163.com/#/user/home?id=1842865470" target="_blank" class="social-github" title="NetEase">
                    <img src="https://cdn.jsdelivr.net/gh/BoringHacker/cdn/images/icons/music.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://www.zhihu.com/people/boringhacker" target="_blank" class="social-github" title="zhihu">
                    <img src="https://cdn.jsdelivr.net/gh/BoringHacker/cdn/images/icons/zhihu.png">
                  </a>
                </li>
              
            
          
          <li id="bg-next">
            <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/next-b.svg">
          </li>
        </div>
      </div>
    </div>
  </figure>
  <div id="video-container" style="">
    <video style="object-fit: fill" id="bgvideo" class="video" video-name="" src="" width="auto" preload="auto">
    </video>
    <!-- <div id="video-btn" class="loadvideo videolive">
    </div> -->
    <div id="video-add">
    </div>
    <div class="video-stu">
    </div>
  </div>
  <div class="headertop-down faa-float animated" onclick="headertop_down()">
    <span>
      <i class="fa fa-chevron-down" aria-hidden="true">
      </i>
    </span>
  </div>
</div>
    <div id="page" class="site wrapper">
      <header class="site-header no-select gizle sabit" role="banner">
  <div class="site-top">
    <div class="site-branding">
      <span class="site-title">
        <span class="logolink moe-mashiro">
          <a href="/">
            <!-- <span class="sakurasono">BoringHacker&#39;s</span>
            <span class="shironeko">Blog</span> -->
            <img src = https://cdn.jsdelivr.net/gh/boringhacker/cdn/images/icons/borhac.png>
          </a>
        </span>
      </span>
    </div>
    <div class="searchbox search-form-submit">
      <i class="iconfont js-toggle-search iconsearch icon-search">
      </i>
    </div>
    <div id="show-nav" class="showNav mobile-fit">
      <div class="line line1">
      </div>
      <div class="line line2">
      </div>
      <div class="line line3">
      </div>
    </div>
    <div class="lower-cantiner">
      <div class="lower">
        <nav class="mobile-fit-control hide">
          <ul id="menu-new" class="menu">
            
              <li>
                <a href="/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-fort-awesome faa-shake" aria-hidden="true"></i>
                    Home
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/archives">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-archive faa-shake" aria-hidden="true"></i>
                    Archives
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/bangumi/">
                          <i class="fa fa-film faa-vertical" aria-hidden="true"></i>
                          Animes
                        </a>
                      </li>
                    
                      <li>
                        <a href="/Tools/">
                          <i class="fa fa-cogs" aria-hidden="true"></i>
                          Tools
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/Note/">
                          <i class="fa fa-book" aria-hidden="true"></i>
                          Notes
                        </a>
                      </li>
                    
                      <li>
                        <a href="/categories/Solution">
                          <i class="fa fa-code" aria-hidden="true"></i>
                          Solution
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="/tags/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-tags" aria-hidden="true"></i>
                    Tags
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/comment/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-pencil-square-o faa-tada" aria-hidden="true"></i>
                    Comments
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/links/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-link faa-shake" aria-hidden="true"></i>
                    Links
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/game/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-gamepad" aria-hidden="true"></i>
                    Game
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-leaf faa-wrench" aria-hidden="true"></i>
                    About
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/about/">
                          <i class="fa fa-meetup" aria-hidden="true"></i>
                          Me
                        </a>
                      </li>
                    
                      <li>
                        <a href="/lab/">
                          <i class="fa fa-bath" aria-hidden="true"></i>
                          Blog
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="/atom.xml">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-rss faa-pulse" aria-hidden="true"></i>
                    RSS
                  </span>
                </a>
                
              </li>
            
          </ul>
        </nav>
      </div>
    </div>
  </div>
</header>

      <link rel="stylesheet" type="text/css" href="/css/sharejs.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css">
<div class="pattern-center-blank"></div>
<script>
var spoiler=document.getElementsByClassName('spoiler');
for(var i=0;i<spoiler.length;++i)
spoiler[i].onclick=function(){this.classList.toggle("revealed");};
</script>

  <div class="pattern-center-sakura single-center">
    <!-- 有配图默认渲染第一张 -->
    <div class="pattern-attachment-img lazyload" style="background-image: url(https://cdn.jsdelivr.net/gh/boringhacker/cdn/images/posts/post-32.png);" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/loader/orange.progress-bar-stripe-loader.svg" data-src="https://cdn.jsdelivr.net/gh/boringhacker/cdn/images/posts/post-32.png">
    </div>
    <header class="pattern-header single-header" style="text-shadow: 0 0 7px #000,0 0 7px #000">

      <h1 class="entry-title">
      ?????100?? 11~20??</h1>
      <p class="entry-census">
        <span>
          <a href="/">
            <img src="https://cdn.jsdelivr.net/gh/boringhacker/cdn/images/icons/avatar.png">
          </a>
        </span>
        <span>
          <a href="/">BoringHacker</a>
        </span>
        <span class="bull">
        ·</span>
        2020-2-8<span class="bull">
        ·</span>
      <span id="busuanzi_value_page_pv"></span>次阅读</p>
      
        
          <div>
            <ul class="spfk-ul">
              &nbsp<i class="fa fa-tag" aria-hidden="true"></i>&nbsp&nbsp&nbsp&nbsp
              <li class="spfk-li"><a href="/tags/DS100P/" class="butterfly-tags">DS100P</a></li>
            </ul>
          </div>
          <script>
              function colorInit(c,num){for(var i=1;i<=num;++i)c.push(i+'');}
              function paintTags(){
                  var colorNumber=8,tagColors=[],tags=document.getElementsByClassName('butterfly-tags');
                  for(var i = 0 ; i < tags.length ; ++i){
                      if(!tagColors.length)colorInit(tagColors,colorNumber);
                      var j=Math.floor(Math.random()*tagColors.length);
                      tags[i].classList.add("spfk-color"+tagColors[j]);
                      tagColors.splice(j,1);
                  }
              }
              paintTags()
          </script>
        
    </header>
  </div>

<div id="content" class="site-content">
  <div id="primary" class="content-area">
    <main id="main" class="site-main" role="main">
      <article id="post-1" class="post-1 post type-post status-publish format-standard has-post-thumbnail hentry category-uncategorized">
        <div class="toc"></div>
        <!--<div class="toc-entry-content"><!-- 套嵌目录使用（主要为了支援评论）-->
        
        <div class="entry-content">
          <h1 id="11-P3203-HNOI2010"><a href="#11-P3203-HNOI2010" class="headerlink" title="11.P3203 [HNOI2010]????????"></a>11.P3203 [HNOI2010]????????</h1><p>???$Lostmonkey$ ????????????????????????????????????????????????????????????????????  </p>
<p>?????????$Lostmonkey$ ?????????????????? $n$ ???????????????????????? $k_i$???????????? $i$ ?????????????????? $k_i$ ???????? $i+k_i$ ??????????????? $i+k_i$ ??????????????????  </p>
<p>???????????????? $i$ ??????????????????????????????????????????????$Lostmonkey$ ???????????????????????????????????????????????????</p>
<hr>
<p>????????????????????????????????????????????????????????????????????????**????</p>
<p>???????????????????????????????????</p>
<pre><code class="lang-cpp">#include &lt;cstdio&gt;
#include &lt;iostream&gt;
#include &lt;algorithm&gt;
#include &lt;cstring&gt;
#include &lt;queue&gt;

using namespace std;

const int SIZE = 2e5 + 5;
class LinkCutTree {
public:
    struct SPLAY {
        int val;
        int fa;
        int ch[2];
    } T[SIZE];
    inline bool isroot(int x) { return !(T[T[x].fa].ch[0] ^ x &amp;&amp; T[T[x].fa].ch[1] ^ x); }
    inline void push(int x) { T[x].val = T[T[x].ch[0]].val + T[T[x].ch[1]].val + 1; }
    inline void rotate(int x) { int y = T[x].fa, z = T[y].fa, k = T[y].ch[1] == x, w = T[x].ch[!k]; (isroot(y)) &amp;&amp; (T[z].ch[T[z].ch[1] == y] = x); T[x].ch[!k] = y, T[y].ch[k] = w; (w) &amp;&amp; (T[w].fa = y); T[y].fa = x; T[x].fa = z; push(y); }
    inline void splay(int x) { for(; isroot(x); rotate(x)) { int y = T[x].fa, z = T[y].fa; (isroot(y)) &amp;&amp; (rotate(T[y].ch[1] ^ x ^ T[z].ch[1] ^ y ?  x : y), 1); } push(x); }
    inline void access(int x) { for(int y = 0; x; x = T[y = x].fa) splay(x), T[x].ch[1] = y, push(x); }
} lct_mast;
int n, m;

signed main() {
    scanf(&quot;%d&quot;, &amp;n);
    for(int i = 1, s; i &lt;= n; ++i) {
        lct_mast.T[i].val = 1;
        scanf(&quot;%d&quot;, &amp;s);
        (i + s &lt;= n) &amp;&amp; (lct_mast.T[i].fa = i + s);
    }
    for(scanf(&quot;%d&quot;, &amp;m); m; --m) {
        int opt, x, y;
        scanf(&quot;%d&quot;, &amp;opt), scanf(&quot;%d&quot;, &amp;x);
        if (opt ^ 2) {
            lct_mast.access(x + 1);
            lct_mast.splay(x + 1);
            printf(&quot;%d\n&quot;, lct_mast.T[x + 1].val);
        } else {
            scanf(&quot;%d&quot;, &amp;y);
            lct_mast.access(x + 1);
            lct_mast.splay(x + 1);
            lct_mast.T[x + 1].ch[0] = lct_mast.T[lct_mast.T[x + 1].ch[0]].fa = 0;
            (x + y + 1 &lt;= n) &amp;&amp; (lct_mast.T[x + 1].fa = x + y + 1);
            lct_mast.push(x + 1);
        }
    }
    return 0;
}
</code></pre>
<h1 id="12-SP4487-GSS6-Can-you-answer-these-queries-VI"><a href="#12-SP4487-GSS6-Can-you-answer-these-queries-VI" class="headerlink" title="12.SP4487 GSS6 - Can you answer these queries VI"></a>12.SP4487 GSS6 - Can you answer these queries VI</h1><p>The first line of the input contains an integer N.<br>The following line contains N integers, representing the starting<br>sequence A1..AN, _(|Ai| &lt;= 10000)_.  </p>
<p>The third line contains an integer Q. The next Q lines contains the operations in following form:  </p>
<p><strong>I x y</strong>: insert element y at position x _(between x - 1 and x)_.<br><strong>D x</strong> : delete the element at position x.<br><strong>R x y</strong>: replace element at position x with y.<br><strong>Q x y</strong>: print max{Ai + Ai+1 + .. + Aj | x &lt;= i &lt;= j &lt;= y}.  </p>
<p>All given positions are valid, and given values are between -10000 and +10000.  </p>
<p>The sequence will never be empty.</p>
<hr>
<p>????????????????????????????????????????????????</p>
<p>?????????????????????????????$lmax$??x??????????????$rmax$??x??????????????$maxsum$????????????$sum$???</p>
<p>????$Update$???????????????????????????</p>
<pre><code class="lang-cpp">#include &lt;cstdio&gt;
#include &lt;iostream&gt;
#include &lt;algorithm&gt;
#include &lt;queue&gt;
#include &lt;utility&gt;

using namespace std;

const int SIZE = 2e5 + 5;
int n, m, tot, root, a[SIZE];
struct SPLAY {
    int fa;
    int ch[2];
    int siz;
    int val;
    int sum;
    int lmax;
    int rmax;
    int maxsum;
} T[SIZE];
vector &lt; int &gt; st;

inline int newnode(int v = 0) {
    int x;
    if (st.empty()) x = ++tot;
    else x = st.back(), st.pop_back();
    T[x].fa = T[x].ch[0] = T[x].ch[1] = 0;
    T[x].siz = 1;
    T[x].val = T[x].sum = T[x].maxsum = v;
    T[x].lmax = T[x].rmax = max(v, 0);
    return x;
}

inline void delnode(int x) {
    T[x].fa = T[x].ch[0] = T[x].ch[1] = 0;
    T[x].sum = T[x].lmax = T[x].rmax = T[x].maxsum = 0;
    T[x].siz = 1;
    st.push_back(x);
}

inline bool which(int x) {
    if (T[T[x].fa].ch[0] == x) return 0;
    if (T[T[x].fa].ch[1] == x) return 1;
    return -1;
}

inline void update(int x) {
    T[x].sum = T[x].val; T[x].siz = 1;
    if (T[x].ch[0]) T[x].sum += T[T[x].ch[0]].sum, T[x].siz += T[T[x].ch[0]].siz;
    if (T[x].ch[1]) T[x].sum += T[T[x].ch[1]].sum, T[x].siz += T[T[x].ch[1]].siz;
    if (T[x].ch[0] &amp;&amp; T[x].ch[1]) {
        T[x].lmax = max(T[T[x].ch[0]].lmax, T[T[x].ch[0]].sum + T[x].val + T[T[x].ch[1]].lmax);
        T[x].rmax = max(T[T[x].ch[1]].rmax, T[T[x].ch[1]].sum + T[x].val + T[T[x].ch[0]].rmax);
        T[x].maxsum = max({T[T[x].ch[0]].maxsum, T[T[x].ch[1]].maxsum, T[T[x].ch[0]].rmax + T[x].val + T[T[x].ch[1]].lmax});
    } else if (T[x].ch[0]) {
        T[x].lmax = max({T[T[x].ch[0]].lmax, T[T[x].ch[0]].sum + T[x].val, 0});
        T[x].rmax = max(T[x].val + T[T[x].ch[0]].rmax, 0);
        T[x].maxsum = max(T[T[x].ch[0]].maxsum, T[T[x].ch[0]].rmax + T[x].val);
    } else if (T[x].ch[1]) {
        T[x].lmax = max(T[x].val + T[T[x].ch[1]].lmax, 0);
        T[x].rmax = max({T[T[x].ch[1]].rmax, T[T[x].ch[1]].sum + T[x].val, 0});
        T[x].maxsum = max(T[T[x].ch[1]].maxsum, T[T[x].ch[1]].lmax + T[x].val);
    } else {
        T[x].maxsum = T[x].val;
        T[x].lmax = T[x].rmax = max(T[x].val, 0);
    }
}

inline void rotate(int x) {
    if (!x) return;
    int w = which(x), y = T[x].fa;
    if (~which(y)) T[T[y].fa].ch[which(y)] = x;
    T[x].fa = T[y].fa;
    T[y].ch[w] = T[x].ch[w ^ 1];
    if (T[x].ch[w ^ 1]) T[T[x].ch[w ^ 1]].fa = y;
    T[x].ch[w ^ 1] = y;
    T[y].fa = x;
    update(y), update(x);
}
inline void splay(int x, int &amp;goal) {
    if (x == goal) return;
    int p = T[goal].fa;
    for (int y; T[x].fa ^ p; rotate(x)) y = T[x].fa, (T[y].fa ^ p) &amp;&amp; (rotate(which(y) ^ which(x) ? x : y), 1);
    goal = x;
}

inline int kth_element(int x, int k) {
    while (233) {
        if (T[x].ch[0] &amp;&amp; k &lt;= T[T[x].ch[0]].siz) x = T[x].ch[0];
        else {
            if (T[x].ch[0]) k -= T[T[x].ch[0]].siz;
            if (!--k) return x;
            x = T[x].ch[1];
        }
    }
}

inline void insert(int &amp;rt, int p, int val) {
    int x = kth_element(rt, p);
    splay(x, rt);
    int y = kth_element(rt, p + 1);
    splay(y, T[rt].ch[1]);
    T[y].ch[0] = newnode(val);
    T[T[y].ch[0]].fa = y;
    update(T[y].ch[0]);
    update(y), update(x);
}

inline void erase(int &amp;rt, int p) {
    int y = kth_element(rt, p);
    splay(y, rt);
    int x = kth_element(rt, p + 1);
    splay(x, T[rt].ch[1]);
    int z = T[x].ch[1];
    T[z].fa = y;
    T[y].ch[1] = z;
    delnode(x);
    update(y);
}

inline void modify(int &amp;rt, int p, int val) {
    int x = kth_element(rt, p + 1);
    splay(x, rt);
    T[x].val = val;
    update(x);
}

inline int find(int &amp;rt, int l, int r) {
    int x = kth_element(rt, l);
    splay(x, rt);
    int y = kth_element(rt, r + 2);
    splay(y, T[rt].ch[1]);
    return T[T[y].ch[0]].maxsum;
}

inline void make(int p, int l, int r) {
    int mid = (l + r) &gt;&gt; 1;
    T[p].val = a[mid];
    if (mid - 1 &gt;= l) T[p].ch[0] = newnode(), T[T[p].ch[0]].fa = p, make(T[p].ch[0], l, mid - 1);
    if (mid + 1 &lt;= r) T[p].ch[1] = newnode(), T[T[p].ch[1]].fa = p, make(T[p].ch[1], mid + 1, r);
    update(p);
}

signed main() {
    scanf(&quot;%d&quot;, &amp;n);
    for (int i = 1; i &lt;= n; ++i) scanf(&quot;%d&quot;, &amp;a[i]);
    int root = newnode();
    make(root, 0, n + 1);
    scanf(&quot;%d&quot;, &amp;m);
    for (int i = 1; i &lt;= m; ++i) {
        char opt[2];
        int x, y;
        scanf(&quot;%s %d&quot;, opt, &amp;x);
        if (*opt ^ &#39;D&#39;) scanf(&quot;%d&quot;, &amp;y);
        if (*opt == &#39;I&#39;) insert(root, x, y);
        if (*opt == &#39;D&#39;) erase(root, x);
        if (*opt == &#39;R&#39;) modify(root, x, y);
        if (*opt == &#39;Q&#39;) printf(&quot;%d\n&quot;, find(root, x, y));
    }
    return 0;
}
</code></pre>
<h1 id="13-Count-on-a-tree"><a href="#13-Count-on-a-tree" class="headerlink" title="13.Count on a tree"></a>13.Count on a tree</h1><p>??????? $n$ ??????????????????????????? $m$ ????????????? $u$,$v$,$k$ ???????? $u \text{ xor last}$ ?? $v$ ????????????? $k$ ????????</p>
<hr>
<h2 id="LYC"><a href="#LYC" class="headerlink" title="LYC"></a>LYC</h2><p>???????????????????????????????</p>
<p>?????$k$????????????????????????</p>
<p>????<del>???</del>???????????????????????????????????</p>
<p>??????????????????????????????$dfs$???????????(???????????????????$root$?????????????????????????????)?????????????$u$,$v$????????????$k$????</p>
<p>?????I????????????????????????$k$??????????????</p>
<p>????????????????????</p>
<p>????????????????????????????????</p>
<p>??????????????????????????????????????????????????????????????????????????????????????????????????</p>
<p>?????????????????$LCA$??????????????????????????????????????????????????????????????????????????</p>
<p>????????????????</p>
<p>????</p>
<pre><code class="lang-cpp">#include&lt;cstdio&gt;
#include&lt;vector&gt;
#include&lt;algorithm&gt;
using namespace std;
int n,m,p,a[100010],last,u,v,w,fa[100010],dep[100010],son[100010],siz[100010],dfn[100010],ton[100010],hb[100010],tot,be[100010],en[100010],cnt,root[100010],cntot;
struct node
{
    int l,r,sum;
}nodes[4000010];
vector&lt;int&gt; e[100010],pri;
int getID(int val)
{
    return lower_bound(pri.begin(),pri.end(),val)-pri.begin()+1;
}//?????
void dfs1(int x,int las)
{
    dep[x]=dep[las]+1;
    fa[x]=las;
    siz[x]=1;
    int b=-1e9,s=0;
    for(int i=0;i&lt;e[x].size();++i)
    {
        int y=e[x][i];
        if(y^las)
        {
            dfs1(y,x);
            siz[x]+=siz[y];
            if(siz[y]&gt;b)
            {
                b=siz[y];
                s=y;
            }
        }
    }
    son[x]=s;
}
void dfs2(int x,int las,int heavy)
{
    if(heavy)    hb[x]=hb[las];
    else    hb[x]=x;
    dfn[x]=++tot;
    ton[tot]=a[x];
    if(son[x])    dfs2(son[x],x,1);
    for(int i=0;i&lt;e[x].size();++i)
    {
        int y=e[x][i];
        if(y^las&amp;&amp;y^son[x])    dfs2(y,x,0);
    }
}
void LCA(int x,int y)
{
    int fx=hb[x],fy=hb[y];
    while(fx^fy)
    {
        if(dep[fx]&lt;dep[fy])
        {
            swap(fx,fy);
            swap(x,y);
        }
        be[++cnt]=root[dfn[fx]-1];
        en[cnt]=root[dfn[x]];//??????????????????-1?????????????find(int l,int r,int p1,int p2,int k)????p1,p2??
        x=fa[fx];
        fx=hb[x];
    }
    be[++cnt]=root[min(dfn[x],dfn[y])-1];
    en[cnt]=root[max(dfn[x],dfn[y])];
    //???????????????????????????????u??v??????????????????????????LCA?????????????????????????????????????????
}//????
void ins(int l,int r,int pre,int &amp;now,int pos)
{
    nodes[++cntot]=nodes[pre];
    now=cntot;
    ++nodes[now].sum;
    if(l==r)    return;
    int mid=(l+r)&gt;&gt;1;
    if(pos&lt;=mid)    ins(l,mid,nodes[pre].l,nodes[now].l,pos);
    else    ins(mid+1,r,nodes[pre].r,nodes[now].r,pos);
}
int find(int l,int r,int k)
{
    if(l==r)    return pri[l-1];//?????????k?????????????????
    int X=0;
    for(int i=1;i&lt;=cnt;++i)    X+=(nodes[nodes[en[i]].l].sum-nodes[nodes[be[i]].l].sum);
    //??????u??v????????????????????????[l,mid]?????????????
    int mid=(l+r)&gt;&gt;1;
    if(k&lt;=X)//k&lt;=X,?????k????????
    {
        for(int i=1;i&lt;=cnt;++i)//?????????????????????????????????????????????[l,mid]???????
        {
            en[i]=nodes[en[i]].l;
            be[i]=nodes[be[i]].l;
        }
        //??????????????????????????[l,mid]???????????
        return find(l,mid,k);
    }
    else//??????k?????????k-X??
    {
        for(int i=1;i&lt;=cnt;++i)//??????????????????????????
        {
            en[i]=nodes[en[i]].r;
            be[i]=nodes[be[i]].r;
        }
        return find(mid+1,r,k-X);//????????
    }
}//?????
int main()
{
    scanf(&quot;%d %d&quot;,&amp;n,&amp;m);
    for(int i=1;i&lt;=n;++i)
    {
        scanf(&quot;%d&quot;,&amp;a[i]);
        pri.push_back(a[i]);
    }
    for(int i=1;i&lt;n;++i)
    {
        scanf(&quot;%d %d&quot;,&amp;u,&amp;v);
        e[u].push_back(v);
        e[v].push_back(u);
    }
    sort(pri.begin(),pri.end());
    pri.erase(unique(pri.begin(),pri.end()),pri.end());
    dfs1(1,1); 
    dfs2(1,1,0);
    p=pri.size();
    for(int i=1;i&lt;=n;++i)    ins(1,p,root[i-1],root[i],getID(ton[i]));//??dfs??????
    for(int i=1;i&lt;=m;++i)
    {
        scanf(&quot;%d %d %d&quot;,&amp;u,&amp;v,&amp;w);
        u^=last;
        cnt=0;
        LCA(u,v);
        last=find(1,p,w);
        printf(&quot;%d\n&quot;,last);
    }
    return 0;
}
</code></pre>
<h2 id="WGY"><a href="#WGY" class="headerlink" title="WGY"></a>WGY</h2><p>???????????$x$??????$rt_x=rt_{x-1}$???????$rt_x$??????$a_i$????????????????????????????????</p>
<p>??????????????????$(x,y)$???????????$rt_x+rt_y-rt_{lca_{x,y}}-rt_{fa_{lca_{x,y}}}$?????????</p>
<pre><code class="lang-cpp">#include &lt;cstdio&gt;
#include &lt;iostream&gt;
#include &lt;algorithm&gt;
#include &lt;cstring&gt;
#include &lt;queue&gt;
#define mid ((l + r) &gt;&gt; 1)

const int SIZE = 1e5 + 5;
struct TreeNode {
    int l, r;
    int size;
} fhq[SIZE &lt;&lt; 5];
int n, m, tot, fa[SIZE], rt[SIZE];
int a[SIZE], rnk[SIZE], dp[SIZE], inq[30][SIZE], lastans, Q[SIZE];
std::vector &lt; std::vector &lt; int &gt; &gt; G(SIZE);

inline bool cmp(int x, int y) { return a[x] &lt; a[y]; }

inline void newnode(int t, int p) {
    fhq[++tot] = fhq[rt[t]];
    rt[t] = tot;
    int u = rt[t], l = 1, r = n;
    while (l ^ r) {
        fhq[u].size++;
        if (p &lt;= mid) fhq[++tot] = fhq[fhq[u].l], fhq[u].l = tot, u = fhq[u].l, r = mid;
        else fhq[++tot] = fhq[fhq[u].r], fhq[u].r = tot, u = fhq[u].r, l = mid + 1;
    }
    fhq[u].size++;
}

inline int find(int a, int b, int c, int d, int l, int r, int u) {
    if (l ^ r)
        if (fhq[fhq[a].l].size + fhq[fhq[b].l].size - fhq[fhq[c].l].size - fhq[fhq[d].l].size &gt;= u) return find(fhq[a].l, fhq[b].l, fhq[c].l, fhq[d].l, l, mid, u);
        else return find(fhq[a].r, fhq[b].r, fhq[c].r, fhq[d].r, mid + 1, r, u - (fhq[fhq[a].l].size + fhq[fhq[b].l].size - fhq[fhq[c].l].size - fhq[fhq[d].l].size));
    else return l;
}

inline void dfs(int x, int fa) {
    dp[x] = dp[fa] + 1;
    rt[x] = rt[fa];
    ::fa[x] = fa;
    newnode(x, a[x]);
    for (int i = 0; i &lt; (int)G[x].size(); ++i) if (G[x][i] ^ fa) dfs(G[x][i], x);
}
inline int lca_mast(int x, int y) {
    if (dp[x] &lt; dp[y]) std::swap(x, y);
    for (int i = 0; dp[x] - dp[y]; ++i) if ((1 &lt;&lt; i) &amp; (dp[x] - dp[y])) x = inq[i][x];
    if (x ^ y) { for (int i = 25; i &gt;= 0; --i) if (inq[i][x] ^ inq[i][y]) x = inq[i][x], y = inq[i][y]; return fa[x]; }
    else return x;
}

signed main() {
    scanf(&quot;%d %d&quot;, &amp;n, &amp;m);
    for (int i = 1; i &lt;= n; ++i) scanf(&quot;%d&quot;, &amp;a[i]), Q[i] = i;
    std::sort(Q + 1, Q + 1 + n, cmp);
    for (int i = 1; i &lt;= n; ++i) rnk[i] = a[Q[i]], a[Q[i]] = i;
    for (int i = 1, x, y; i &lt; n; ++i) scanf(&quot;%d %d&quot;, &amp;x, &amp;y), G[x].push_back(y), G[y].push_back(x);
    dfs(1, 0);
    for (int i = 1; i &lt;= n; ++i) inq[0][i] = fa[i];
    for (int i = 1; i &lt; 26; ++i) for (int j = 1; j &lt;= n; ++j) inq[i][j] = inq[i - 1][inq[i - 1][j]];
    for (int i = 1; i &lt;= m; ++i) {
        int x, y, z;
        scanf(&quot;%d %d %d&quot;, &amp;x, &amp;y, &amp;z);
        x ^= lastans;
        int lca = lca_mast(x, y);
        printf(&quot;%d\n&quot;, lastans = rnk[find(rt[x], rt[y], rt[lca], rt[fa[lca]], 1, n, z)]);
    }
    return 0;
}
</code></pre>
<h1 id="14-P2486-SDOI2011"><a href="#14-P2486-SDOI2011" class="headerlink" title="14.P2486 [SDOI2011]??"></a>14.P2486 [SDOI2011]??</h1><p><img src="https://cdn.luogu.com.cn/upload/pic/1600.png" alt="spfa together"></p>
<hr>
<h2 id="WGY-1"><a href="#WGY-1" class="headerlink" title="WGY"></a>WGY</h2><p>????????????????????????????1?????????9???????????????????????????????????</p>
<p>?????????????????$LinkCutTree$??$TreeChainSplitting$????????????$LCT$????????</p>
<p>???????$Splay$???????????????????????????????????????????????????????????????????????????????????????????????????????????</p>
<pre><code class="lang-cpp">#include &lt;cstdio&gt;
#include &lt;iostream&gt;
#include &lt;algorithm&gt;
#include &lt;cstring&gt;
#include &lt;queue&gt;
#define lson (fhq[x].ch[0])
#define rson (fhq[x].ch[1])

using namespace std;


#define DEBUG 1 // debug toggle
struct IO {
#define MAXSIZE (1 &lt;&lt; 20)
#define isdigit(x) (x &gt;= &#39;0&#39; &amp;&amp; x &lt;= &#39;9&#39;)
  char buf[MAXSIZE], *p1, *p2;
  char pbuf[MAXSIZE], *pp;
#if DEBUG
#else
  IO() : p1(buf), p2(buf), pp(pbuf) {}
  ~IO() { fwrite(pbuf, 1, pp - pbuf, stdout); }
#endif
  inline char gc() {
#if DEBUG
    return getchar();
#endif
    if (p1 == p2) p2 = (p1 = buf) + fread(buf, 1, MAXSIZE, stdin);
    return p1 == p2 ? &#39; &#39; : *p1++;
  }
  inline bool blank(char ch) {
    return ch == &#39; &#39; || ch == &#39;\n&#39; || ch == &#39;\r&#39; || ch == &#39;\t&#39;;
  }
  template &lt;class T&gt;
  inline void read(T &amp;x) {
    register double tmp = 1;
    register bool sign = 0;
    x = 0;
    register char ch = gc();
    for (; !isdigit(ch); ch = gc())
      if (ch == &#39;-&#39;) sign = 1;
    for (; isdigit(ch); ch = gc()) x = x * 10 + (ch - &#39;0&#39;);
    if (ch == &#39;.&#39;)
      for (ch = gc(); isdigit(ch); ch = gc())
        tmp /= 10.0, x += tmp * (ch - &#39;0&#39;);
    if (sign) x = -x;
  }
  inline void read(char *s) {
    register char ch = gc();
    for (; blank(ch); ch = gc())
      ;
    for (; !blank(ch); ch = gc()) *s++ = ch;
    *s = 0;
  }
  inline void read(char &amp;c) {
    for (c = gc(); blank(c); c = gc())
      ;
  }
  inline void push(const char &amp;c) {
#if DEBUG
    putchar(c);
#else
    if (pp - pbuf == MAXSIZE) fwrite(pbuf, 1, MAXSIZE, stdout), pp = pbuf;
    *pp++ = c;
#endif
  }
  template &lt;class T&gt;
  inline void write(T x) {
    if (x &lt; 0) x = -x, push(&#39;-&#39;);
    static T sta[35];
    T top = 0;
    do {
      sta[top++] = x % 10, x /= 10;
    } while (x);
    while (top) push(sta[--top] + &#39;0&#39;);
  }
  template &lt;class T&gt;
  inline void write(T x, char lastChar) {
    write(x), push(lastChar);
  }
} io;

const int SIZE = 1e6 + 5;
int n, m;
class LinkCutTree {
public:
    struct SPLAY {
        int w, c;
        int l, r;
        int tag, rev;
        int fa, ch[2];
    } fhq[SIZE]; // The fhq-treap replaces the splay
    // Struct SPLAY
    int stack[SIZE], tp;

    inline bool isroot(int x) { return fhq[fhq[x].fa].ch[0] ^ x &amp;&amp; fhq[fhq[x].fa].ch[1] ^ x; }
    inline void tr_dn1(int x) { if (fhq[x].rev) swap(lson, rson), swap(fhq[lson].l, fhq[lson].r), swap(fhq[rson].l, fhq[rson].r), fhq[lson].rev ^= 1, fhq[rson].rev ^= 1, fhq[x].rev = 0; }
    inline void tr_dn2(int x) { if (fhq[x].tag) fhq[x].l = fhq[x].r = fhq[x].c = fhq[x].tag, fhq[lson].tag = fhq[rson].tag = fhq[x].tag, fhq[x].w = fhq[x].tag = 0; }
    inline void tr_dn(int x) { tr_dn1(x), tr_dn2(x); }
    inline void tr_up_(int x) { tr_dn(lson), tr_dn(rson); fhq[x].w = fhq[lson].w + fhq[rson].w; }
    inline void tr_up1(int x) { if (lson) fhq[x].l = fhq[lson].l, ((fhq[x].c ^ fhq[lson].r) &amp;&amp; (++fhq[x].w, 1)); else fhq[x].l = fhq[x].c; }
    inline void tr_up2(int x) { if (rson) fhq[x].r = fhq[rson].r, ((fhq[x].c ^ fhq[rson].l) &amp;&amp; (++fhq[x].w, 1)); else fhq[x].r = fhq[x].c; }
    inline void tr_up(int x) { tr_up_(x); tr_up1(x); tr_up2(x); }
    inline void rotate(int x) { int y = fhq[x].fa, z = fhq[y].fa, k = fhq[y].ch[1] == x; if (!isroot(y)) fhq[z].ch[fhq[z].ch[1] == y] = x; fhq[x].fa = z; fhq[y].ch[k] = fhq[x].ch[k ^ 1], fhq[fhq[x].ch[k ^ 1]].fa = y; fhq[x].ch[k ^ 1] = y; fhq[y].fa = x; tr_up(y); }
    inline void splay1(int x) { stack[tp = 1] = x; for (int i = x; !isroot(i); i = fhq[i].fa) stack[++tp] = fhq[i].fa; while (tp) tr_dn(stack[tp--]); }
    inline void splay2(int x) { for (; !isroot(x); rotate(x)) { int y = fhq[x].fa, z = fhq[y].fa; if (!isroot(y)) (fhq[y].ch[1] ^ x ^ fhq[z].ch[1] ^ y) ? rotate(x) : rotate(y); } }
    inline void splay(int x) { splay1(x), splay2(x); tr_up(x); }
    inline void access(int x) { for (int y = 0; x; y = x, x = fhq[x].fa) splay(x), rson = y, tr_up(x); }
    inline void makeroot(int x) { access(x), splay(x), fhq[x].rev ^= 1; }
    inline int findroot(int x) { access(x), splay(x); while (lson) x = lson; return x; }
    inline void split(int x, int y) { makeroot(x), access(y), splay(y); }
    inline void connect(int x, int y) { makeroot(x), fhq[x].fa = y; }
} lct_mast; // Class LinkCutTree

signed main() {
    io.read(n), io.read(m);
    for (int i = 1, x; i &lt;= n; ++i) io.read(x), lct_mast.fhq[i].c = lct_mast.fhq[i].l = lct_mast.fhq[i].r = x;
    for (int i = 1, x, y; i &lt; n; ++i) io.read(x), io.read(y), lct_mast.connect(x, y);
    for (int i = 1, a, b, c; i &lt;= m; ++i) {
        char ch = getchar();
        while (ch ^ &#39;C&#39; &amp;&amp; ch ^ &#39;Q&#39;) ch = getchar();
        if (ch ^ &#39;Q&#39;) io.read(a), io.read(b), io.read(c), lct_mast.split(a, b), lct_mast.fhq[b].tag = c;
        else io.read(a), io.read(b), lct_mast.split(a, b), io.write(lct_mast.fhq[b].w + 1, &#39;\n&#39;);
    }
    return 0;
}
</code></pre>
<h2 id="LYC-1"><a href="#LYC-1" class="headerlink" title="LYC"></a>LYC</h2><h1 id="15-ZJOI2017"><a href="#15-ZJOI2017" class="headerlink" title="15.??ZJOI2017?????????"></a>15.??ZJOI2017?????????</h1><p>???????????????????????????????????????????????????????????????????OI????????????????????????????????</p>
<p>????????????$n$??????$A$?????????0????????????$m$???????????????????</p>
<p>* 1 x??????? $A_{x}$ ???? $\left ( A_{x}+ 1 \right )$ mod 2??</p>
<p>* 2 l r???????? $ \left ( \sum_{i=l}^{r} A_{i}  \right )$ mod 2??</p>
<p>???????????????????? simple??????????????????????????????????????????young ??????????????????</p>
<p> <img src="https://cdn.luogu.com.cn/upload/pic/4744.png" alt> </p>
<p>???? lowbit($x$) ??????? $x$ <strong>????</strong>??? 0 ?????????????? lowbit(5) = 1, lowbit(12) = 4????????????????????????? Add($x$)?????????????????????? Query($l$,$r$)??</p>
<p>????????????????????????????????????????????????? <strong>Add ?? Find ??</strong> $x$ <strong>????????????</strong>??????????????????????????????? 0 ???</p>
<p>??????????????????????????????????????????????????????????????????</p>
<p>????????</p>
<p>?????????????????????????????????????????????????????????????????</p>
<p>????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????? $x$</p>
<p>???????????????????????? $x$ ???? $\left [ l_{i},r_{i} \right ]$ ?????? <strong>?????????</strong> ???</p>
<p>??????????????????????????? $n$ ?????? $A$?????? 0?????????????? $m$ ????????</p>
<p>* 1 $l$ $r$??????????? $\left [ l, r \right ]$ ???????????? $x$ ????? Add($x$)??</p>
<p>* 2 $l$ $r$??????????? Query$\left ( l, r \right )$????????????????????????</p>
<hr>
<p>??????$\cdots$????????????????????????????</p>
<pre><code class="lang-cpp">#include &lt;cstdio&gt;
#include &lt;iostream&gt;
#include &lt;algorithm&gt;
#include &lt;cstring&gt;
#include &lt;queue&gt;
#define mid ((l + r) &gt;&gt; 1)

using namespace std;
typedef long long int ull;

const int SIZE = 1e5 + 5;
const int MOD = 998244353;
struct TreeNode {
    int l, r;
    int val;
} tr[SIZE * 400];
int rt[SIZE * 20], n, q, tot;

inline ull result(ull p, ull q) {
    ull res = p * q; res %= MOD;
    return res = (res + (1 - p + MOD) * (1 - q + MOD) % MOD) % MOD;
}

inline ull fast_pow(ull x, ull y) {
    ull res = 1;
    for (; y; y &gt;&gt;= 1, (x *= x) %= MOD) if (y &amp; 1) (res *= x) %= MOD;
    return res % MOD;
}

inline void modifies(int l, int r, int &amp;rt, int x, int y, ull p) {
    if (!rt) rt = ++tot, tr[rt].val = 1;
    if (l &gt;= x &amp;&amp; r &lt;= y) return (void)(tr[rt].val = result(p, tr[rt].val));
    if (mid &gt;= x) modifies(l, mid, tr[rt].l, x, y, p);
    if (mid &lt; y) modifies(mid + 1, r, tr[rt].r, x, y, p);
}

inline void modify(int l, int r, int rt, int lx, int rx, int ly, int ry, ull p) {
    if (l &gt;= lx &amp;&amp; r &lt;= rx) return (void)(modifies(1, n, ::rt[rt], ly, ry, p));
    if (mid &gt;= lx) modify(l, mid, rt &lt;&lt; 1, lx, rx, ly, ry, p);
    if (mid &lt; rx) modify(mid + 1, r, rt &lt;&lt; 1 | 1, lx, rx, ly, ry, p);
}

inline ull finds(int l, int r, int rt, int x) {
    if (!rt) return 1;
    if (l ^ r)
        if (mid &gt;= x) return result(tr[rt].val, finds(l, mid, tr[rt].l, x));
        else return result(tr[rt].val, finds(mid + 1, r, tr[rt].r, x));
    else return tr[rt].val;
}

inline ull find(int l, int r, int rt, int x, int y) {
    if (l ^ r)
        if (mid &gt;= x) return result(finds(1, n, ::rt[rt], y), find(l, mid, rt &lt;&lt; 1, x, y));
        else return result(finds(1, n, ::rt[rt], y), find(mid + 1, r, rt &lt;&lt; 1 | 1, x, y));
    else return finds(1, n, ::rt[rt], y);
}

signed main() {
    scanf(&quot;%d %d&quot;, &amp;n, &amp;q);
    for (int i = 0; i &lt; q; ++i) {
        int opt, l, r;
        scanf(&quot;%d %d %d&quot;, &amp;opt, &amp;l, &amp;r);
        if (opt ^ 1) printf(&quot;%lld\n&quot;, find(0, n, 1, l - 1, r));
        else {
            ull p = fast_pow(r - l + 1, MOD - 2);
            if (l &gt; 1) modify(0, n, 1, 1, l - 1, l, r, (1 - p + MOD) % MOD), modify(0, n, 1, 0, 0, 1, l - 1, 0);
            if (r &lt; n) modify(0, n, 1, l, r, r + 1, n, (1 - p + MOD) % MOD), modify(0, n, 1, 0, 0, r + 1, n, 0);
            modify(0, n, 1, l, r, l, r, (1 - p * 2 % MOD + MOD) % MOD), modify(0, n, 1, 0, 0, l, r, p);
        }
    }
    return 0;
}
</code></pre>
<h1 id="16-P2161-SHOI2009"><a href="#16-P2161-SHOI2009" class="headerlink" title="16.P2161 [SHOI2009]????"></a>16.P2161 [SHOI2009]????</h1><pre><code class="lang-cpp">// ????LJS?2??????????
</code></pre>
<hr>
<p>????????????????????????BIT????????????????STL??????</p>
<p>?????????????????????????????????????????set???????????</p>
<p>???????????????????set?????????</p>
<pre><code class="lang-cpp">// ????????????

struct LaLaLand {
    int l, r;
    bool operator &lt; (const LaLaLand&amp; rhs) const { return r &lt; rhs.l; }
};
set &lt; LaLaLand &gt; st;
int T;

signed main() {
    for (read(T); T; --T) {
        char opt[5];
        read(opt);
        int l, r, cnt = 0;
        if (*opt == &#39;A&#39;) {
            read(l, r);
            LaLaLand tmp = {l, r};
            IT it = st.find(tmp);
            while (it != st.end()) ++cnt, st.erase(it), it = st.find(tmp);
            st.insert(tmp);
            write(io_l, cnt);
        }
        else write(io_l, st.size());
    }
    return 0;
}
</code></pre>
<h1 id="17-SP11470-TTM-To-the-moon"><a href="#17-SP11470-TTM-To-the-moon" class="headerlink" title="17.SP11470 TTM - To the moon"></a>17.SP11470 TTM - To the moon</h1><p>????????n???????4????? ??</p>
<ul>
<li><p><code>C l r d</code>?????? $[l,r]$ ?????????? $d$ ???????????????? $1$??</p>
</li>
<li><p><code>Q l r</code>????????????????? $[l,r]$ ??????????? ??</p>
</li>
<li><p><code>H l r t</code>?????????? $t$ ???? $[l,r]$ ??? ??</p>
</li>
<li><p><code>B t</code>??????????????? $t$ ??</p>
</li>
</ul>
<hr>
<p>????????????????????+?????????????????????????(???????1K)??????(???????????????????)</p>
<p>????????????????????????????????????????</p>
<p>???…???????????????????????????????????????????????</p>
<h1 id="18-P4168-Violet"><a href="#18-P4168-Violet" class="headerlink" title="18.P4168 [Violet]????"></a>18.P4168 [Violet]????</h1><p>??????????????????????????????????????????????????????????</p>
<p>???????????????????????????????????????n?????? $(a_1,a_2..a_n)$?????? $a_i$ ?????????????????i?????????????????</p>
<p>??????????????? [l,r]??????????????????????????????????????????????????????????????????????????????????????????????</p>
<p>????????????????????</p>
<hr>
<h2 id="LYC-2"><a href="#LYC-2" class="headerlink" title="LYC:"></a>LYC:</h2><p><del>????????????????????</del></p>
<p>??????????????????????????</p>
<p>????????????????????????????????????????????????????????????????????????????????</p>
<p>??????????????????????????????????????????????????????????????????????????????</p>
<p><strong>???</strong>?????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????</p>
<p>?????????????????????</p>
<p>????????????????????????????????????????????????????</p>
<p>?????????????????????$n^{2/3}$????$\sqrt n$?????????? </p>
<pre><code>#include&lt;cmath&gt;
#include&lt;cstdio&gt;
#include&lt;vector&gt;
#include&lt;algorithm&gt;
using namespace std;
vector&lt;int&gt; pri;
int n,m,a[40010],each,cnt[40][40][40010],MAX[40][40],lans,l,r,ans,tmp[40010];
int main()
{
    scanf(&quot;%d %d&quot;,&amp;n,&amp;m);
    each=pow(n,2.0/3);
    for(int i=1;i&lt;=n;++i)
    {
        scanf(&quot;%d&quot;,&amp;a[i]);
        pri.push_back(a[i]);
    }
    sort(pri.begin(),pri.end());
    pri.erase(unique(pri.begin(),pri.end()),pri.end());
    for(int i=1;i&lt;=n;++i)    a[i]=lower_bound(pri.begin(),pri.end(),a[i])-pri.begin()+1;//????? 
    for(int i=1,p=1;i&lt;=n;i+=each,++p)
    {
        for(int j=i+each-1,q=p;j&lt;=n;j+=each,++q)
        {
            for(int k=i;k&lt;=j;++k)
            {
                ++cnt[p][q][a[k]];
                if(cnt[p][q][a[k]]&gt;cnt[p][q][MAX[p][q]]||(cnt[p][q][a[k]]==cnt[p][q][MAX[p][q]]&amp;&amp;a[k]&lt;MAX[p][q]))    MAX[p][q]=a[k];
            }
        }
    }//????????????? 
    for(int i=1;i&lt;=m;++i)
    {
        scanf(&quot;%d %d&quot;,&amp;l,&amp;r);
        l=(l+lans-1)%n+1;
        r=(r+lans-1)%n+1;
        if(l&gt;r)    swap(l,r);//??????? 
        if(r-l&gt;2*each)
        {
            int p=ceil(1.0*(l-1)/each)+1;
            int q=ceil(1.0*(r+1)/each)-1;//???????????????
            ans=MAX[p][q];//??????? 
            for(int i=(p-1)*each;i&gt;=l;--i)
            {
                ++cnt[p][q][a[i]];
                if(cnt[p][q][a[i]]&gt;cnt[p][q][ans]||(cnt[p][q][a[i]]==cnt[p][q][ans]&amp;&amp;a[i]&lt;ans))    ans=a[i];
            }
            for(int i=q*each+1;i&lt;=r;++i)
            {
                ++cnt[p][q][a[i]];
                if(cnt[p][q][a[i]]&gt;cnt[p][q][ans]||(cnt[p][q][a[i]]==cnt[p][q][ans]&amp;&amp;a[i]&lt;ans))    ans=a[i];
            }
            lans=pri[ans-1];//?????? 
            printf(&quot;%d\n&quot;,lans);
            for(int i=(p-1)*each;i&gt;=l;--i)    --cnt[p][q][a[i]];
            for(int i=q*each+1;i&lt;=r;++i)    --cnt[p][q][a[i]];//???? 
        }
        else//???????????????????????????????????????????????????????????????? 
        {
            ans=0;
            for(int i=l;i&lt;=r;++i)
            {
                ++tmp[a[i]];
                if(tmp[a[i]]&gt;tmp[ans]||(tmp[a[i]]==tmp[ans]&amp;&amp;a[i]&lt;ans))    ans=a[i];
            }
            lans=pri[ans-1];
            printf(&quot;%d\n&quot;,lans);
            for(int i=l;i&lt;=r;++i)    --tmp[a[i]];//???????? 
        }
    }
    return 0;
}
</code></pre><h2 id="WGY-2"><a href="#WGY-2" class="headerlink" title="WGY:"></a>WGY:</h2><p>??????luogu??????????????…????…????????????+???????????</p>
<p>???….????????(?????????????????????????????????…)</p>
<pre><code class="lang-cpp">#include &lt;cstdio&gt;
#include &lt;iostream&gt;
#include &lt;algorithm&gt;
#include &lt;cstring&gt;
#include &lt;queue&gt;
#define mid ((l + r) &gt;&gt; 1)
#define mp make_pair
#define fir first
#define sec second
#define pub push_back
#define pob pop_back

using namespace std;
typedef long long LL;

// #define DEBUG 1
struct IO {
#define MAXSIZE (1 &lt;&lt; 20)
#define isdigit(x) (x &gt;= &#39;0&#39; &amp;&amp; x &lt;= &#39;9&#39;)
  char buf[MAXSIZE], *p1, *p2;
  char pbuf[MAXSIZE], *pp;
#if DEBUG
#else
  IO() : p1(buf), p2(buf), pp(pbuf) {}
  ~IO() { fwrite(pbuf, 1, pp - pbuf, stdout); }
#endif
  inline char gc() {
#if DEBUG
    return getchar();
#endif
    if (p1 == p2) p2 = (p1 = buf) + fread(buf, 1, MAXSIZE, stdin);
    return p1 == p2 ? &#39; &#39; : *p1++;
  }
  inline bool blank(char ch) {
    return ch == &#39; &#39; || ch == &#39;\n&#39; || ch == &#39;\r&#39; || ch == &#39;\t&#39;;
  }
  template &lt;class T&gt;
  inline void read(T &amp;x) {
    register double tmp = 1;
    register bool sign = 0;
    x = 0;
    register char ch = gc();
    for (; !isdigit(ch); ch = gc())
      if (ch == &#39;-&#39;) sign = 1;
    for (; isdigit(ch); ch = gc()) x = x * 10 + (ch - &#39;0&#39;);
    if (ch == &#39;.&#39;)
      for (ch = gc(); isdigit(ch); ch = gc())
        tmp /= 10.0, x += tmp * (ch - &#39;0&#39;);
    if (sign) x = -x;
  }
  inline void read(char *s) {
    register char ch = gc();
    for (; blank(ch); ch = gc())
      ;
    for (; !blank(ch); ch = gc()) *s++ = ch;
    *s = 0;
  }
  inline void read(char &amp;c) {
    for (c = gc(); blank(c); c = gc())
      ;
  }
  inline void push(const char &amp;c) {
#if DEBUG
    putchar(c);
#else
    if (pp - pbuf == MAXSIZE) fwrite(pbuf, 1, MAXSIZE, stdout), pp = pbuf;
    *pp++ = c;
#endif
  }
  template &lt;class T&gt;
  inline void write(T x) {
    if (x &lt; 0) x = -x, push(&#39;-&#39;);
    static T sta[35];
    T top = 0;
    do {
      sta[top++] = x % 10, x /= 10;
    } while (x);
    while (top) push(sta[--top] + &#39;0&#39;);
  }
  template &lt;class T&gt;
  inline void write(T x, char lastChar) {
    write(x), push(lastChar);
  }
} io;

const int SIZE = 50000 + 5;
int a[SIZE], b[SIZE];
int cnt[SIZE], x;
int l, r, n, m, l0, r0;

signed main() {
    io.read(n), io.read(m);
    for (int i = 1; i &lt;= n; ++i) io.read(a[i]), b[i] = a[i];
    sort(b + 1, b + 1 + n);
    int len = unique(b + 1, b + 1 + n) - b - 1;
    for (int i = 1; i &lt;= n; ++i) a[i] = lower_bound(b + 1, b + 1 + len, a[i]) - b;
    while (m--) {
        io.read(l0), io.read(r0);
        l = (l0 + x - 1) % n + 1;
        r = (r0 + x - 1) % n + 1;
        if (l &gt; r) swap(l, r);
        for (int i = l; i &lt;= r; ++i) cnt[a[i]]++;
        int MAX = 0, pos = 0;
        for (int i = 1; i &lt;= len; ++i) if (MAX &lt; cnt[i]) MAX = cnt[i], pos = i;
        printf(&quot;%d\n&quot;, b[pos]);
        x = b[pos];
        memset(cnt, 0, sizeof cnt);
    }
}
</code></pre>
<h1 id="19-CQOI2014"><a href="#19-CQOI2014" class="headerlink" title="19.[CQOI2014]??????????"></a>19.[CQOI2014]??????????</h1><p>?????????????????????????????????????????????????????????????????????????????????????????????????????????? $P_1$ ???????????????????? $P_1$  ??????? (?????? $[1,P_1]$  ???????) ??????????????????????????? $P_2$ ????????????????? $P_2$  ??????? (?????? $[2,P_2]$  ???????) ??????????????????????????????</p>
<p><img src="https://cdn.luogu.com.cn/upload/pic/15642.png" alt="???????"></p>
<p>???????????????????????????????????????????????????? $4$ ?????????????????????????????????????????????????D??????????????????????????</p>
<p>???????????????????????????????????????????????????? $i$  ?????????????? $P_i$ ????????????????????????????????????????????????????????????????????????????????????</p>
<hr>
<h2 id="LYC-3"><a href="#LYC-3" class="headerlink" title="LYC??"></a>LYC??</h2><p>??????????????</p>
<p>?????????????????????6???????????</p>
<p>?????????????????????????????????????????????????????</p>
<p>??????</p>
<p>?????????????</p>
<p>???????????</p>
<p>?????????update???????????????????????????????????????????????????????????????????</p>
<p>?????????????????????</p>
<p>1).???????????????????????????????</p>
<p>?????????????????????</p>
<p>????????????????????????????????????????????</p>
<p>2).?????????????????</p>
<p>??????????????????????</p>
<p>3).?????????????????</p>
<p>???????????????</p>
<p>????????????????????????????????????????????????????????????????? </p>
<p>???????????????????????????????????????????????????????</p>
<p>?????????????????????????????????????????????????????????</p>
<p>????</p>
<pre><code>#include&lt;cstdio&gt;
#include&lt;algorithm&gt;
using namespace std;
int n,tot,root,root1,root2,root3,c[100010];

struct node
{
    int l,r,num,key,sum;
    int s,smum;//?????????????????????? 
    bool rev;//??????? 
}nodes[100010];

struct laji
{
    int v,ID;
}a[100010];
bool cmp(laji one,laji two)
{
    if(one.v^two.v)    return one.v&lt;two.v;
    return one.ID&lt;two.ID;
}//???????????????????????????????????????????? 

int newnode(int val)
{
    nodes[++tot].s=val;//????????????????????? 
    nodes[tot].num=val;
    nodes[tot].key=rand();
    nodes[tot].sum=1;
    return tot;
}
void pushdown(int x)
{
    swap(nodes[x].l,nodes[x].r);//?????????????? 
    nodes[x].smum=nodes[x].sum-(nodes[x].smum+1);//?????????????????????????????t???????? 
    //????????????????nodes[x].smum
    //?????: nodes[x].smum+1
    //????????nodes[x].sum-(nodes[x].smum+1)+1
    //??????????????????nodes[x].sum-(nodes[x].smum+1)
    nodes[nodes[x].l].rev^=1;
    nodes[nodes[x].r].rev^=1;//???????? 
    nodes[x].rev=0;//??????? 
}
void update(int x)
{
    nodes[x].sum=nodes[nodes[x].l].sum+nodes[nodes[x].r].sum+1;
    if(nodes[nodes[x].l].rev)    pushdown(nodes[x].l);
    if(nodes[nodes[x].r].rev)    pushdown(nodes[x].r);//??????????????????????????????????3????????
    if(nodes[x].num&lt;nodes[nodes[x].l].s&amp;&amp;nodes[x].num&lt;nodes[nodes[x].r].s)//????????????1 
    {
        nodes[x].s=nodes[x].num;
        nodes[x].smum=nodes[nodes[x].l].sum;
    }
    else if(nodes[nodes[x].l].s&lt;nodes[nodes[x].r].s)//????2 
    {
        nodes[x].s=nodes[nodes[x].l].s;
        nodes[x].smum=nodes[nodes[x].l].smum;
    }
    else//????3 
    {
        nodes[x].s=nodes[nodes[x].r].s;
        nodes[x].smum=nodes[nodes[x].r].smum+nodes[nodes[x].l].sum+1;
    }
}
void split(int now,int siz,int &amp;x,int &amp;y)
{
    if(!now)    x=y=0;
    else
    {
        if(nodes[now].rev)    pushdown(now);//????????????????????????????????? 
        if(nodes[nodes[now].l].sum&lt;siz)
        {
            x=now;
            split(nodes[now].r,siz-nodes[nodes[now].l].sum-1,nodes[x].r,y);
        }
        else
        {
            y=now;
            split(nodes[now].l,siz,x,nodes[y].l);
        }
        update(now);
    }
}
int merge(int x,int y)
{
    if(!x||!y)    return x+y;
    if(nodes[x].key&lt;nodes[y].key)
    {
        if(nodes[x].rev)    pushdown(x);
        nodes[x].r=merge(nodes[x].r,y);
        update(x);
        return x;
    }
    else
    {
        if(nodes[y].rev)    pushdown(y);
        nodes[y].l=merge(x,nodes[y].l);
        update(y);
        return y;
    }
}
int main()
{
    srand(20060515);
    nodes[0].num=nodes[0].s=1e9;//????????????????????????????????????????????0?????? 
    scanf(&quot;%d&quot;,&amp;n);
    for(int i=1;i&lt;=n;++i)
    {
        scanf(&quot;%d&quot;,&amp;a[i].v);
        a[i].ID=i;
    }
    sort(a+1,a+1+n,cmp);
    for(int i=1;i&lt;=n;++i)    c[a[i].ID]=i;//????? 
    for(int i=1;i&lt;=n;++i)    root=merge(root,newnode(c[i]));//??????????????????????????????????? 
    for(int i=1;i&lt;=n;++i)
    {
        if(nodes[root].rev)    pushdown(root);//????????????????????????????????????????????? 
        printf(&quot;%d &quot;,nodes[root].smum+i);//????????i-1?????????????? 
        split(root,nodes[root].smum,root1,root2);
        split(root2,1,root2,root3);//????????? 
        nodes[root1].rev^=1;//???????????? 
        root=merge(root1,root3);
    }
    return 0;
}
</code></pre><h2 id="WGY-3"><a href="#WGY-3" class="headerlink" title="WGY:"></a>WGY:</h2><p>SplayNB?????????????????????????(????????????LYC???????????)</p>
<pre><code class="lang-cpp">#include &lt;cstdio&gt;
#include &lt;iostream&gt;
#include &lt;algorithm&gt;
#include &lt;cstring&gt;
#include &lt;queue&gt;
#define mid ((l + r) &gt;&gt; 1)

using namespace std;

// #define DEBUG 1
struct IO {
#define MAXSIZE (1 &lt;&lt; 20)
#define isdigit(x) (x &gt;= &#39;0&#39; &amp;&amp; x &lt;= &#39;9&#39;)
  char buf[MAXSIZE], *p1, *p2;
  char pbuf[MAXSIZE], *pp;
#if DEBUG
#else
  IO() : p1(buf), p2(buf), pp(pbuf) {}
  ~IO() { fwrite(pbuf, 1, pp - pbuf, stdout); }
#endif
  inline char gc() {
#if DEBUG
    return getchar();
#endif
    if (p1 == p2) p2 = (p1 = buf) + fread(buf, 1, MAXSIZE, stdin);
    return p1 == p2 ? &#39; &#39; : *p1++;
  }
  inline bool blank(char ch) {
    return ch == &#39; &#39; || ch == &#39;\n&#39; || ch == &#39;\r&#39; || ch == &#39;\t&#39;;
  }
  template &lt;class T&gt;
  inline void read(T &amp;x) {
    register double tmp = 1;
    register bool sign = 0;
    x = 0;
    register char ch = gc();
    for (; !isdigit(ch); ch = gc())
      if (ch == &#39;-&#39;) sign = 1;
    for (; isdigit(ch); ch = gc()) x = x * 10 + (ch - &#39;0&#39;);
    if (ch == &#39;.&#39;)
      for (ch = gc(); isdigit(ch); ch = gc())
        tmp /= 10.0, x += tmp * (ch - &#39;0&#39;);
    if (sign) x = -x;
  }
  inline void read(char *s) {
    register char ch = gc();
    for (; blank(ch); ch = gc())
      ;
    for (; !blank(ch); ch = gc()) *s++ = ch;
    *s = 0;
  }
  inline void read(char &amp;c) {
    for (c = gc(); blank(c); c = gc())
      ;
  }
  inline void push(const char &amp;c) {
#if DEBUG
    putchar(c);
#else
    if (pp - pbuf == MAXSIZE) fwrite(pbuf, 1, MAXSIZE, stdout), pp = pbuf;
    *pp++ = c;
#endif
  }
  template &lt;class T&gt;
  inline void write(T x) {
    if (x &lt; 0) x = -x, push(&#39;-&#39;);
    static T sta[35];
    T top = 0;
    do {
      sta[top++] = x % 10, x /= 10;
    } while (x);
    while (top) push(sta[--top] + &#39;0&#39;);
  }
  template &lt;class T&gt;
  inline void write(T x, char lastChar) {
    write(x), push(lastChar);
  }
} io;

const int SIZE = 100000 + 5;
struct SPLAY {
    int fa;
    int size;
    int val;
    int rev;
    int ch[2];
} t[SIZE];
int n, root, tot, pos[SIZE];
struct InputNode {
    int id;
    int val;
} a[SIZE];

bool cmp1(const InputNode&amp; rhs, const InputNode&amp; rsp) { return rhs.val ^ rsp.val ? rhs.val &lt; rsp.val : rhs.id &lt; rsp.id; }
bool cmp2(const InputNode&amp; rhs, const InputNode&amp; rsp) { return rhs.id &lt; rsp.id; }

void update(int x) {
    t[x].size = t[t[x].ch[0]].size + t[t[x].ch[1]].size + 1;
}

void transf(int x) {
    if (t[x].rev) {
        swap(t[x].ch[0], t[x].ch[1]);
        t[t[x].ch[0]].rev ^= 1;
        t[t[x].ch[1]].rev ^= 1;
        t[x].rev = 0;
    }
}

int make(int fa, int l, int r) {
    if (l &gt; r) return 0;
    int p = ++tot;
    return(t[p].val = a[mid].val, t[p].fa = fa, pos[a[mid].val] = p, t[p].ch[0] = make(p, l, mid - 1), t[p].ch[1] = make(p, mid + 1, r), update(p), p);
}

void rotate(int x) {
    int y = t[x].fa, z = t[y].fa;
    transf(y), transf(x);
    int k = t[t[x].fa].ch[1] == x;
    t[y].ch[k] = t[x].ch[k ^ 1];
    t[t[y].ch[k]].fa = y;
    t[y].fa = x;
    t[x].ch[k ^ 1] = y;
    t[x].fa = z;
    if (z) t[z].ch[y == t[z].ch[1]] = x;
    update(y), update(x);
}

void splay(int x, int goal) {
    for (int y; (y = t[x].fa) ^ goal; rotate(x))
        if (t[y].fa ^ goal)
            rotate(t[t[x].fa].ch[1] ^ x ^ y ^ t[t[y].fa].ch[1] ? x : y);
    if (!goal) root = x;
}

int behavior() {
    transf(root);
    int x = t[root].ch[1];
    while (transf(x), t[x].ch[0]) x = t[x].ch[0];
    return x;
}

signed main() {
    scanf(&quot;%d&quot;, &amp;n);
    for (int i = 1; i &lt;= n; ++i) scanf(&quot;%d&quot;, &amp;a[i + 1].val), a[i + 1].id = i + 1;
    a[1].val = 0, a[n + 2].val = n + 1;
    sort(a + 2, a + 2 + n, cmp1);
    for (int i = 2; i &lt;= n + 1; ++i) a[i].val = i - 1;
    sort(a + 2, a + 2 + n, cmp2);
    root = make(0, 1, n + 2);
    for (int i = 1; i &lt;= n; ++i) {
        int x = pos[i];
        splay(x, 0);
        printf(&quot;%d &quot;, t[t[x].ch[0]].size);
        x = behavior();
        int y = pos[i - 1];
        splay(y, 0);
        splay(x, y);
        t[t[x].ch[0]].rev ^= 1;
    }
    return 0;
}
</code></pre>
<h1 id="20-SHOI2013-amp"><a href="#20-SHOI2013-amp" class="headerlink" title="20.[SHOI2013]??????????(???????&amp;?????)"></a>20.[SHOI2013]??????????(???????&amp;?????)</h1><p><img src="https://cdn.luogu.com.cn/upload/pic/11825.png" alt> </p>
<p>???? n ???????????????????????????????? $k$ ?????????????</p>
<hr>
<h2 id="LYC-4"><a href="#LYC-4" class="headerlink" title="LYC:"></a>LYC:</h2><p>???????????????????,??????????????</p>
<p><strong>?????</strong>??</p>
<p>????????????????????????????????????</p>
<p>???????<del>????????</del>??$10^5$??????????????????????????$10^9$??</p>
<p>?????????????????????????????????</p>
<p>??????????????????????????a???????????????</p>
<p>??????????????????????????????????????????????????????????????</p>
<p>?????????????????????????????????????????????????</p>
<p>???????????????????????</p>
<p>???????????????????????????????????????????????????????????????</p>
<p>???????????<del>??????????</del></p>
<p>$\ $</p>
<p>????????????????????????</p>
<p>?????????????????????????$k$?????????????????</p>
<p>????????????????????????????</p>
<p>????????????????????????</p>
<p>???????????????????????????????????</p>
<p>?????????$k$???????????????????????$k$?????????????????????$k$???????????????????????????????????????????$k$??</p>
<p>???????????????????????????????????????????????????????????$k$??????????</p>
<p>?????????????????????????????????????????????????????????</p>
<p>??????????????????????</p>
<p>????</p>
<pre><code>#include&lt;cstdio&gt;
#include&lt;vector&gt;
#include&lt;algorithm&gt;
using namespace std;
long long n,m,k,nodes[400010],a1,a2,ans,s,now;
struct cir
{
    long long r;
    bool insorex;//1??????2????
}cur;
vector&lt;cir&gt; op[2000010];//????????????????????
void ins(long long l,long long r,long long x,long long pos)
{
    ++nodes[x];
    if(l^r)
    {
        long long mid=(l+r)&gt;&gt;1;
        if(pos&lt;=mid)    ins(l,mid,x&lt;&lt;1,pos);
        else    ins(mid+1,r,x&lt;&lt;1|1,pos);
    }
}
void exins(long long l,long long r,long long x,long long pos)//??????????
{
    --nodes[x];
    if(l^r)
    {
        long long mid=(l+r)&gt;&gt;1;
        if(pos&lt;=mid)    exins(l,mid,x&lt;&lt;1,pos);
        else    exins(mid+1,r,x&lt;&lt;1|1,pos);
    }
}
long long find(long long l,long long r,long long x,long long val)//?????????????????k??
{
    if(l==r)    return l;
    long long mid=(l+r)&gt;&gt;1;
    if(val&lt;=nodes[x&lt;&lt;1|1])    return find(mid+1,r,x&lt;&lt;1|1,val);
    else    return find(l,mid,x&lt;&lt;1,val-nodes[x&lt;&lt;1|1]);
}
int main()
{
    scanf(&quot;%lld %lld %lld&quot;,&amp;n,&amp;m,&amp;k);
    for(long long i=1;i&lt;=n;++i)
    {
        scanf(&quot;%lld %lld %lld&quot;,&amp;cur.r,&amp;a1,&amp;a2);
        s=max(s,cur.r);
        a1+=m;
        a2+=m;//a1,a2?????????
               //?????????????
        if(a1&gt;a2)//?????????????????????????????
        {
            cur.insorex=1;
            op[a1+1].push_back(cur);
            op[1].push_back(cur);
            cur.insorex=0;
            op[a2+1].push_back(cur);
        }
        else
        {
            cur.insorex=1;
            op[a1+1].push_back(cur);
            cur.insorex=0;
            op[a2+1].push_back(cur);
        }
    }
    for(long long i=1;i&lt;=m*2;++i)//??????????(-Pi,Pi]
    {
        for(long long j=0;j&lt;op[i].size();++j)//??????????
        {
            cur=op[i][j];
            if(cur.insorex)
            {
                ins(1,s,1,cur.r);
                ++now;
            }
            else
            {
                exins(1,s,1,cur.r);
                --now;//?????????????????
            }
        }
        if(now&gt;=k)//??k??????????????????
        {
            long long tmp=find(1,s,1,k);
            ans+=tmp*tmp;//??????????Pi*r*r
        }
    }
    printf(&quot;%lld\n&quot;,ans);
    return 0;
}
</code></pre><h2 id="WGY-4"><a href="#WGY-4" class="headerlink" title="WGY"></a>WGY</h2><p>?????????+???????????????$O(n\log^2n)$</p>
<p><del>???????????????????????????????????????????????????????</del></p>
<p>??????????????????? $k$ ???????????????????????????????????????????</p>
<pre><code class="lang-cpp">#include &lt;cstdio&gt;
#include &lt;iostream&gt;
#include &lt;algorithm&gt;
#include &lt;cstring&gt;
#include &lt;queue&gt;
#define mid ((l + r) &gt;&gt; 1)
#define mp make_pair
#define fir first
#define sec second
#define pub push_back
#define pob pop_back

using namespace std;
typedef long long LL;

 #define DEBUG 1
struct IO {
#define MAXSIZE (1 &lt;&lt; 20)
#define isdigit(x) (x &gt;= &#39;0&#39; &amp;&amp; x &lt;= &#39;9&#39;)
  char buf[MAXSIZE], *p1, *p2;
  char pbuf[MAXSIZE], *pp;
#if DEBUG
#else
  IO() : p1(buf), p2(buf), pp(pbuf) {}
  ~IO() { fwrite(pbuf, 1, pp - pbuf, stdout); }
#endif
  inline char gc() {
#if DEBUG
    return getchar();
#endif
    if (p1 == p2) p2 = (p1 = buf) + fread(buf, 1, MAXSIZE, stdin);
    return p1 == p2 ? &#39; &#39; : *p1++;
  }
  inline bool blank(char ch) {
    return ch == &#39; &#39; || ch == &#39;\n&#39; || ch == &#39;\r&#39; || ch == &#39;\t&#39;;
  }
  template &lt;class T&gt;
  inline void read(T &amp;x) {
    register double tmp = 1;
    register bool sign = 0;
    x = 0;
    register char ch = gc();
    for (; !isdigit(ch); ch = gc())
      if (ch == &#39;-&#39;) sign = 1;
    for (; isdigit(ch); ch = gc()) x = x * 10 + (ch - &#39;0&#39;);
    if (ch == &#39;.&#39;)
      for (ch = gc(); isdigit(ch); ch = gc())
        tmp /= 10.0, x += tmp * (ch - &#39;0&#39;);
    if (sign) x = -x;
  }
  inline void read(char *s) {
    register char ch = gc();
    for (; blank(ch); ch = gc())
      ;
    for (; !blank(ch); ch = gc()) *s++ = ch;
    *s = 0;
  }
  inline void read(char &amp;c) {
    for (c = gc(); blank(c); c = gc())
      ;
  }
  inline void push(const char &amp;c) {
#if DEBUG
    putchar(c);
#else
    if (pp - pbuf == MAXSIZE) fwrite(pbuf, 1, MAXSIZE, stdout), pp = pbuf;
    *pp++ = c;
#endif
  }
  template &lt;class T&gt;
  inline void write(T x) {
    if (x &lt; 0) x = -x, push(&#39;-&#39;);
    static T sta[35];
    T top = 0;
    do {
      sta[top++] = x % 10, x /= 10;
    } while (x);
    while (top) push(sta[--top] + &#39;0&#39;);
  }
  template &lt;class T&gt;
  inline void write(T x, char lastChar) {
    write(x), push(lastChar);
  }
} io;

const int SIZE = 1e6 + 5;
int n, m, k, a[SIZE];
LL tree[SIZE], ans;
vector &lt; int &gt; In[SIZE&lt;&lt;1], Out[SIZE&lt;&lt;1];

void Add(int x, int y) { for (; x &lt; SIZE; x += x &amp; -x) tree[x] += y; }

int Ask(int x, int res = 0) { for (; x; x -= x &amp; -x) res += tree[x]; return res; }

int KthElement(int k) {
    int l = 1, r = SIZE - 5;
    while (l &lt; r)
        if (Ask(mid) &lt; k) l = mid + 1;
        else r = mid;
    return l;
}

signed main() {
    io.read(m), io.read(n), io.read(k);
    int L, R;
    for (int i = 1; i &lt;= m; ++i) {
        io.read(a[i]);
        io.read(L);
        io.read(R);
        if (L &lt; R) L += n + 1, R += n, In[L].pub(i), Out[R + 1].pub(i);
        else L ^= R ^= L ^= R, L += n, R += n + 1, In[1].pub(i), Out[L + 1].pub(i), In[R].pub(i);
    }
    int now = 0, x;
    for (int i = 1; i &lt;= (n&lt;&lt;1); ++i) {
        for (int j = 0; j &lt; In[i].size(); ++j) Add(a[In[i][j]], 1);
        for (int j = 0; j &lt; Out[i].size(); ++j) Add(a[Out[i][j]], -1);
        now += In[i].size() - Out[i].size();
        if (now &gt;= k) x = KthElement(now - k + 1), ans += (LL)x * x;
    }
    printf(&quot;%lld\n&quot;, ans);
    return 0;
}
</code></pre>

                      
        </div>
        <!-- .entry-content -->
        <!-- <div class="single-reward">
          <div class="reward-open">赏
            <div class="reward-main">
              <ul class="reward-row">
                <li class="alipay-code"><img src="https://cdn.jsdelivr.net/gh/BoringHacker/cdn/img/custom/donate/AliPayQR.jpg"></li>
                <li class="wechat-code"><img src="https://cdn.jsdelivr.net/gh/BoringHacker/cdn/img/custom/donate/WeChanQR.jpg"></li>
              </ul>
            </div>
          </div>
        </div>
        <div style="text-align:center; width: 100%" class="social-share share-mobile" data-disabled="diandian, tencent"></div>
        <footer class="post-footer">
          <div class="post-lincenses"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="nofollow"><i class="fa fa-creative-commons" aria-hidden="true"></i> 知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a></div>
          <div class="post-tags">
          </div>
          <div class="post-share">
            <div class="social-share sharehidden share-component"></div>
            <i class="iconfont show-share icon-forward"></i>
          </div>
        </footer>. -->
        <!-- entry-footer -->
      </article>
      <!-- #post-## -->
      <div class="toc" style="background: none;"></div>
      <section class="post-squares nextprev">
        
          
            <div class="post-nepre half previous">
          
            <a href="/2020/02/08/DS100P-21-30-P/" rel="prev">
              <div class="background">
                <img class="lazyload" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/loader/orange.progress-bar-stripe-loader.svg" data-src="https://cdn.jsdelivr.net/gh/boringhacker/cdn/images/posts/post-33.png" style="width: 100%; height: 100%; object-fit: cover; pointer-events: none;" onerror="imgError(this,3)" src="https://cdn.jsdelivr.net/gh/boringhacker/cdn/images/posts/post-33.png">
              </div>
              <span class="label">
              Previous Post</span>
              <div class="info">
                <h3>
                ?????100?? 21~30??</h3>
              </div>
            </a>
          </div>
        
        
          
            <div class="post-nepre half next">
          
            <a href="/2020/02/08/DS100P-1-10-P/" rel="next">
              <div class="background">
                <img class="lazyload" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/loader/orange.progress-bar-stripe-loader.svg" data-src="https://cdn.jsdelivr.net/gh/boringhacker/cdn/images/posts/post-31.png" style="width: 100%; height: 100%; object-fit: cover; pointer-events: none;" onerror="imgError(this,3)" src="https://cdn.jsdelivr.net/gh/boringhacker/cdn/images/posts/post-31.png">
              </div>
              <span class="label">
              Next Post</span>
              <div class="info">
                <h3>
                ?????100?? 1~10??</h3>
              </div>
            </a>
          </div>
        
      </section>
      
<div id="vcomments"></div>
<script>
  window.onload = function(){
      var valine = new Valine();
      valine.init({
        el: '#vcomments',
        appId: "8Hho6gvnedMT9NMEhnEx3UOg-gzGzoHsz",
        appKey: "gU70zYoblzxCmc6iL697pp69",
        path: window.location.pathname,
        placeholder: "Come And Get Your Love~"
      })
  }
</script>

      <section class="author-profile">
        <div class="info" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
          <a href="/" class="profile gravatar"><img src="https://cdn.jsdelivr.net/gh/boringhacker/cdn/images/icons/avatar.png" itemprop="image" alt="BoringHacker" height="70" width="70"></a>
          <div class="meta">
            <span class="title">Author</span>
            <h3 itemprop="name">
            <a href="/" itemprop="url" rel="author">BoringHacker</a>
            </h3>
          </div>
        </div>
        <hr>
        <p><i class="iconfont icon-write"></i>??????DS??OIER???????????</p>
      </section>
    </main><!-- #main -->
  </div><!-- #primary -->
</div>

<script>
  var spoiler=document.getElementsByClassName('spoiler');
  for(var i=0;i<spoiler.length;++i)
  spoiler[i].onclick=function(){this.classList.toggle("revealed");};
  </script>  


  <script type="text/javascript" src="https://cdn.bootcss.com/mathjax/2.7.6/latest.js?config=TeX-MML-AM_CHTML"></script>
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
  </script>

    </div>    
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="请输入关键词..."/>
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            // PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
    <!-- <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 BoringHacker<br>
      powered_by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer> -->
<footer id="colophon" class="site-footer" role="contentinfo">
  <div class="site-info">
    <div class="footertext">
      <div class="img-preload">
        <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/wordpress-rotating-ball-o.svg">
        <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/disqus-preloader.svg">
      </div>
      <p style="color: #666666;">&copy 2018</p>
    </div>
    <div class="footer-device">
    <p style="font-family: 'Ubuntu', sans-serif;">
        <span style="color: #b9b9b9;">Theme <a href="https://github.com/honjun/hexo-theme-sakura" target="_blank" style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Sakura</a> <i class="iconfont icon-sakura rotating" style="color: #ffc0cb;display:inline-block"></i> by <a href="https://2heng.xin/" target="_blank" style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Mashiro</a>&<a href="https://www.hojun.cn/" target="_blank" style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Hojun</a>, Powered by Hexo, Hosted by Coding Pages</a>
        </span>
      </p>
    </div>
  </div><!-- .site-info -->
</footer>

<!-- <script src="/js/tocbot.js"></script> -->
<script type="text/javascript" src="/js/lib.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script type="text/javascript" src="/js/InsightSearch.js"></script>
<script type="text/javascript" src="/js/jquery.fancybox.min.js"></script>
<script type="text/javascript" src="/js/zoom.min.js"></script>
<script type="text/javascript" src="/js/sakura-app.js"></script>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<!-- <script src='//unpkg.com/valine@1.3.4/dist/Valine.min.js'></script> -->
<script src="https://cdn.jsdelivr.net/gh/ctz45562/cdn@2.0.2/js/volantis.min.js"></script>
<script src="/js/botui.js"></script>
<!-- 不蒜子 网页计数器 -->
<script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script> -->
<script type="text/javascript">
/* <![CDATA[ */
if (/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
  var Poi = {"pjax":"1","movies":{"url": "https://cdn.jsdelivr.net/gh/honjun/hojun@1.2","name":"Unbroken.mp4","live":"close"},"windowheight":"fixed","codelamp":"close","ajaxurl":"","order":"asc","formpostion":"bottom"};
} else {
  var Poi = {"pjax":"1","movies":{"url": "https://cdn.jsdelivr.net/gh/honjun/hojun@1.2","name":"Unbroken.mp4","live":"open"},"windowheight":"auto","codelamp":"close","ajaxurl":"","order":"asc","formpostion":"bottom"};
}
/* ]]> */

</script>
<script>
$(document).ready(function() {
  if ($(".toc").length > 0 && document.body.clientWidth > 1200) {
    if ($(".pattern-center").length > 0) { //有图的情况
      tocbot.init({
          // Where to render the table of contents.
          tocSelector: '.toc', // 放置目录的容器
          // Where to grab the headings to build the table of contents.
          contentSelector: '.entry-content', // 正文内容所在
          // Which headings to grab inside of the contentSelector element.
          scrollSmooth: true,
          headingSelector: 'h1, h2, h3, h4, h5', // 需要索引的标题级别
          headingsOffset: -400,
          scrollSmoothOffset: -85
      });
    } else {
      tocbot.init({
          // Where to render the table of contents.
          tocSelector: '.toc', // 放置目录的容器
          // Where to grab the headings to build the table of contents.
          contentSelector: '.entry-content', // 正文内容所在
          // Which headings to grab inside of the contentSelector element.
          scrollSmooth: true,
          headingSelector: 'h1, h2, h3, h4, h5', // 需要索引的标题级别
          headingsOffset: -85,
          scrollSmoothOffset: -85
      });
    }
    var offsetTop = $('.toc').offset().top - 95;
    window.onscroll = function() {
      var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;
      if (scrollTop >= offsetTop) {
        $('.toc').addClass('toc-fixed');
      } else {
        $('.toc').removeClass('toc-fixed');
      }
    }
  }
});
</script>

    <div class="openNav no-select" style="height: 50px;">
      <div class="iconflat no-select" style="width: 50px; height: 50px;">
        <div class="icon"></div>
      </div>
      <div class="site-branding search-form-submit">
        <i class="iconfont js-toggle-search iconsearch icon-search"></i>
      </div>
    </div>
  </section>
  <!-- <div id="mo-nav" class="">
  <div class="m-avatar">
    <img src="https://cdn.jsdelivr.net/gh/BoringHacker/cdn/images/icons/avatar.png">
  </div>
  <p style="text-align: center; color: #333; font-weight: 900; font-family: 'Ubuntu', sans-serif; letter-spacing: 1.5px">BoringHacker'sBlog</p>
  <p style="text-align: center; word-spacing: 20px;">
    
      
        <a href="http://github.com/honjun" class="fa fa-github" target="_blank" style="color: #333; margin-left:20px"></a>
      
        <a href="http://weibo.com/mashirozx?is_all=1" class="fa fa-weibo" target="_blank" style="color: #dd4b39; margin-left:20px"></a>
      
        <a href="https://wpa.qq.com/msgrd?v=3&uin=954655431&site=qq&menu=yes" class="fa fa-qq" target="_blank" style="color: #25c6fe; margin-left:20px"></a>
      
    
  </p>
  <ul id="menu-new-1" class="menu">
    
      <li>
        <a href="/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-fort-awesome faa-shake" aria-hidden="true"></i>
            Home
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/archives">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-archive faa-shake" aria-hidden="true"></i>
            Archives
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/bangumi/">
                  <i class="fa fa-film faa-vertical" aria-hidden="true"></i>
                  Animes
                </a>
              </li>
            
              <li>
                <a href="/Tools/">
                  <i class="fa fa-cogs" aria-hidden="true"></i>
                  Tools
                </a>
              </li>
            
              <li>
                <a href="/categories/Note/">
                  <i class="fa fa-book" aria-hidden="true"></i>
                  Notes
                </a>
              </li>
            
              <li>
                <a href="/categories/Solution">
                  <i class="fa fa-code" aria-hidden="true"></i>
                  Solution
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="/tags/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-tags" aria-hidden="true"></i>
            Tags
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/comment/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-pencil-square-o faa-tada" aria-hidden="true"></i>
            Comments
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/links/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-link faa-shake" aria-hidden="true"></i>
            Links
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/game/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-gamepad" aria-hidden="true"></i>
            Game
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-leaf faa-wrench" aria-hidden="true"></i>
            About
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/about/">
                  <i class="fa fa-meetup" aria-hidden="true"></i>
                  Me
                </a>
              </li>
            
              <li>
                <a href="/lab/">
                  <i class="fa fa-bath" aria-hidden="true"></i>
                  Blog
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="/atom.xml">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-rss faa-pulse" aria-hidden="true"></i>
            RSS
          </span>
        </a>
        
      </li>
    
  </ul>
  <p style="text-align: center; font-size: 13px; color: #b9b9b9;">&copy 2019 hexo-sakura</p>
</div>
<button onclick="topFunction()" class="mobile-cd-top" id="moblieGoTop" title="Go to top" style="display: none;"><i class="fa fa-chevron-up" aria-hidden="true"></i></button>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
<script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>
<!-- require MetingJS -->
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>
<style>
  .aplayer .aplayer-lrc {
    height: 35px;
  }
  .aplayer .aplayer-lrc p{
    font-size: 16px;
    font-weight: 700;
    line-height: 18px !important;
  }
  .aplayer .aplayer-lrc p.aplayer-lrc-current{
    color: #FF1493;
  }
  .aplayer.aplayer-narrow .aplayer-body{
    left: -66px !important;
  }
  .aplayer.aplayer-fixed .aplayer-lrc {
    display: none;
  }
  .aplayer .aplayer-lrc.aplayer-lrc-hide {
      display:none !important;
  }
  .aplayer.aplayer-fixed .lrc-show {
    display: block;
    background: rgba(255, 255, 255, 0.8);
  }
</style>
<meting-js

    id="2660651585"

    server="netease"

    type="playlist"

    fixed="true"

    autoplay="false"

    loop="all"

    order="random"

    preload="auto"

    volume="0.7"

    mutex="true"

</meting-js>
<script>
  $(function(){
    $('body').on('click', '.aplayer', function(){
      if($('.aplayer-button').hasClass('aplayer-play')) {
        $('.aplayer-lrc').removeClass('lrc-show');
      } else {
        $('.aplayer-lrc').addClass('lrc-show');
      }
    })
  });
</script> -->
</body>
</html>