{"meta":{"title":"BoringHacker's Blog","subtitle":"Stay Hungry, Stay Foolish","description":null,"author":"BoringHacker","url":"www.orchid-any.cf"},"pages":[{"title":"Comments","date":"2020-01-17T07:04:09.000Z","updated":"2020-01-17T07:05:20.286Z","comments":true,"path":"Comments/index.html","permalink":"www.orchid-any.cf/Comments/index.html","excerpt":"","text":"éšä¾¿è¯´ç‚¹ä»€ä¹ˆå§(è®°å¾—æ”¹æ˜µç§°)233â€¦"},{"title":"bangumi","date":"2019-02-10T13:32:48.000Z","updated":"2020-02-06T09:29:20.533Z","comments":false,"path":"bangumi/index.html","permalink":"www.orchid-any.cf/bangumi/index.html","excerpt":"","text":"","keywords":null},{"title":"Havefun","date":"2019-12-21T13:04:04.000Z","updated":"2020-01-15T08:32:06.232Z","comments":true,"path":"Havefun/index.html","permalink":"www.orchid-any.cf/Havefun/index.html","excerpt":"","text":""},{"title":"about","date":"2018-12-12T14:14:36.000Z","updated":"2020-02-05T10:53:40.037Z","comments":false,"path":"about/index.html","permalink":"www.orchid-any.cf/about/index.html","excerpt":"","text":"BoringHacker ä¸&nbsp; BoringHacker&nbsp; ï¼ˆ BoringHacker ï¼‰ å¯¹è¯ä¸­... bot_ui_ini()","keywords":"å…³äº"},{"title":"client","date":"2018-12-20T15:13:35.000Z","updated":"2019-11-15T17:29:48.000Z","comments":false,"path":"client/index.html","permalink":"www.orchid-any.cf/client/index.html","excerpt":"","text":"ç›´æ¥ä¸‹è½½ or æ‰«ç ä¸‹è½½ï¼š","keywords":"Androidå®¢æˆ·ç«¯"},{"title":"comment","date":"2018-12-20T15:13:48.000Z","updated":"2020-02-05T10:46:24.855Z","comments":true,"path":"comment/index.html","permalink":"www.orchid-any.cf/comment/index.html","excerpt":"","text":"å¿µä¸¤å¥è¯ äººæ¸£çš„æœ¬æ„¿ï¼Œè‹è”çš„è§£ä½“ã€‚ ã€ç°ä»£ã€‘noipæ¯’ç˜¤ã€Šæ´›è°·Â·ä¸ªäººä¸»é¡µã€‹","keywords":"ç•™è¨€æ¿"},{"title":"donate","date":"2018-12-20T15:13:05.000Z","updated":"2019-11-15T17:29:48.000Z","comments":false,"path":"donate/index.html","permalink":"www.orchid-any.cf/donate/index.html","excerpt":"","text":"","keywords":"è°¢è°¢é¥²ä¸»äº†å–µ~"},{"title":"lab","date":"2019-01-05T13:47:59.000Z","updated":"2019-11-15T17:29:48.000Z","comments":false,"path":"lab/index.html","permalink":"www.orchid-any.cf/lab/index.html","excerpt":"","text":"sakuraä¸»é¢˜balabala","keywords":"Labå®éªŒå®¤"},{"title":"music","date":"2018-12-20T15:14:28.000Z","updated":"2019-11-15T17:29:48.000Z","comments":false,"path":"music/index.html","permalink":"www.orchid-any.cf/music/index.html","excerpt":"","text":"","keywords":"å–œæ¬¢çš„éŸ³ä¹"},{"title":"links","date":"2018-12-19T15:11:06.000Z","updated":"2020-02-06T05:21:26.670Z","comments":true,"path":"links/index.html","permalink":"www.orchid-any.cf/links/index.html","excerpt":"","text":"","keywords":"å‹äººå¸"},{"title":"rss","date":"2018-12-20T15:09:03.000Z","updated":"2019-11-15T17:29:48.000Z","comments":true,"path":"rss/index.html","permalink":"www.orchid-any.cf/rss/index.html","excerpt":"","text":""},{"title":"tags","date":"2018-12-12T14:14:16.000Z","updated":"2019-11-15T17:29:48.000Z","comments":true,"path":"tags/index.html","permalink":"www.orchid-any.cf/tags/index.html","excerpt":"","text":""},{"title":"Game","date":"2020-02-05T11:21:36.000Z","updated":"2020-02-05T13:10:04.895Z","comments":false,"path":"game/index.html","permalink":"www.orchid-any.cf/game/index.html","excerpt":"","text":"2048","keywords":null},{"title":"video","date":"2018-12-20T15:14:38.000Z","updated":"2019-11-15T17:29:48.000Z","comments":false,"path":"video/index.html","permalink":"www.orchid-any.cf/video/index.html","excerpt":"","text":"var videos = [ { img: 'https://lain.bgm.tv/pic/cover/l/0e/1e/218971_2y351.jpg', title: 'æœèŠ±å¤•èª“â€”â€”äºç¦»åˆ«ä¹‹æœæŸèµ·çº¦å®šä¹‹èŠ±', status: 'å·²è¿½å®Œ', progress: 100, jp: 'ã•ã‚ˆãªã‚‰ã®æœã«ç´„æŸã®èŠ±ã‚’ã‹ã–ã‚ã†', time: 'æ”¾é€æ—¶é—´: 2018-02-24 SUN.', desc: ' ä½åœ¨è¿œç¦»å°˜åš£çš„åœŸåœ°ï¼Œä¸€è¾¹å°†æ¯å¤©çš„äº‹æƒ…ç¼–ç»‡æˆåä¸ºå¸Œæ¯”æ¬§çš„å¸ƒï¼Œä¸€è¾¹é™é™ç”Ÿæ´»çš„ä¼Šæ¬§å¤«äººæ°‘ã€‚åœ¨15å²å·¦å³å¤–è¡¨å°±åœæ­¢æˆé•¿ï¼Œæ‹¥æœ‰æ•°ç™¾å¹´å¯¿å‘½çš„ä»–ä»¬ï¼Œè¢«ç§°ä¸ºâ€œç¦»åˆ«çš„ä¸€æ—â€ï¼Œå¹¶è¢«è§†ä¸ºæ´»ç€çš„ä¼ è¯´ã€‚æ²¡æœ‰åŒäº²çš„ä¼Šæ¬§å¤«å°‘å¥³ç›å¥‡äºšï¼Œè¿‡ç€è¢«ä¼™ä¼´åŒ…å›´çš„å¹³ç¨³æ—¥å­ï¼Œå´æ€»æ„Ÿè§‰â€œå­¤èº«ä¸€äººâ€ã€‚ä»–ä»¬çš„è¿™ç§æ—¥å¸¸ï¼Œä¸€ç¬é—´å°±å´©æºƒæ¶ˆå¤±ã€‚è¿½æ±‚ä¼Šæ¬§å¤«çš„é•¿å¯¿ä¹‹è¡€ï¼Œæ¢…è¨è’‚å†›ä¹˜åç€åä¸ºé›·çº³ç‰¹çš„å¤ä»£å…½å‘åŠ¨äº†è¿›æ”»ã€‚åœ¨ç»æœ›ä¸æ··ä¹±ä¹‹ä¸­ï¼Œä¼Šæ¬§å¤«çš„ç¬¬ä¸€ç¾å¥³è•¾è‰äºšè¢«æ¢…è¨è’‚å¸¦èµ°ï¼Œè€Œç›å¥‡äºšæš—æ‹çš„å°‘å¹´å…‹é‡Œå§†ä¹Ÿå¤±è¸ªäº†ã€‚ç›å¥‡äºšè™½ç„¶æ€»ç®—é€ƒè„±äº†ï¼Œå´å¤±å»äº†ä¼™ä¼´å’Œå½’å»ä¹‹åœ°â€¦â€¦ã€‚' }, { img : 'https://lain.bgm.tv/pic/cover/l/0e/1e/218971_2y351.jpg', title: 'æœèŠ±å¤•èª“â€”â€”äºç¦»åˆ«ä¹‹æœæŸèµ·çº¦å®šä¹‹èŠ±', status: 'å·²è¿½å®Œ', progress: 100, jp: 'ã•ã‚ˆãªã‚‰ã®æœã«ç´„æŸã®èŠ±ã‚’ã‹ã–ã‚ã†', time: '2018-02-24 SUN.', desc: ' ä½åœ¨è¿œç¦»å°˜åš£çš„åœŸåœ°ï¼Œä¸€è¾¹å°†æ¯å¤©çš„äº‹æƒ…ç¼–ç»‡æˆåä¸ºå¸Œæ¯”æ¬§çš„å¸ƒï¼Œä¸€è¾¹é™é™ç”Ÿæ´»çš„ä¼Šæ¬§å¤«äººæ°‘ã€‚åœ¨15å²å·¦å³å¤–è¡¨å°±åœæ­¢æˆé•¿ï¼Œæ‹¥æœ‰æ•°ç™¾å¹´å¯¿å‘½çš„ä»–ä»¬ï¼Œè¢«ç§°ä¸ºâ€œç¦»åˆ«çš„ä¸€æ—â€ï¼Œå¹¶è¢«è§†ä¸ºæ´»ç€çš„ä¼ è¯´ã€‚æ²¡æœ‰åŒäº²çš„ä¼Šæ¬§å¤«å°‘å¥³ç›å¥‡äºšï¼Œè¿‡ç€è¢«ä¼™ä¼´åŒ…å›´çš„å¹³ç¨³æ—¥å­ï¼Œå´æ€»æ„Ÿè§‰â€œå­¤èº«ä¸€äººâ€ã€‚ä»–ä»¬çš„è¿™ç§æ—¥å¸¸ï¼Œä¸€ç¬é—´å°±å´©æºƒæ¶ˆå¤±ã€‚è¿½æ±‚ä¼Šæ¬§å¤«çš„é•¿å¯¿ä¹‹è¡€ï¼Œæ¢…è¨è’‚å†›ä¹˜åç€åä¸ºé›·çº³ç‰¹çš„å¤ä»£å…½å‘åŠ¨äº†è¿›æ”»ã€‚åœ¨ç»æœ›ä¸æ··ä¹±ä¹‹ä¸­ï¼Œä¼Šæ¬§å¤«çš„ç¬¬ä¸€ç¾å¥³è•¾è‰äºšè¢«æ¢…è¨è’‚å¸¦èµ°ï¼Œè€Œç›å¥‡äºšæš—æ‹çš„å°‘å¹´å…‹é‡Œå§†ä¹Ÿå¤±è¸ªäº†ã€‚ç›å¥‡äºšè™½ç„¶æ€»ç®—é€ƒè„±äº†ï¼Œå´å¤±å»äº†ä¼™ä¼´å’Œå½’å»ä¹‹åœ°â€¦â€¦ã€‚' } ] .should-ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:95%;}.should-ellipsis-full{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%;}.should-ellipsis i{position:absolute;right:24px;}.grey-text{color:#9e9e9e !important}.grey-text.text-darken-4{color:#212121 !important}html{line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}img{border-style:none}progress{display:inline-block;vertical-align:baseline}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{-webkit-box-sizing:border-box;box-sizing:border-box}*,*:before,*:after{-webkit-box-sizing:inherit;box-sizing:inherit}ul:not(.browser-default){padding-left:0;list-style-type:none}ul:not(.browser-default)>li{list-style-type:none}.card{-webkit-box-shadow:0 2px 2px 0 rgba(0,0,0,0.14),0 3px 1px -2px rgba(0,0,0,0.12),0 1px 5px 0 rgba(0,0,0,0.2);box-shadow:0 2px 2px 0 rgba(0,0,0,0.14),0 3px 1px -2px rgba(0,0,0,0.12),0 1px 5px 0 rgba(0,0,0,0.2)}.hoverable{-webkit-transition:-webkit-box-shadow .25s;transition:-webkit-box-shadow .25s;transition:box-shadow .25s;transition:box-shadow .25s,-webkit-box-shadow .25s}.hoverable:hover{-webkit-box-shadow:0 8px 17px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);box-shadow:0 8px 17px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19)}i{line-height:inherit}i.right{float:right;margin-left:15px}.bangumi .right{float:right !important}.material-icons{text-rendering:optimizeLegibility;-webkit-font-feature-settings:'liga';-moz-font-feature-settings:'liga';font-feature-settings:'liga'}.row{margin-left:auto;margin-right:auto;margin-bottom:20px}.row:after{content:\"\";display:table;clear:both}.row .col{float:left;-webkit-box-sizing:border-box;box-sizing:border-box;padding:0 .75rem;min-height:1px}.row .col.s12{width:100%;margin-left:auto;left:auto;right:auto}@media only screen and (min-width:601px){.row .col.m6{width:50%;margin-left:auto;left:auto;right:auto}}html{line-height:1.5;font-family:-apple-system,BlinkMacSystemFont,\"Segoe UI\",Roboto,Oxygen-Sans,Ubuntu,Cantarell,\"Helvetica Neue\",sans-serif;font-weight:normal;color:rgba(0,0,0,0.87)}@media only screen and (min-width:0){html{font-size:14px}}@media only screen and (min-width:992px){html{font-size:14.5px}}@media only screen and (min-width:1200px){html{font-size:15px}}.card{position:relative;margin:.5rem 0 1rem 0;background-color:#fff;-webkit-transition:-webkit-box-shadow .25s;transition:-webkit-box-shadow .25s;transition:box-shadow .25s;transition:box-shadow .25s,-webkit-box-shadow .25s;border-radius:2px}.card .card-title{font-size:24px;font-weight:300}.card .card-title.activator{cursor:pointer}.card .card-image{position:relative}.card .card-image img{display:block;border-radius:2px 2px 0 0;position:relative;left:0;right:0;top:0;bottom:0;width:100%}.card .card-content{padding:24px;border-radius:0 0 2px 2px}.card .card-content p{margin:0}.card .card-content .card-title{display:block;line-height:32px;margin-bottom:8px}.card .card-content .card-title i{line-height:32px}.card .card-reveal{padding:24px;position:absolute;background-color:#fff;width:100%;overflow-y:auto;left:0;top:100%;height:100%;z-index:3;display:none}.card .card-reveal .card-title{cursor:pointer;display:block}.waves-effect{position:relative;cursor:pointer;display:inline-block;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent;vertical-align:middle;z-index:1;-webkit-transition:.3s ease-out;transition:.3s ease-out}.waves-effect img{position:relative;z-index:-1}.waves-block{display:block}::-webkit-input-placeholder{color:#d1d1d1}::-moz-placeholder{color:#d1d1d1}:-ms-input-placeholder{color:#d1d1d1}::-ms-input-placeholder{color:#d1d1d1}[type=\"radio\"]:not(:checked){position:absolute;opacity:0;pointer-events:none}[type=\"radio\"]:not(:checked)+span{position:relative;padding-left:35px;cursor:pointer;display:inline-block;height:25px;line-height:25px;font-size:1rem;-webkit-transition:.28s ease;transition:.28s ease;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}[type=\"radio\"]:not(:checked)+span:before,[type=\"radio\"]:not(:checked)+span:after{border-radius:50%}[type=\"radio\"]:not(:checked)+span:before,[type=\"radio\"]:not(:checked)+span:after{border:2px solid #5a5a5a}[type=\"radio\"]:not(:checked)+span:after{-webkit-transform:scale(0);transform:scale(0)}[type=\"checkbox\"]:not(:checked){position:absolute;opacity:0;pointer-events:none}[type=\"checkbox\"]:not(:checked):disabled+span:not(.lever):before{border:none;background-color:rgba(0,0,0,0.42)}[type=\"checkbox\"].filled-in:not(:checked)+span:not(.lever):before{width:0;height:0;border:3px solid transparent;left:6px;top:10px;-webkit-transform:rotateZ(37deg);transform:rotateZ(37deg);-webkit-transform-origin:100% 100%;transform-origin:100% 100%}[type=\"checkbox\"].filled-in:not(:checked)+span:not(.lever):after{height:20px;width:20px;background-color:transparent;border:2px solid #5a5a5a;top:0px;z-index:0}input[type=checkbox]:not(:disabled) ~ .lever:active:before,input[type=checkbox]:not(:disabled).tabbed:focus ~ .lever::before{-webkit-transform:scale(2.4);transform:scale(2.4);background-color:rgba(0,0,0,0.08)}input[type=range].focused:focus:not(.active)::-webkit-slider-thumb{-webkit-box-shadow:0 0 0 10px rgba(38,166,154,0.26);box-shadow:0 0 0 10px rgba(38,166,154,0.26)}input[type=range].focused:focus:not(.active)::-moz-range-thumb{box-shadow:0 0 0 10px rgba(38,166,154,0.26)}input[type=range].focused:focus:not(.active)::-ms-thumb{box-shadow:0 0 0 10px rgba(38,166,154,0.26)} ç•ªç»„è®¡åˆ’ è¿™é‡Œå°†æ˜¯æ°¸è¿œçš„å›å¿† window.onload = function(){ videos.forEach(function(video, i){ $('#rootRow').append(` ${video.title} ${video.jp} ${video.status} ${video.title} ${video.jp} æ”¾é€æ—¶é—´: ${video.time} ${video.desc} ${video.status} `) }) }","keywords":"Bç«™"},{"title":"theme-sakura","date":"2019-01-04T14:53:25.000Z","updated":"2019-11-15T17:29:48.000Z","comments":false,"path":"theme-sakura/index.html","permalink":"www.orchid-any.cf/theme-sakura/index.html","excerpt":"","text":"Hexoä¸»é¢˜Sakuraä¿®æ”¹è‡ªWordPressä¸»é¢˜Sakuraï¼Œæ„Ÿè°¢åŸä½œè€…Mashiro","keywords":"Hexo ä¸»é¢˜ Sakura ğŸŒ¸"}],"posts":[{"title":"SQRT-TREE","slug":"DS100P-SQRT-TREE","date":"2020-02-07T10:49:19.000Z","updated":"2020-02-07T10:49:19.126Z","comments":true,"path":"2020/02/07/DS100P-SQRT-TREE/","link":"","permalink":"www.orchid-any.cf/2020/02/07/DS100P-SQRT-TREE/","excerpt":"","text":"","categories":[],"tags":[],"keywords":[]},{"title":"BLOCK-ARRAY","slug":"DS100P-BLOCK-ARRAY","date":"2020-02-07T10:48:41.000Z","updated":"2020-02-07T10:48:41.197Z","comments":true,"path":"2020/02/07/DS100P-BLOCK-ARRAY/","link":"","permalink":"www.orchid-any.cf/2020/02/07/DS100P-BLOCK-ARRAY/","excerpt":"","text":"","categories":[],"tags":[],"keywords":[]},{"title":"BLOCK-LIST","slug":"DS100P-BLOCK-LIST","date":"2020-02-07T10:48:26.000Z","updated":"2020-02-07T10:48:26.214Z","comments":true,"path":"2020/02/07/DS100P-BLOCK-LIST/","link":"","permalink":"www.orchid-any.cf/2020/02/07/DS100P-BLOCK-LIST/","excerpt":"","text":"","categories":[],"tags":[],"keywords":[]},{"title":"DS100P-TREE-FENKUAI","slug":"DS100P-TREE-FENKUAI","date":"2020-02-07T10:43:01.000Z","updated":"2020-02-07T10:47:33.462Z","comments":true,"path":"2020/02/07/DS100P-TREE-FENKUAI/","link":"","permalink":"www.orchid-any.cf/2020/02/07/DS100P-TREE-FENKUAI/","excerpt":"","text":"","categories":[],"tags":[],"keywords":[]},{"title":"æ•°æ®ç»“æ„100é¢˜ ---åç¼€å…¨å®¶æ¡¶ ä¹‹ åç¼€è‡ªåŠ¨æœº","slug":"DS100P-SUFFIX-AUTOMATON","date":"2020-02-07T10:14:33.000Z","updated":"2020-02-07T10:46:58.918Z","comments":true,"path":"2020/02/07/DS100P-SUFFIX-AUTOMATON/","link":"","permalink":"www.orchid-any.cf/2020/02/07/DS100P-SUFFIX-AUTOMATON/","excerpt":"","text":"","categories":[],"tags":[],"keywords":[]},{"title":"æ•°æ®ç»“æ„100é¢˜ ---åç¼€å…¨å®¶æ¡¶ ä¹‹ åç¼€æ ‘","slug":"DS100P-SUFFIX-TREE","date":"2020-02-07T10:14:14.000Z","updated":"2020-02-07T10:47:20.870Z","comments":true,"path":"2020/02/07/DS100P-SUFFIX-TREE/","link":"","permalink":"www.orchid-any.cf/2020/02/07/DS100P-SUFFIX-TREE/","excerpt":"","text":"","categories":[],"tags":[],"keywords":[]},{"title":"æ•°æ®ç»“æ„100é¢˜ ---æ ‘çŠ¶æ•°ç»„","slug":"DS100P-BINARY-INDEXED-TREE","date":"2020-02-05T06:51:04.000Z","updated":"2020-02-06T02:34:14.511Z","comments":true,"path":"2020/02/05/DS100P-BINARY-INDEXED-TREE/","link":"","permalink":"www.orchid-any.cf/2020/02/05/DS100P-BINARY-INDEXED-TREE/","excerpt":"","text":"æ ‘çŠ¶æ•°ç»„($nlogn$) æ ‘çŠ¶æ•°ç»„æ˜¯ä¸€ç§å¸¸æ•°è¾ƒå°çš„ï¼Œèƒ½å¤Ÿå®ç°åŒºé—´åŠ æ³•ï¼ŒåŒºé—´æŸ¥è¯¢çš„æ•°æ®ç»“æ„ã€‚ å…¶ä¸­æœ€ç„å¦™çš„æ“ä½œå°±æ˜¯$lowbit$äº†,å®ƒæ˜¯ä½¿æ ‘çŠ¶æ•°ç»„å¸¸æ•°è¿›ä¸€æ­¥ç¼©å°çš„åŠŸè‡£ã€‚ 1).lowbitè¿™ä¸ªæ“ä½œç”¨æ¥æ‰¾åˆ°$x$ä»å³å¾€å·¦æ•°çš„ç¬¬ä¸€ä¸ªä¸º1çš„ä½ã€‚ å…ˆçœ‹ä¸€çœ‹è¿™ä¸ªæ“ä½œçš„å®ç°å§ï¼š$lowbit(x)=(x$&amp;$(-x))$ ($x$ä¸€èˆ¬ä¸ºæ­£æ•´æ•°) è¯´å®ƒå¾ˆç„å¦™æ˜¯å› ä¸ºå®ƒå¾ˆçŸ­ï¼Œä½†å¾ˆæœ‰æ•ˆï¼›å®ƒå……åˆ†åœ°åˆ©ç”¨äº†ä½è¿ç®—çš„é«˜æ•ˆã€‚ ä½†æˆ‘ä»¬è¦ç†è§£å®ƒçš„åŸç†ã€‚ ä½è¿ç®—å˜›ï¼Œæˆ‘ä»¬å…ˆæŠŠxè½¬åŒ–æˆ2è¿›åˆ¶è¡¥ç ã€‚é‚£ä¹ˆxæ˜¯æ­£æ•´æ•°ï¼Œå®ƒçš„äºŒè¿›åˆ¶è¡¥ç å°±æ˜¯ä»–è‡ªèº«ï¼Œä¸”å…¶ä¸­è‚¯å®šæœ‰ä¸€ä¸ª1ã€‚ $-x$çš„äºŒè¿›åˆ¶è¡¨ç¤ºåˆ™æ˜¯å®ƒçš„äºŒè¿›åˆ¶è¡¨ç¤ºçš„åç +1ï¼›å³æŠŠé™¤ç¬¦å·ä½å¤–çš„æ‰€æœ‰ä½å–åï¼Œå†$+1$ã€‚ æˆ‘ä»¬æŠŠè¿™ä¸¤ä¸ªæ­¥éª¤åˆ†å¼€ï¼Œå…ˆæŠŠæ‰€æœ‰ä½å–åï¼Œæ­¤æ—¶xä¸å®ƒä¸èµ·æ¥ç­‰äº0ã€‚å†$+1$ï¼Œå°±ä¼šä½¿ä»å³å¾€å·¦æ•°ç¬¬ä¸€ä¸ªä¸ºé›¶çš„ä½å˜ä¸º1ï¼šå› ä¸ºå¦‚æœç¬¬ä¸€ä½æ˜¯0ï¼Œé‚£ä¹ˆè¿™ä½å°±ä¼šå˜æˆ1ï¼›å¦åˆ™å°±ä¼šå¾€å‰è¿›1ä½ï¼Œç»è¿‡é€’å½’ï¼Œå°±èƒ½ä½¿ä»å³å¾€å·¦æ•°ç¬¬ä¸€ä¸ªä¸ºé›¶çš„ä½å˜ä¸º1ã€‚ ä»å³å¾€å·¦æ•°ç¬¬ä¸€ä¸ªä¸ºé›¶çš„ä½çš„å·¦è¾¹çš„æ•°æ²¡æœ‰è¢«æ”¹å˜è¿‡ï¼Œæ‰€ä»¥ä¸èµ·æ¥ä¾ç„¶æ˜¯0ï¼›å³è¾¹çš„æ•°ç»è¿‡è¿›ä½éƒ½å˜æˆäº†0ï¼Œä¸ç®¡æ€æ ·ä¸éƒ½æ˜¯0ã€‚è€Œè¿™ä¸€ä½æœ¬èº«ç°åœ¨æ˜¯1ï¼ŒåŸæ¥æ˜¯0ï¼Œè¯´æ˜è¿™ä¸€ä½åŸæ¥æ˜¯1ï¼Œä¸èµ·æ¥å°±æ˜¯1ã€‚è€Œè¿™ä¸€ä½æ˜¯ç¬¬ä¸€ä¸ªä¸º0çš„ä½ï¼Œé‚£ä¹ˆå®ƒåŸæ¥å°±æ˜¯ç¬¬ä¸€ä¸ªä¸º1çš„ä½ã€‚ 2).å•ç‚¹ä¿®æ”¹é¦–å…ˆæˆ‘ä»¬å®šä¹‰ä¸€ä¸ª$nodes$æ•°ç»„ã€‚ $nodes[i]$å‚¨å­˜$a[i-lowbit(i)+1]$åˆ°$a[i]$çš„å’Œã€‚ é‚£ä¹ˆå¦‚æœæˆ‘ä»¬ç»™$a[i]$åŠ ä¸Šäº†$x$,é‚£ä¹ˆ$nodes[i]$è‚¯å®šåŒ…æ‹¬$a[i]$ï¼Œä¹Ÿè¦åŠ ä¸Š$x$; $lowbit(i+lowbit(i))$çš„å€¼è‚¯å®šå¤§äº$lowbit(i)$,æ‰€ä»¥$nodes[i+lowbit(i)]$ä¹Ÿè¦åŠ ä¸Š$x$; å†ç»§ç»­é€’å½’ä¸‹å»ï¼Œä¸€ç›´åˆ°æ•°ç»„çš„è¾¹ç•Œä¸ºæ­¢ã€‚ é‚£å¦‚ä½•è¯´æ˜$nodes[i+lowbit(i)]$å°±æ˜¯ç¬¬ä¸€ä¸ªåŒ…å«$nodes[i]$çš„æ•°å‘¢ï¼Ÿ æˆ‘ä»¬æŒ‰ç…§$lowbit(i)$æŠŠ$nodes[MAXN]$åˆ†ä¸º$log(MAXN)$å±‚ï¼Œé‚£ä¹ˆä¸å¯èƒ½æœ‰åŒå±‚åŠä¸‹å±‚èŠ‚ç‚¹åŒ…å«$nodes[i]$ï¼Œé™¤äº†å®ƒè‡ªå·±ã€‚ æ‰€ä»¥æˆ‘ä»¬å‘ä¸Šå±‚èŠ‚ç‚¹å¯»æ‰¾ï¼Œå°±è¦æŠŠ$lowbit(i)$è¿™ä¸€ä½æ¶ˆæ‰ä¸”æ•°å­—è¦å¢å¤§ï¼Œç›´æ¥åŠ ä¸Š$lowbit(i)$å°±å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œå› ä¸º$lowbit(i)$è¿™ä¸€ä½å¾€å³éƒ½æ˜¯0ï¼Œè¦æŠŠè¿™ä¸€ä½æ¶ˆæ‰ï¼Œéœ€è¦åŠ ä¸Šçš„æ•°ä¸­æ²¡æœ‰æ¯”$lowbit(i)$æ›´å°çš„ã€‚ æ‰€ä»¥$nodes[i+lowbit(i)]$å°±æ˜¯ç¬¬ä¸€ä¸ªåŒ…å«$nodes[i]$çš„æ•°ã€‚ ä»£ç  void update(int x,int val) { while(x&lt;=MAXN) { nodes[x]+=val; x+=lowbit(x); } } 3).åŒºé—´æŸ¥è¯¢ï¼ˆå•ç‚¹ä¿®æ”¹ï¼‰å¦‚æœæˆ‘ä»¬è¦æŸ¥è¯¢åŒºé—´$[l,r]$çš„å’Œï¼Œæˆ‘ä»¬å¯ä»¥è¿ç”¨å‰ç¼€å’Œæ€æƒ³ï¼ŒæŠŠå®ƒè½¬æ¢æˆæ±‚$[1,r]-[1,l-1]$çš„å€¼ã€‚ é‚£ä¹ˆé—®é¢˜è½¬åŒ–æˆäº†æ±‚åŒºé—´$[1,x]$çš„å’Œã€‚ ç”±äºå®šä¹‰ï¼Œ$nodes[x]$å‚¨å­˜çš„æ˜¯$a[x-lowbit(x)+1]$åˆ°$a[x]$çš„å’Œï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥ç¼©å°é—®é¢˜è§„æ¨¡ï¼š$query[1,x]=query[1,x-lowbit(x)]+nodes[x]$,ä¸€ç›´åˆ°0ä¸ºæ­¢ã€‚ ä»£ç  int ask(int x) { int res=0; while(x) { res+=nodes[x]; x-=lowbit(x); } return res; } int query(int l,int r) { return ask(r)-ask(l-1); } 4).åŒºé—´ä¿®æ”¹åŠæŸ¥è¯¢ä¸Šé¢çš„æ“ä½œåªæ”¯æŒå•ç‚¹ä¿®æ”¹ï¼Œé‚£ä¹ˆå¦‚ä½•åŒºé—´ä¿®æ”¹å‘¢ï¼Œä¸€ä¸ªä¸€ä¸ªåœ°æ”¹è‚¯å®šä¼šç‚¸ã€‚æˆ‘ä»¬é‡‡ç”¨å·®åˆ†çš„æ€æƒ³ï¼Œå°†åŒºé—´ä¿®æ”¹è½¬åŒ–ä¸ºå•ç‚¹ä¿®æ”¹ã€‚ æˆ‘ä»¬å…ˆæ€è€ƒå¦‚ä½•ç”¨å·®åˆ†æ•°ç»„$c[n]$æ±‚$a[1]+a[2]+\\cdots+a[n-1]+a[n]$ã€‚ $c[1]n+c[2](n-1)+\\cdots+c[n-1]*2+c[n]$ è¿™ä¸ªå¼å­é‡Œçš„c[i]å’Œiæ²¡æœ‰ä»€ä¹ˆå…³ç³»ï¼Œä¸å¤ªå¥½æ“ä½œï¼Œäºæ˜¯æˆ‘ä»¬æŠŠå®ƒå˜ä¸ªå½¢ï¼š $(c[1]+c[2]+\\cdots+c[n-1]+c[n])(n+1)-(c[1]+c[2]2+\\cdots+c[n-1](n-1)+c[n]n)$ è¿™æ ·å°±å¥½ç»´æŠ¤å¤šäº†ï¼šæˆ‘ä»¬åªéœ€è¦å¼€ä¸¤ä¸ªæ ‘çŠ¶æ•°ç»„ç»´æŠ¤$c[1]+c[2]+\\cdots+c[i]$å’Œ$c[1]+c[2]2+\\cdots+c[i]i$($nodes[MAXN]$,$exnodes[MAXN]$) å¯¹äºä¸€ä¸ªåŒºé—´ä¿®æ”¹â€”â€”$[l,r]$åŠ $x$ã€‚ å°†æ‰€æœ‰åŒ…å«$c[l]$çš„$nodes$åŠ $x$,$exnodes$åŠ $lx$($(c[l]+x)l==c[l]l+xl$) å°†æ‰€æœ‰åŒ…å«$c[r+1]$çš„$nodes$å‡$x$,$exnodes$å‡$(r-1)x$($(c[r+1]+x)(r+1)==c[r+1](r+1)+x(r+1)$) å¯¹äºä¸€ä¸ªåŒºé—´è¯¢é—®â€”â€”$[l,r]$ ç­‰ä»·äº$[1,r]-[1,l-1]$ å¯¹äº$[1,x]$ ç”±ä¸Šé¢çš„å¼å­å¾—å‡ºåšæ³•:ä»¥$nodes$æŸ¥è¯¢$(c[1]+c[2]+\\cdots+c[x-1]+c[x])(x+1)$ï¼Œä»¥$exnodes$æŸ¥è¯¢$(c[1]+c[2]2+\\cdots+c[x-1](x-1)+c[x]x)$,å†å°†å®ƒä»¬ç›¸å‡ã€‚ ä»£ç  void update(int x,int val) { while(x&lt;=MAXN) { nodes[x]+=val; x+=lowbit(x); } } void exupdate(int x,int val) { while(x&lt;=MAXN) { exnodes[x]+=val; x+=lowbit(x); } } int find(int x) { int res=0; while(x) { res+=nodes[x]; x-=lowbit(x); } return res; } int exfind(int x) { int res=0; while(x) { res+=exnodes[x]; x-=lowbit(x); } return res; } void modify(int l,int r,int x) { update(l,x); exupdate(l,l*x); update(r+1,-x); exupdate(r+1,-(r+1)*x); } int ask(int x) { return find(x)*(x+1)-exfind(x); } int query(int l,int r) { return ask(r)-ask(l-1); } //(ä¸‹é¢ä¸¤ä¸ªå…ˆå’•äº†ï¼Œæˆ‘æ²¡çœ‹åˆ°å“ªé“é¢˜è¦ç”¨â€¦â€¦) 5).äºŒç»´å•ç‚¹ä¿®æ”¹ï¼ŒåŒºé—´æŸ¥è¯¢6).äºŒç»´åŒºé—´ä¿®æ”¹ï¼ŒåŒºé—´æŸ¥è¯¢","categories":[{"name":"Learning","slug":"Learning","permalink":"www.orchid-any.cf/categories/Learning/"}],"tags":[{"name":"DS100P","slug":"DS100P","permalink":"www.orchid-any.cf/tags/DS100P/"}],"keywords":[{"name":"Learning","slug":"Learning","permalink":"www.orchid-any.cf/categories/Learning/"}]},{"title":"æ•°æ®ç»“æ„100é¢˜ ---Chtholly-Tree(Old-Driver Tree)","slug":"DS100P-CHTHOLLY-TREE","date":"2020-02-05T06:51:04.000Z","updated":"2020-02-06T03:21:46.486Z","comments":true,"path":"2020/02/05/DS100P-CHTHOLLY-TREE/","link":"","permalink":"www.orchid-any.cf/2020/02/05/DS100P-CHTHOLLY-TREE/","excerpt":"","text":"Chtholly-Treeä¼—æ‰€å‘¨çŸ¥ï¼Œæ•°æ®ç»“æ„+ç®—æ³•=ç¨‹åºï¼Œå¯è§æ•°æ®ç»“æ„çš„é‡è¦æ€§æ•°æ®ç»“æ„å äº†æˆ‘ä»¬ç¼–ç¨‹çš„ä¸€å¤§éƒ¨åˆ†ã€‚æ•°æ®ç»“æ„çš„å¤§å®¶æ—ä¸­ï¼Œæœ‰ä¼˜ç¾çš„çº¿æ®µæ ‘ã€æ ‘çŠ¶æ•°ç»„ç­‰ã€‚ä½†æˆ‘ä»¬ä»Šå¤©çš„ä¸»è§’å´ååˆ†æš´åŠ›ã€‚å¥¹çš„åå­—å«ç‚æœµè‰æ ‘ ç‚æœµè‰æ ‘æ˜¯åŸºäºC++STLåº“ä¸­çš„setçš„æ•°æ®ç»“æ„ã€‚ä¸çº¿æ®µæ ‘ã€å¹³è¡¡æ ‘ç­‰æ ‘å½¢ç»“æ„ç±»ä¼¼ï¼Œç‚æœµè‰æ ‘æ˜¯ç”¨æ¥è§£å†³åŒºé—´é—®é¢˜çš„å¾ˆæš´åŠ›çš„æ ‘å½¢ç»“æ„ã€‚ å¥¹çš„ç‰¹ç‚¹æ˜¯èƒ½å¤Ÿè¿›è¡ŒåŒºé—´æ¨å¹³æ“ä½œï¼Œå¹¶ä¸”æ—¶é—´å¤æ‚åº¦æ¥è¿‘O(n log m) ã€‚ä½†å‰ææ˜¯æ•°æ®éšæœºã€‚ä½†ä¸€èˆ¬ä¸ä¼šæœ‰å“ªä¸ªå‡ºé¢˜äººå»å¡è¿™æ ·ä¸€ä¸ªå¹¶ä¸å‡ºåçš„æ•°æ®ç»“æ„ã€‚å¹¶ä¸”è¦æœ‰åŒºé—´æ¨å¹³æ“ä½œï¼Œå¦åˆ™å…‰æ˜¯ä¸€ä¸ªsplitæ—¶é—´å¤æ‚åº¦ä¼šç‚¸ã€‚ ç‚æœµè‰æ ‘çš„æ„é€ é•¿æˆè¿™ä¸ªäºšå­: struct Chtholly { LL L; LL R; //åŒºé—´ mutable LL _val; //å€¼ï¼Œæ³¨æ„ï¼Œå…³é”®å­—mutableæ˜¯å¿…éœ€çš„ï¼Œå¦åˆ™ä¼šåœ¨addå‡½æ•°é‡ŒCE node(LL l, LL r = -1, LL V = 0) : L(l), R(r), _val(V) {} bool operator&lt;(const node &amp;rhs) const { return L &lt; rhs.L; } } Splitæ“ä½œ: inline IT split(int k) { IT it = st.lower_bound(node(k)); if (it != st.end() &amp;&amp; it-&gt;L == k) return it; --it; LL l = it-&gt;L, r = it-&gt;R; LL v = it-&gt;_val; st.erase(it); st.insert(node(l, k - 1, v)); return st.insert(node(k, r, v)).first; } ä¸ºäº†æ“ä½œæ–¹ä¾¿æˆ‘ä»¬è¿™é‡Œæœ‰ä¸€ä¸ªdefine: #define IT set&lt;Chtholly&gt;::iterator assignåŒºé—´æ¨å¹³æ“ä½œï¼Œè¿™ä¹Ÿæ˜¯ç‚æœµè‰æ ‘çš„æ—¶é—´å¤æ‚åº¦ä¿è¯ inline void assign(LL ll, LL rr, LL val) { IT itr = split(rr + 1), itl = split(ll); st.erase(itl, itr); st.insert(node(ll, rr, val)); } ä¸¾å‡ ä¸ªä¾‹å­å§ åŒºé—´æ±‚å’Œ:inline LL Qsum(LL ll, LL rr) { LL res = 0; IT itr = split(rr + 1), itl = split(ll); for (; itl != itr; ++itl) res += (itl-&gt;R - itl-&gt;L + 1) * itl-&gt;_val; return res; } åŒºé—´ç¬¬Kå°:inline LL kth(LL ll, LL rr, LL k) { vector&lt;pair&lt;LL, LL&gt; &gt; vec; IT itr = split(rr + 1), itl = split(ll); for (; itl != itr; ++itl) vec.push_back(pair&lt;LL, LL&gt;(itl-&gt;_val, itl-&gt;R - itl-&gt;L + 1)); sort(vec.begin(), vec.end()); for (auto it = vec.begin(); it != vec.end(); ++it) { k -= it-&gt;second; if (k &lt;= 0) return it-&gt;first; } return -1; } åŒºé—´åŠ inline void add(LL ll, LL rr, LL ad) { IT itr = split(rr + 1), itl = split(ll); for (; itr != itl; ++itl) itl-&gt;_val += ad; } å¹³æ—¶å¤§å®¶è¿˜æ˜¯å°½é‡å°‘ç”¨Â·Â·Â·Â·Â·Â·","categories":[{"name":"Learning","slug":"Learning","permalink":"www.orchid-any.cf/categories/Learning/"}],"tags":[{"name":"DS100P","slug":"DS100P","permalink":"www.orchid-any.cf/tags/DS100P/"}],"keywords":[{"name":"Learning","slug":"Learning","permalink":"www.orchid-any.cf/categories/Learning/"}]},{"title":"æ•°æ®ç»“æ„100é¢˜ ---fhq-treap","slug":"DS100P-FHQ-TREAP","date":"2020-02-05T06:51:04.000Z","updated":"2020-02-06T02:38:48.433Z","comments":true,"path":"2020/02/05/DS100P-FHQ-TREAP/","link":"","permalink":"www.orchid-any.cf/2020/02/05/DS100P-FHQ-TREAP/","excerpt":"","text":"fhq-treap($nlogn$) $fhq-treap$æ˜¯ä¸€ç§äºŒå‰æœç´¢æ ‘ã€‚æ»¡è¶³äºŒå‰æœç´¢æ ‘çš„æ€§è´¨ï¼šä¸­åºéå†æ˜¯ä¸€ä¸ªä¸é™åºåˆ—ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªèŠ‚ç‚¹çš„å·¦å„¿å­å°äºç­‰äºå®ƒï¼Œå³å„¿å­å¤§äºç­‰äºå®ƒã€‚ ä½†å®ƒå’Œ$treap$ä¸€æ ·ï¼Œéƒ½æ»¡è¶³å †çš„æ€§è´¨ï¼šä»»æ„çˆ¶èŠ‚ç‚¹çš„é”®å€¼å¤§äº(ç­‰äº)æˆ–å°äº(ç­‰äº)å­èŠ‚ç‚¹çš„é”®å€¼ã€‚ å®ƒå¯ä»¥åšæ™®é€šå¹³è¡¡æ ‘ï¼ˆåŸºæœ¬æ“ä½œï¼‰ï¼Œæ–‡è‰ºå¹³è¡¡æ ‘ï¼ˆåŒºé—´æ“ä½œï¼‰ï¼Œè¿˜å¯ä»¥å¯æŒä¹…åŒ–ã€‚ ä½†å¸¸æ•°ç•¥å¤§ã€‚ å®šä¹‰ï¼š struct node { int l,r,num,key,cum; //å·¦å„¿å­ï¼Œå³å„¿å­ï¼Œæœ¬èŠ‚ç‚¹çš„å€¼ï¼Œé”®å€¼ï¼Œå­æ ‘å¤§å° }nodes[MAXN]; 1.æƒå€¼fhq-treapæƒå€¼$fhq-treap$çš„æ„æ€æ˜¯ï¼Œå®ƒè¿™æ—¶å€™æ—¢æ»¡è¶³äºŒå‰æœç´¢æ ‘çš„æ€§è´¨ï¼Œåˆæ»¡è¶³å †çš„æ€§è´¨ã€‚ å…ˆè®²è®²è¾…åŠ©æ“ä½œå§ï¼š update:ç”¨æ¥æ›´æ–°å½“å‰èŠ‚ç‚¹çš„å­æ ‘å¤§å°ã€‚ ä»£ç å®ç°ï¼š void update(int x) { nodes[x].cum=nodes[nodes[x].l].cum+nodes[nodes[x].r].cum+1; } å› ä¸ºä¸€ä¸ªèŠ‚ç‚¹çš„å­æ ‘å¤§å°ç­‰äºå®ƒå·¦å³å„¿å­çš„å­æ ‘å¤§å°åŠ ä¸Šå®ƒæœ¬èº«å˜›ã€‚ newnode:æ–°å»ºä¸€ä¸ªå€¼ä¸ºæŒ‡å®šå€¼çš„èŠ‚ç‚¹å¹¶è¿”å›å®ƒçš„ç¼–å·ã€‚ ä»£ç å®ç°ï¼š int newnode(int val) { nodes[++tot].cum=1; nodes[tot].num=val; nodes[tot].key=rand(); return tot; } ä¸»è¦æ“ä½œæœ‰ä¸¤ä¸ªï¼š 1&gt;.åˆ†è£‚splitè¿™é‡Œçš„åˆ†è£‚æŒ‰ç…§æƒå€¼åˆ†è£‚ï¼Œå³æŠŠåŸæ ‘æŒ‰ç…§æƒå€¼$val$åˆ†æˆä¸¤æ£µæ ‘ï¼Œä¸€æ£µ$X$ä¸­çš„æƒå€¼å…¨éƒ¨å°äºç­‰äº$val$ï¼Œå¦ä¸€æ£µyçš„æƒå€¼å…¨éƒ¨å¤§äº$val$ã€‚è€Œè¿™ä¸¤æ£µæ ‘éƒ½è¦æ»¡è¶³ä¸¤ä¸ªæ€§è´¨ã€‚ è¦å®ç°è¿™ä¸ªæ“ä½œï¼Œæˆ‘ä»¬è¦ä»æ ¹èŠ‚ç‚¹å¼€å§‹éå†ï¼ŒæŠŠæ•´æ£µæ ‘åˆ†æˆä¸¤åŠã€‚ æˆ‘ä»¬è¿›è¡Œåˆ†ç±»è®¨è®ºï¼šç°åœ¨éå†åˆ°çš„èŠ‚ç‚¹ç¼–å·ä¸º$now$ã€‚ 1).å½“$now=0$æ—¶ è¿™æ—¶ï¼Œnowæ˜¯ä¸€ä¸ªç©ºèŠ‚ç‚¹ï¼Œæ²¡æœ‰åŠæ³•åˆ†è£‚ã€‚ 2).å½“$nodes[now].num\\leq val$æ—¶ è¿™ä¸ªèŠ‚ç‚¹ä»¥åŠå®ƒçš„å·¦å­æ ‘çš„æƒå€¼éƒ½å°äºç­‰äº$val$,é‚£ä¹ˆä»–ä»¬å…¨éƒ¨éƒ½å±äº$X$ã€‚ é‚£ä¹ˆå®ƒçš„å³å­æ ‘å¯èƒ½æ˜¯$X$çš„ï¼Œä¹Ÿå¯èƒ½æ˜¯$Y$çš„ã€‚ æ‰€ä»¥æˆ‘ä»¬éœ€è¦ç»§ç»­åˆ†è£‚å³å­æ ‘ï¼Œä½†ç”±äºå³è¾¹çš„æ•°è¦æ¯”$nodes[now].num$å¤§ï¼Œæ¥ä¸‹æ¥åˆ†è£‚å‡ºçš„å°äºç­‰äº$val$çš„å­æ ‘éœ€è¦æ¥åœ¨å½“å‰åˆ†å‡ºçš„$X$æ ‘çš„å³å­æ ‘ä¸Šã€‚ 3).å¦åˆ™ è¿™ä¸ªæ—¶å€™è¿™ä¸ªèŠ‚ç‚¹å’Œå®ƒçš„å³å­æ ‘çš„æƒå€¼éƒ½å¤§äº$val$ï¼Œé‚£ä¹ˆä»–ä»¬å…¨éƒ¨å±äº$Y$ã€‚ ä½†å®ƒçš„å·¦å­æ ‘å¯èƒ½æœ‰ä¸€éƒ¨åˆ†å±äº$X$ã€‚ æ‰€ä»¥æˆ‘ä»¬éœ€è¦ç»§ç»­åˆ†è£‚å·¦å­æ ‘ã€‚é“ç†åŒä¸Šã€‚ ä¸Šé¢æ“ä½œå·²ç»ä¿è¯äº†åˆ†å‡ºçš„äºŒå‰æ ‘æ»¡è¶³äºŒå‰æ ‘æ€§è´¨ã€‚è€Œå †æ€§è´¨ä¹Ÿå¾—åˆ°äº†æ»¡è¶³ï¼Œå› ä¸ºä»åŸæ ‘ä¸Šå¾€ä¸‹åˆ†ï¼Œåˆ†åˆ°èŠ‚ç‚¹çš„é”®å€¼ä¹Ÿæ˜¯æœ‰åºçš„ã€‚ é€’å½’è¿”å›å‰è¿˜è¦è®°å¾—$update$ä¸€ä¸‹ï¼Œæ›´æ–°åˆ†è£‚åçš„å­æ ‘å¤§å°ã€‚ æ˜¯ä¸æ˜¯è¿˜æ˜¯ä¸æ‡‚ï¼Ÿè¿˜æ˜¯çœ‹ä»£ç å’Œä»£ç æ³¨é‡Šå§ï¼š //x,yä»£è¡¨ä»nowè¿™ä¸ªèŠ‚ç‚¹åˆ†è£‚å‡ºçš„ä¸¤æ£µæ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œä½¿ç”¨å¼•ç”¨è¿”å›å€¼ã€‚ void split(int now,int val,int &amp;x,int &amp;y) { if(!now) x=y=0;//æƒ…å†µ1).æ— æ³•ç»§ç»­åˆ†è£‚ï¼Œæ‰€ä»¥ä¸¤æ£µæ ‘éƒ½æ˜¯ç©ºã€‚ else { if(nodes[now].num&lt;=val)//æƒ…å†µ2). { x=now;//å·¦å­æ ‘å’Œè¿™ä¸ªèŠ‚ç‚¹éƒ½å±äºXæ ‘ï¼Œæ¥åˆ°ä¹‹å‰åˆ†è£‚åˆ°çš„åœ°æ–¹ã€‚å³å­æ ‘åœ¨ä¸‹é¢ä¼šå—åˆ°ä¿®æ”¹ï¼Œæ‰€ä»¥å³å­æ ‘å¹¶æ²¡æœ‰è¢«ç›´æ¥åŒ…æ‹¬ã€‚ split(nodes[now].r,val,nodes[x].r,y);//ç»§ç»­åˆ†è£‚å³å­æ ‘ã€‚æ¥ä¸‹æ¥åˆ†è£‚å‡ºå±äºXæ ‘çš„æ ¹èŠ‚ç‚¹ä½ç½®åº”è¯¥æ˜¯nodes[x].rï¼Œyçš„ä½ç½®æ²¡æœ‰å˜åŠ¨ã€‚ } else//æƒ…å†µ3). { y=now; split(nodes[now].l,val,x,nodes[y].l);//åŒä¸Š } update(now); //ç”±äºæ— è®ºè¿›å…¥å“ªä¸ªåˆ¤æ–­ï¼Œä½œäº†æ”¹å˜çš„èŠ‚ç‚¹éƒ½ç­‰äºnow,æ‰€ä»¥å¯ä»¥ç›´æ¥æ›´æ–°nowã€‚ } } //è°ƒç”¨ï¼šsplit(root,v,root1,root2) æœ€åä¼ å›çš„å€¼å°±ç›¸å½“äºç»™$root1$,$root2$èµ‹å€¼ã€‚ $root1$,$root2$å°±æ˜¯åˆ†è£‚å‡ºçš„$X$æ ‘å’Œ$Y$æ ‘çš„æ ¹èŠ‚ç‚¹ã€‚ 2&gt;.åˆå¹¶mergeå³æŠŠä¸¤é¢—åƒåˆšåˆšä¸Šé¢åˆ†è£‚å‡ºæ¥çš„ä¸¤é¢—æ ‘åˆå¹¶æˆä¸€æ£µæ»¡è¶³ä¸¤ä¸ªæ€§è´¨çš„æ ‘ã€‚ æˆ‘ä»¬åˆè¦åˆ†ç±»è®¨è®ºï¼šç°åœ¨éœ€è¦åˆå¹¶çš„èŠ‚ç‚¹æ˜¯$x$,$y$ã€‚ï¼ˆç¤ºä¾‹å°æ ¹å †ï¼‰ 1).$x=0$|$\\ $|$y=0$ åªæœ‰ä¸€æ£µæ ‘ï¼Œç›´æ¥è¿”å›è¿™æ£µæ ‘ã€‚ 2).$nodes[x].key&lt;nodes[y].key$ $x$èŠ‚ç‚¹çš„é”®å€¼æ›´å°ï¼Œæ‰€ä»¥$x$åº”è¯¥åœ¨$y$çš„ä¸Šé¢ã€‚ $y$çš„å€¼ä¸€å®šå¤§äº$x$,æ‰€ä»¥æŠŠ$y$å’Œ$x$çš„å³å­æ ‘è¿›è¡Œåˆå¹¶ã€‚ 3).å¦åˆ™ $y$åº”è¯¥åœ¨$x$çš„ä¸Šé¢ã€‚ $x$çš„å€¼ä¸€å®šå°äº$y$ï¼Œæ‰€ä»¥æŠŠ$y$çš„å·¦å„¿å­å’Œ$x$è¿›è¡Œåˆå¹¶ã€‚ ä»£ç ï¼š int merge(int x,int y) { if(!x||!y) return x+y; if(nodes[x].key&lt;nodes[y].key) { nodes[x].r=merge(nodes[x].r,y); update(x); return x; } else { nodes[y].l=merge(x,nodes[y].l); update(y); return y; } } å­¦ä¼šäº†è¿™ä¸¤ä¸ªæ“ä½œä¹‹åï¼Œå°±å¯ä»¥å®ç°æ™®é€šå¹³è¡¡æ ‘çš„æ‰€æœ‰æ“ä½œäº†ã€‚ 3.æ’å…¥æ’å…¥çš„ä»£ç åªæœ‰ä¸¤è¡Œï¼Œéå¸¸ç®€å•ã€‚ åªéœ€è¦æŠŠåŸæ•°æŒ‰è¦æ’å…¥çš„å€¼$val$å¤§å°åˆ†è£‚ï¼Œä¸€è¾¹$x$å°äºç­‰äº$val$ï¼Œå¦ä¸€è¾¹$y$å¤§äº$val$ã€‚ å†æŠŠ$x$ä¸è¿™ä¸ªå€¼èŠ‚ç‚¹åˆå¹¶ï¼ˆå¾—åˆ°$z$ï¼‰ï¼Œæœ€åä¸$y$åˆå¹¶ã€‚ å› ä¸º$x$çš„èŠ‚ç‚¹å…¨éƒ¨å°äºç­‰äº$val$,$z$çš„èŠ‚ç‚¹å…¨éƒ¨å°äº$y$ã€‚æ»¡è¶³æˆ‘ä»¬ä¹‹å‰åˆå¹¶ä¸¤æ£µæ ‘çš„æ¡ä»¶ã€‚ ä»£ç ï¼š void ins(int val) { split(root,val,root1,root2); root=merge(merge(root1,newnode(val)),root2); } 4.åˆ é™¤å…ˆæŠŠè¦åˆ é™¤çš„å€¼$val$ä»åŸæ ‘ä¸­åˆ†è£‚å‡ºæ¥ï¼Œåˆ æ‰ä¸€ä¸ªå†åˆå¹¶å›å»ã€‚ æ€ä¹ˆåœ¨å¾ˆå¤šçš„$val$ä¸­åˆ æ‰ä¸€ä¸ªå‘¢ã€‚ æˆ‘ä»¬æŠŠ$val$å­æ ‘æ ¹èŠ‚ç‚¹çš„å·¦å³èŠ‚ç‚¹åˆå¹¶èµ·æ¥ï¼Œå°±ç›¸å½“äºæŠ›å¼ƒäº†è¿™ä¸ªæ ¹èŠ‚ç‚¹ã€‚ è¿™æ ·ä¿è¯äº†å¦‚æœæœ‰è¿™ä¸ªå€¼ï¼Œä¸€å®šä¼šè¢«åˆ æ‰ï¼Œå› ä¸ºå¦‚æœæœ‰ï¼Œé‚£ä¹ˆæ ¹èŠ‚ç‚¹è‚¯å®šæœ‰ã€‚ ä»£ç ï¼š void del(int val) { split(root,val,root1,root2); split(root1,val-1,root1,root3); root3=merge(nodes[root3].l,nodes[root3].r); root=merge(merge(root1,root3),root2); } 5.å‰é©±/åç»§æˆ‘ä»¬æŠŠå°äº/å¤§äºæŸ¥è¯¢å€¼$val$çš„å­æ ‘åˆ†è£‚å‡ºæ¥ï¼Œç”±äºåˆ†è£‚å‡ºçš„å­æ ‘ä¾ç„¶æ»¡è¶³äºŒå‰æ ‘æ€§è´¨ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥æŸ¥è¯¢è¿™ä¸ªå­æ ‘ä¸­çš„æœ€å¤§å€¼/æœ€å°å€¼ï¼ŒæŸ¥è¯¢å‡ºçš„å€¼å°±æ˜¯ç­”æ¡ˆã€‚æœ€åè®°å¾—åˆå¹¶å›å»ã€‚ ä»£ç ï¼š int pre(int val) { split(root,val-1,root1,root2); int now=root1,res=-INF; if(now) { while(nodes[now].r) now=nodes[now].r; res=nodes[now].num; } root=merge(root1,root2); return res; } int nxt(int val) { split(root,val,root1,root2); int now=root2,res=INF; if(now) { while(nodes[now].l) now=nodes[now].l; res=nodes[now].num; } root=merge(root1,root2); return res; } 6.ç¬¬kå°å¯¹äºè¿™ä¸ªé—®é¢˜ï¼Œ$fhq-treap$æ²¡æœ‰ç‰¹æ®Šçš„è§£å†³æ–¹æ³•ã€‚æ‰€ä»¥å’Œ$treap$ä¸€æ ·ã€‚ ç”±äºäºŒå‰æœç´¢æ ‘ä¸­åºéå†ä¸ºä¸é™åºåˆ—ï¼Œæˆ‘ä»¬åˆ†æƒ…å†µè®¨è®ºï¼š 1&gt;.å·¦å­æ ‘å¤§å°$+1$ç­‰äº$k$ã€‚ è¯´æ˜å½“å‰èŠ‚ç‚¹å°±æ˜¯ç¬¬$k$å°ã€‚ 2&gt;.å·¦å­æ ‘å¤§å°å°äºç­‰äº$k$ è¯´æ˜ç¬¬$k$å¤§åœ¨å·¦è¾¹ï¼Œé‚£ä¹ˆå‘å·¦è¾¹ç»§ç»­å¯»æ‰¾ç¬¬kå°ã€‚ 3&gt;.å¦åˆ™ ç¬¬$k$å°åœ¨å³è¾¹ï¼Œä½†å·¦è¾¹å’Œå½“å‰ç»“ç‚¹éƒ½æ¯”ç¬¬$k$å°ã€‚æ‰€ä»¥ç¬¬kå°æ˜¯åœ¨å³è¾¹çš„ç¬¬$k-nodes[nodes[x].l].sum-1$å°ã€‚ ä»£ç ï¼š int top(int val) { int x=root; while(x) { if(nodes[nodes[x].l].sum+1==val) break; if(nodes[nodes[x].l].sum&gt;=val) x=nodes[x].l; else { val-=(1+nodes[nodes[x].l].sum); x=nodes[x].r; } } return nodes[x].num; } 7.æ’åæ’åçš„å®šä¹‰æ˜¯æ¯”ä¸€ä¸ªæ•°å°çš„æ•°çš„ä¸ªæ•°åŠ $1$ã€‚ é€šè¿‡å®šä¹‰å°±èƒ½å¾—å‡ºåšæ³•ï¼š æŠŠæ¯”æŸ¥è¯¢å€¼å°çš„å­æ ‘åˆ†ç¦»å‡ºæ¥ï¼Œè¿™æ£µå­æ ‘çš„å¤§å°å°±æ˜¯æ¯”è¿™ä¸ªæ•°å°çš„æ•°çš„ä¸ªæ•°ã€‚å†åŠ $1$å°±èƒ½å¾—åˆ°ç­”æ¡ˆäº†ã€‚ ä»£ç ï¼š int rank(int val) { split(root,val-1,root1,root2); int res=nodes[root1].sum+1; root=merge(root1,root2); return res; } 2.åŒºé—´fhq-treapåŒºé—´$fhq-treap$ç»´æŠ¤äº†ä¸€ä¸ªåŒºé—´ï¼Œä¸­åºéå†æ•´ä¸ª$fhq-treap$å°±å¯ä»¥å¾—åˆ°è¿™ä¸ªåºåˆ—ã€‚å½“ç„¶ï¼Œè¿™æ—¶å€™å®ƒè‚¯å®šå°±ä¸èƒ½æ»¡è¶³äºŒå‰æœç´¢æ ‘çš„æ€§è´¨äº†ã€‚ä½†å®ƒè¿˜å¯ä»¥æ»¡è¶³å †çš„æ€§è´¨ã€‚ ä¸ºäº†ç»´æŠ¤åŒºé—´ï¼Œæˆ‘ä»¬çš„$split$æ“ä½œéœ€è¦æ›´æ”¹ï¼š æ¯æ¬¡åˆ†è£‚ä¸€ä¸ªåŒºé—´å‡ºæ¥ï¼šæŠŠè¿™ä¸ªåºåˆ—çš„å‰$siz$é¡¹åˆ†å‡ºæ¥ä¸ºä¸€ä¸ªå­æ ‘$X$,å‰©ä½™å¦ä¸€ä¸ªå­æ ‘$Y$ã€‚ åˆåˆ†ç±»è®¨è®ºï¼š 1&gt;.$nodes[nodes[x].l].sum&lt;k$ è¿™è¯´æ˜å½“å‰ç»“ç‚¹çš„å·¦å­æ ‘å’Œè‡ªèº«éƒ½å±äº $X$ï¼Œæˆ‘ä»¬å†æŠŠå³å­æ ‘çš„å‰$k-nodes[nodes[x].l].sum-1$é¡¹åˆ†ç»™$X$å°±å¥½äº†ã€‚ 2&gt;.å¦åˆ™ å‰$k$é¡¹åœ¨å½“å‰ç»“ç‚¹çš„å·¦å­æ ‘ä¸­ï¼Œé‚£ä¹ˆå½“å‰èŠ‚ç‚¹å’Œå®ƒçš„å³å­æ ‘å±äº$Y$ã€‚ ä»£ç ï¼š void split(int now,int siz,int &amp;x,int &amp;y) { if(!now) x=y=0; else { if(nodes[nodes[now].l].sum&lt;k) { x=now; split(nodes[now].r,siz-nodes[nodes[now].l].sum-1,nodes[x].r,y); } else { y=now; split(nodes[now].l,siz,x,nodes[y].l); } update(now); } } ä½†$merge$æ“ä½œä¸éœ€è¦å¤ªå¤§å˜åŠ¨ï¼Œåªéœ€è¦åŠ ä¸Šæ‡’æ ‡è®°ä¸‹ä¼ å°±è¡Œäº†ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ å…¶å®åŒºé—´æ“ä½œçš„åˆ†è£‚é™¤äº†æ ‡è®°ä¸‹ä¼ ä¹‹å¤–ä¸æƒå€¼ç‰ˆæ²¡æœ‰ä»€ä¹ˆå·®åˆ«ï¼Œåªæ˜¯è¿™é‡Œåˆ†è£‚çš„æƒå€¼æ˜¯ç¬¬kå°ã€‚ æ ‡è®°ä¸‹ä¼ æ˜¯ä¸ªå¤§å‘ï¼Œæœ‰æ ‡è®°æ—¶ï¼Œæ¯å½“ä½ è¦å¯¹ä¸€ä¸ªèŠ‚ç‚¹çš„å­èŠ‚ç‚¹è¿›è¡Œæ“ä½œï¼ˆæ— è®ºæ˜¯ä¿®æ”¹è¿˜æ˜¯æŸ¥è¯¢ï¼‰æ—¶ï¼Œè¦å…ˆä¸‹ä¼ æ ‡è®°ï¼Œå¦åˆ™ä¹‹åèƒ½ä¼šä¼ é”™ä½ç½®ï¼Œå› ä¸ºä½ å¯èƒ½æ›´æ”¹äº†å®ƒçš„å­èŠ‚ç‚¹ã€‚ 1.åŒºé—´å’Œæˆ‘ä»¬åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸­å†åŠ ä¸Šä¸€ä¸ªå˜é‡è®°å½•å®ƒå’Œå®ƒå­æ ‘çš„å’Œã€‚ é‚£ä¹ˆæ¯æ¬¡å­æ ‘å¤§å°æ›´æ–°æ—¶ï¼Œå­æ ‘å’Œä¹Ÿè¦æ›´æ–°ã€‚ å°±åœ¨$update$é‡ŒåŠ ä¸€å¥è¯æ›´æ–°å­æ ‘å’Œå°±å¥½ã€‚ æŸ¥è¯¢åŒºé—´å’Œæ—¶å°±æŠŠè¿™ä¸ªåŒºé—´åˆ†è£‚å‡ºæ¥ï¼Œç›´æ¥æŸ¥è¯¢è¿™ä¸ªåŒºé—´æ ¹èŠ‚ç‚¹çš„å­æ ‘å’Œå°±è¡Œäº†ã€‚ 2.åŒºé—´ç¿»è½¬åŒºé—´æ“ä½œåŸºæœ¬é æ‡’æ ‡è®°æ¥å®Œæˆã€‚è¿™äº›æ ‡è®°éƒ½ä¼šç»§ç»­ä¸‹ä¼ ç»™å­èŠ‚ç‚¹ã€‚ ç¿»è½¬å°±ç”¨ä¸€ä¸ª$bool$æ‡’æ ‡è®°å°±å¥½äº†ã€‚ é¦–å…ˆè¯´æ˜åŒºé—´ç¿»è½¬çš„åŸç†ï¼š å…ˆæŠŠè¿™ä¸ªåŒºé—´åˆ†è£‚å‡ºæ¥ã€‚ è¦ä½¿åŒºé—´ç¿»è½¬ï¼Œå°±ç›¸å½“äºè¦æŠŠè¿™ä¸ªåŒºé—´å€’ç€éå†ã€‚ å·¦ä¸­å³$-&gt;$å³ä¸­å·¦ å³æˆ‘ä»¬è¦å¯¹äºæ¯ä¸ªèŠ‚ç‚¹éå†æ—¶å…ˆéå†å³è¾¹ï¼Œå†éå†æœ¬èŠ‚ç‚¹ï¼Œæœ€åéå†å·¦è¾¹ã€‚ é‚£æˆ‘ä»¬æŠŠæ¯ä¸ªèŠ‚ç‚¹çš„å·¦å³å„¿å­äº¤æ¢å°±è¡Œäº†ã€‚ æ‰€ä»¥æˆ‘ä»¬ç›´æ¥æŠŠè¿™ä¸ªåŒºé—´å‰–å‡ºæ¥ï¼ŒæŠŠå®ƒçš„æ ¹èŠ‚ç‚¹æ‰“ä¸Šæ ‡è®°ï¼Œå†åˆå¹¶å›å»å°±å¥½äº†ã€‚ 3.åŒºé—´åŠ æ³•åŒºé—´åŠ æ³•å°±åƒçº¿æ®µæ ‘ä¸€æ ·çš„æ‡’æ ‡è®°å°±å¥½äº†ã€‚ å…¶å®ä¸åŒºé—´ç¿»è½¬çš„å®ç°æ–¹å¼ç±»ä¼¼ï¼Œæˆ‘å°±ä¸è®²äº†ã€‚ 4.å¦‚ä½•å‰–å‡ºåŒºé—´[l,r]æˆ‘ä»¬æŠŠåºåˆ—$[1,n]$åˆ†æˆ3æ®µ$[1,l-1]$,$[l,r]$,$[r+1,n]$ ç¬¬ä¸€æ®µçš„é•¿åº¦æ˜¯$l-1$,ç¬¬äºŒæ®µçš„é•¿åº¦æ˜¯$r-l+1$ æˆ‘ä»¬å°±æŒ¨ä¸ªæŠŠå®ƒä»¬$split$å‡ºæ¥å°±å¥½äº†ã€‚ ä»£ç : split(root,l-1,root1,root2); split(root2,r-l+1,root2,root3); $root2$å³ä¸º$[l,r]$åŒºé—´çš„æ ¹ç»“ç‚¹ã€‚ $\\ $ ç”±æ­¤åˆ¤æ–­ï¼Œå¹³è¡¡æ ‘æ¯”çº¿æ®µæ ‘è¿˜è¦ä¸‡èƒ½ï¼Œä½†å¸¸æ•°å·¨å¤§ã€‚","categories":[{"name":"Learning","slug":"Learning","permalink":"www.orchid-any.cf/categories/Learning/"}],"tags":[{"name":"DS100P","slug":"DS100P","permalink":"www.orchid-any.cf/tags/DS100P/"}],"keywords":[{"name":"Learning","slug":"Learning","permalink":"www.orchid-any.cf/categories/Learning/"}]},{"title":"æ•°æ®ç»“æ„100é¢˜ç³»åˆ—ç›®å½•åŠå‰è¨€","slug":"DS100P-INDEX-AND-PREWORDS","date":"2020-02-05T06:51:04.000Z","updated":"2020-02-07T10:50:19.916Z","comments":true,"path":"2020/02/05/DS100P-INDEX-AND-PREWORDS/","link":"","permalink":"www.orchid-any.cf/2020/02/05/DS100P-INDEX-AND-PREWORDS/","excerpt":"","text":"å‰è¨€$\\qquad \\qquad \\qquad$ljsæäº†ä¸€ä¸ªdp100é¢˜ï¼Œç„¶ålycå‘Šè¯‰æˆ‘æˆ‘ä»¬æä¸€ä¸ªæ•°æ®ç»“æ„100é¢˜å§ $\\qquad \\qquad \\qquad$äºæ˜¯æˆ‘å°±æ¥äº†ï¼Œè¿˜å¸¦æ¥ä¸€ä¸ªç½‘ç»œæµ(å®ƒæ­»äº†ï¼Œè¢«lycæ€æ­»çš„) ç”±äºæŸWGYç¡¬æ˜¯æŠŠç½‘ç»œæµåŠ è¿›å»äº†ï¼Œæ‰€ä»¥æˆ‘åªèƒ½é‡å¼€ä¸€ä¸ªâ€¦â€¦ï¼ˆæˆ‘ä¸ºä»€ä¹ˆè¦è®©ä»–å»ºå¸–å­ï¼‰$\\qquad \\qquad \\qquad$(å®ƒæ­»äº†ï¼Œè¢«wgyæ€æ­»çš„) æˆ‘æ˜¯ä¸ä¼šå†™ç½‘ç»œæµçš„ï¼ï¼ï¼$\\qquad \\qquad \\qquad$(å®ƒæ­»äº†ï¼Œè¢«wgyæ€æ­»çš„) å‰æœŸæˆ‘ä¼šå…ˆæŠŠå„ä¸ªæ•°æ®ç»“æ„çš„æ¨¡æ¿å…ˆå†™ä¸€éï¼Œå…ˆæŠŠåŸºç¡€è®²æ¸…æ¥šã€‚$\\qquad \\qquad \\qquad$å’•å’•å’• åæœŸå†åŠ ä¸€äº›æœ‰ä»·å€¼çš„é¢˜ç›®æ¥è®²è§£ã€‚$\\qquad \\qquad \\qquad$(æˆ‘å¯èƒ½ä¼šå…ˆå’•æ‰éƒ¨åˆ†æ¨¡æ¿â€¦â€¦) $\\qquad \\qquad \\qquad$//å…ˆæŠŠå‘æŒ–å¥½ é¢˜è§£éƒ¨åˆ†$\\qquad \\qquad \\qquad$æ•°æ®ç»“æ„100é¢˜ â€”-æ•°æ®ç»“æ„é›†åˆ $\\qquad \\qquad \\qquad$æ•°æ®ç»“æ„100é¢˜ 1~10é¢˜ $\\qquad \\qquad \\qquad$æ•°æ®ç»“æ„100é¢˜ 11~20é¢˜ $\\qquad \\qquad \\qquad$æ•°æ®ç»“æ„100é¢˜ 21~30é¢˜ æ•°æ®ç»“æ„å­¦ä¹ ç¬”è®°éƒ¨åˆ†$\\qquad \\qquad \\qquad$æ•°æ®ç»“æ„100é¢˜ â€”-æ ‘çŠ¶æ•°ç»„ $\\qquad \\qquad \\qquad$æ•°æ®ç»“æ„100é¢˜ â€”-çº¿æ®µæ ‘ $\\qquad \\qquad \\qquad$æ•°æ®ç»“æ„100é¢˜ â€”-trieæ ‘ $\\qquad \\qquad \\qquad$æ•°æ®ç»“æ„100é¢˜ â€”-æ ‘é“¾å‰–åˆ† $\\qquad \\qquad \\qquad$æ•°æ®ç»“æ„100é¢˜ â€”-fhq-treap $\\qquad \\qquad \\qquad$æ•°æ®ç»“æ„100é¢˜ â€”-æ ‘å¥—æ ‘ $\\qquad \\qquad \\qquad$æ•°æ®ç»“æ„100é¢˜ â€”-åˆ†å— $\\qquad \\qquad \\qquad$æ•°æ®ç»“æ„100é¢˜ â€”-è«é˜Ÿ $\\qquad \\qquad \\qquad$æ•°æ®ç»“æ„100é¢˜ â€”-Link-Cut Tree $\\qquad \\qquad \\qquad$æ•°æ®ç»“æ„100é¢˜ â€”-Chtholly-Tree(Old-Driver Tree) $\\qquad \\qquad \\qquad$æ•°æ®ç»“æ„100é¢˜ â€”-KMP $\\qquad \\qquad \\qquad$æ•°æ®ç»“æ„100é¢˜ â€”-splay $\\qquad \\qquad \\qquad$æ•°æ®ç»“æ„100é¢˜ â€”-åç¼€å…¨å®¶æ¡¶ ä¹‹ åç¼€æ•°ç»„","categories":[{"name":"Learning","slug":"Learning","permalink":"www.orchid-any.cf/categories/Learning/"}],"tags":[{"name":"DS100P","slug":"DS100P","permalink":"www.orchid-any.cf/tags/DS100P/"}],"keywords":[{"name":"Learning","slug":"Learning","permalink":"www.orchid-any.cf/categories/Learning/"}]},{"title":"æ•°æ®ç»“æ„100é¢˜ ---åˆ†å—","slug":"DS100P-FENKUAI","date":"2020-02-05T06:51:04.000Z","updated":"2020-02-06T02:37:14.283Z","comments":true,"path":"2020/02/05/DS100P-FENKUAI/","link":"","permalink":"www.orchid-any.cf/2020/02/05/DS100P-FENKUAI/","excerpt":"","text":"åˆ†å—($n\\sqrt n$) åˆ†å—å…¶å®ä¹Ÿæ˜¯ä¸€ç§æš´åŠ›ï¼Œä½†å®ƒæ˜¯ä¸€ç§å·§å¦™çš„æš´åŠ› å®ƒç”¨æ¥å¤„ç†åŒºé—´çš„é—®é¢˜ã€‚ æŠŠè¿™ä¸ªåŒºé—´å¤§æ¦‚åˆ†æˆ$\\sqrt n$å— ç„¶åå†å¤„ç†ï¼šå¯¹äºä¸€ä¸ªæ•´å—ï¼Œå°±æ•´ä¸ªå¤„ç†æ‰ï¼›å¯¹äºä¸€ä¸ªè§’å—ï¼ˆä¸å®Œæ•´çš„å—ï¼‰ï¼Œå°±æš´åŠ›å¤„ç†ã€‚ æ¯”å¦‚åŒºé—´æ±‚å’Œã€‚(éä¸»æµå†™æ³•å‹¿å–·) 1.åˆå§‹åŒ–å¯¹äºæ¯ä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬è¦å¤„ç†å‡ºå®ƒæ˜¯å“ªä¸ªå—çš„ï¼Œä»¥ä¾¿ä¹‹åå¿«é€Ÿåœ°æ‰¾åˆ°å®ƒæ‰€åœ¨çš„å—ã€‚ å¯¹äºæ¯ä¸ªå—ï¼Œæˆ‘ä»¬è¦ç»Ÿè®¡å‡ºä¹‹åè®¡ç®—ç­”æ¡ˆæ‰€éœ€è¿™ä¸ªå—å†…çš„ç»“æœï¼ˆè¿™é‡Œå°±æ˜¯å—å†…åŒºé—´å’Œï¼‰ï¼Œåœ¨åŒºé—´ä¸­çš„å·¦å³ç«¯ç‚¹ï¼Œä»¥åŠåŒºé—´ä¿®æ”¹çš„æ‡’æ ‡è®°ã€‚ ä»£ç ï¼š struct cude { int l,r,sum,lazy;//å·¦å³ç«¯ç‚¹ï¼ŒåŒºé—´å’Œï¼Œæ‡’æ ‡è®° }cud[400]; int n,a[100010],bel[100010],each,cnt;//åŸæ•°ç»„å¤§å°åŠå…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ çš„å—ç¼–å·ï¼Œå—å¤§å°ï¼Œå—æ•° void build() { each=sqrt(n); for(int i=0;i&lt;n;++i)//æ³¨æ„ï¼Œæˆ‘æ˜¯ä»0å¼€å§‹å­˜çš„åŸæ•°ç»„ { bel[i]=i/each;//é¢„å¤„ç†å…ƒç´ å±äºå— cud[bel[i]].sum+=a[i];//åŒºé—´å’Œ } for(int i=0;i*each&lt;n;++i) { ++cnt;//ç»Ÿè®¡å—æ•° cud[i].l=i*each;//å—å·¦ç«¯ç‚¹ cud[i].r=min((i+1)*each-1,n-1);//å—å³ç«¯ç‚¹ï¼Œä¸å¯èƒ½è¾¾åˆ°nï¼Œæ‰€ä»¥å–minï¼Œæœ€å¤šåˆ°n-1 } } 2.ä¿®æ”¹ä¿®æ”¹æ˜¯å¾ˆæš´åŠ›çš„ï¼Œæˆ‘ä»¬å¯¹è¿™ä¸ªåŒºé—´è¿›è¡Œæ‰«æã€‚ æ•´å—å°±åŒºé—´ä¿®æ”¹ï¼Œæ‡’æ ‡è®°ã€‚ è§’å—å°±ç›´æ¥æš´åŠ›æ‰«è¿‡å»ä¿®æ”¹ã€‚ æœ€å¤š$\\sqrt n$ä¸ªæ•´å—ï¼Œæ‰“æ‡’æ ‡è®°$O(1)$ï¼Œå¤æ‚åº¦ä¸º$O(\\sqrt n)$ æœ€å¤š$2$ä¸ªè§’å—ï¼Œä¸€ä¸ªè§’å—æœ€å¤š$\\sqrt n$ä¸ªå…ƒç´ ï¼Œæš´åŠ›ä¿®æ”¹$O(\\sqrt n)$ åŒºé—´ä¿®æ”¹æ€»æ—¶é—´å¤æ‚åº¦$O(\\sqrt n)$ ä»£ç ï¼š void update(int l,int r,int val) { for(int i=bel[l];cud[i].l&lt;=r&amp;&amp;i&lt;cnt;++i)//æ³¨æ„ä¸è¦è¶…è¿‡å—æ•°ï¼Œæˆ‘çš„å—æ˜¯ä»0å¼€å§‹ç¼–å·çš„ { if(cud[i].l&gt;=l&amp;&amp;cud[i].r&lt;=r)//æ•´å—æ‰“æ‡’æ ‡è®° { cud[i].lazy+=val; cud[i].sum+=(cud[i].r-cud[i].l+1)*val; } else//è§’å—æš´åŠ›æ‰« { if(cud[i].l&lt;l)//å±äºæ•´ä¸ªåŒºé—´çš„æœ€å·¦è¾¹çš„è§’å—ï¼Œä½†è¿˜å¯èƒ½æ˜¯æœ€å³è¾¹çš„è§’å—ï¼Œéœ€è¦åˆ¤æ–­ä¸è¦è¶…å‡ºä¿®æ”¹åŒºé—´çš„å³ç«¯ç‚¹ { for(int j=l;j&lt;=cud[i].r&amp;&amp;j&lt;=r;++j) { a[j]+=val; cud[i].sum+=val; } } else//ä¸æ˜¯æœ€å·¦è¾¹çš„ï¼Œé‚£è‚¯å®šæ˜¯æœ€å³è¾¹çš„ã€‚ { for(int j=cud[i].l;j&lt;=r;++j) { a[j]+=val; cud[i].sum+=val; } } } } } 3.æŸ¥è¯¢æŸ¥è¯¢ä¹Ÿæ˜¯å¾ˆæš´åŠ›çš„ã€‚ åŒæ ·å¯¹è¿™ä¸ªåŒºé—´è¿›è¡Œæ‰«æã€‚ å¦‚æœæ˜¯æ•´å—ï¼Œå°±ç›´æ¥åŠ ä¸Šè¿™ä¸ªå—çš„åŒºé—´å’Œã€‚ å¦‚æœæ˜¯è§’å—ï¼Œå°±è¦å…ˆä¸‹ä¼ æ‡’æ ‡è®°ï¼Œå†æš´åŠ›æŸ¥è¯¢ã€‚ å› ä¸ºæˆ‘ä»¬ä¹‹å‰å¹¶æ²¡æœ‰ä¿®æ”¹å…ƒç´ å€¼ï¼Œåªæ˜¯åŠ ä¸Šäº†æ‡’æ ‡è®°ï¼Œä¿®æ”¹äº†åŒºé—´å’Œã€‚ æ‰€ä»¥æˆ‘ä»¬ç°åœ¨è¦å…ˆä¿®æ”¹è¿™äº›å…ƒç´ çš„å€¼å†æŸ¥è¯¢ï¼Œå¦åˆ™æŸ¥è¯¢åˆ°çš„å€¼æ˜¯ä¿®æ”¹ä¹‹å‰çš„ã€‚ æ—¶é—´å¤æ‚åº¦ä¸ä¿®æ”¹ç›¸åŒï¼Œéƒ½æ˜¯$O(\\sqrt n)$ï¼› ä»£ç ï¼š //ç»†èŠ‚åŒ2.ä¿®æ”¹ int find(int l,int r) { int res=0; for(int i=bel[l];cud[i].l&lt;=r&amp;&amp;i&lt;cnt;++i) if(cud[i].l&gt;=l&amp;&amp;cud[i].r&lt;=r) res+=cud[i].sum; else { if(cud[i].lazy)//ä¸‹ä¼ æ‡’æ ‡è®° { for(int j=cud[i].l;j&lt;=cud[i].r;++j) a[j]+=cud[i].lazy; cud[i].lazy=0; } if(cud[i].l&lt;l) { for(int j=l;j&lt;=cud[i].r&amp;&amp;j&lt;=r;++j) res+=a[j]; } else { for(int j=cud[i].l;j&lt;=r;++j) res+=a[j]; } } } return res; } 4.æ€»ç»“ä½ çœ‹ç€è¿™ä¸ªä¸œè¥¿å¥½åƒå¾ˆæš´åŠ›ï¼Œä½†å®ƒå°±æ˜¯è·‘å¾—è¿‡é¢˜ã€‚ å®ƒçš„æ€»æ—¶é—´å¤æ‚åº¦æ˜¯$O(n\\sqrt n)$çš„ï¼Œ$500000$åŠä»¥ä¸Šå°±åˆ«æƒ³å•¦ã€‚ åˆ†å—çš„é¢˜ç›®å¾ˆçµæ´»ï¼Œä½†ä¸€èˆ¬éƒ½å¾ˆæš´åŠ›ï¼Œæœ‰æ—¶åŒºé—´ä¿®æ”¹ä¸èƒ½æ‰“æ‡’æ ‡è®°ï¼Œå°±å¿…é¡»æš´åŠ›ä¿®æ”¹ï¼Œä½†æœ‰æ—¶ä½ åˆå¯ä»¥è·³è¿‡è¿™ä¸ªä¿®æ”¹ï¼Œè¿›è¡Œâ€œå‰ªæâ€ã€‚ å°±åƒèŠ±ç¥æ¸¸å†å„å›½ï¼ŒåŒºé—´å¼€æ–¹å¿…é¡»è¦åœ¨å—é‡Œå»æš´åŠ›å¼€ ä½†æˆ‘ä»¬æƒ³ï¼Œ$1$å’Œ$0$å¼€æ–¹åéƒ½æ˜¯æœ¬èº«ï¼Œå…¶å®ƒæ•°å¼€æ–¹å°±ä¼šå˜å¾—è¶Šæ¥è¶Šå°ï¼Œæœ€ååˆ°$1$ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç»´æŠ¤ä¸€ä¸ªå—å†…æ˜¯å¦å…¨æ˜¯$1$æˆ–$0$ã€‚ å¦‚æœæ˜¯ï¼Œå°±å¯ä»¥è·³è¿‡åœ¨è¿™ä¸ªåŒºé—´é‡Œè¿›è¡Œå¼€æ–¹äº†ï¼Œå› ä¸ºè¿™ä¸ªå—é‡Œçš„å…ƒç´ å¼€æ–¹ä¹‹åéƒ½è¿˜æ˜¯æœ¬èº«ï¼Œæ¯ä¸ªå…ƒç´ å’ŒåŒºé—´å’Œéƒ½æ²¡æœ‰å˜ã€‚ å…¶ä»–çš„å°±æ˜¯æ™®é€šåˆ†å—ã€‚ $\\ $ åœ¨åˆ†å—ï¼Œä½ ç”šè‡³å¯ä»¥æ‰“è¡¨ åœ¨åŒºé—´ä¸­é€‰å–$\\sqrt n$ä¸ªç‰¹å¾ç‚¹ï¼Œå¤„ç†å‡ºå®ƒä»¬é—´çš„ä¿¡æ¯ã€‚ å¯¹æ¯ä¸ªæŸ¥è¯¢ï¼Œé€‰å–æœ€è¿‘çš„ä¸¤ä¸ªç‰¹å¾ç‚¹çš„ä¿¡æ¯å†ä»è¿™ä¸¤ä¸ªç‰¹å¾ç‚¹æš´åŠ›è·³è¿‡å»ã€‚ è¿™æ ·å°±å¯ä»¥ä»£æ›¿è«é˜Ÿå•¦ã€‚ è€Œä¸”åˆ†å—æ²¡æœ‰ä»»ä½•ç¦»çº¿æ“ä½œï¼Œå¯ä»¥åº”å¯¹çœ‹èµ·æ¥åƒè¦ç”¨è«é˜Ÿï¼ˆç¦»çº¿ç®—æ³•ï¼ŒåŒæ ·$O(n\\sqrt n)$ï¼‰æ‰èƒ½è§£å†³ï¼Œä½†åˆå¼ºåˆ¶åœ¨çº¿çš„é¢˜ç›®ã€‚ ä»¥åŠï¼Œæ•´é™¤åˆ†å—ä¸æ˜¯æ•°æ®ç»“æ„ï¼Œæ˜¯æ•°è®ºï¼ï¼ï¼","categories":[{"name":"Learning","slug":"Learning","permalink":"www.orchid-any.cf/categories/Learning/"}],"tags":[{"name":"DS100P","slug":"DS100P","permalink":"www.orchid-any.cf/tags/DS100P/"}],"keywords":[{"name":"Learning","slug":"Learning","permalink":"www.orchid-any.cf/categories/Learning/"}]},{"title":"æ•°æ®ç»“æ„100é¢˜ ---KMP","slug":"DS100P-KMP-STRING","date":"2020-02-05T06:51:04.000Z","updated":"2020-02-06T03:11:48.061Z","comments":true,"path":"2020/02/05/DS100P-KMP-STRING/","link":"","permalink":"www.orchid-any.cf/2020/02/05/DS100P-KMP-STRING/","excerpt":"","text":"KMPupd:ä»£ç é”…å·²è¡¥ 0x00 å‰è¨€æœ¬æ–‡å’ŒæŸæ’­æ”¾è½¯ä»¶KMPlayeræ²¡æœ‰ä¸€æ¯›é’±å…³ç³»ï¼Œå¹¶ä¸”ï¼š ä¼¦å®¶æ˜¯æ•°æ®ç»“æ„ï¼ 0x01 å¼•å…¥é—®é¢˜è®¾æƒ³è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼š ç»™ä½ ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œè®©ä½ æŸ¥æ‰¾åœ¨æ–‡æœ¬ä¸²ä¸­æ¨¡å¼ä¸²çš„ä½ç½®ã€‚ æš´åŠ›åšæ³•æ˜¯æ˜¾ç„¶çš„ï¼Œä¸¾ä¾‹æ¥è¯´ï¼š æ–‡æœ¬ä¸²(text)ï¼š$a\\ b\\ c\\ b\\ c\\ g\\ l\\ x$ æ¨¡å¼ä¸²(pattern): $b\\ c\\ g\\ l$ æˆ‘ä»¬ç›´æ¥æš´åŠ›æšä¸¾textä¸­çš„æ¯ä¸€ä¸ªå­—ç¬¦ï¼Œå¹¶ä¸”ä¾æ¬¡ä¸patternä¸­çš„å­—ç¬¦ä»å¤´å¼€å§‹åŒ¹é…ã€‚æ—¶é—´å¤æ‚åº¦ä¸º $\\Theta(nm)$ 0x02 å‘ç°é—®é¢˜è¿™æ ·åšå…¶å®æœ‰å¾ˆå¤šå†—ä½™æ“ä½œã€‚æ¯”å¦‚è¯´ï¼š$b\\ c\\ g\\ l$ ä¸textä¸­çš„ $b\\ c\\ b\\ c$ ä¸åŒ¹é…ï¼Œåˆä»ç¬¬textçš„ç¬¬äº”ä¸ªå­—æ¯ $c$ å¼€å§‹åŒ¹é…ã€‚è¿™æ ·åšæ˜¯æ˜¾ç„¶ä¸å¿…è¦çš„ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºæ¨¡å¼ä¸²æ˜¯ä»¥ $b$ å¼€å¤´çš„ï¼Œå¯¹äºtextä¸­ç¬¬äº”ä¸ªå­—æ¯ $c$ æ˜¾ç„¶æˆ‘ä»¬å¯ä»¥ä¸å»åŒ¹é…ã€‚å‘ç°äº†ä»€ä¹ˆå—ï¼Ÿæ¯æ¬¡å¤±é…åæˆ‘ä»¬åªéœ€è¦ä»ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿å…¬å…±éƒ¨åˆ†å¼€å§‹åŒ¹é…å³å¯ã€‚è¿™é‡Œçœ‹ä¸æ‡‚æ²¡æœ‰ä»€ä¹ˆå…³ç³»ï¼Œåªè¦èƒ½ç†è§£åé¢çš„ä¾‹å­å°±å¯ä»¥äº†ã€‚ 0x03 è§£å†³ä¸€éƒ¨åˆ†é—®é¢˜$\\qquad\\qquad\\quad\\ 0\\ \\ 1\\ \\ 2\\ \\ 3\\ \\ 4\\ \\ 5\\ \\ 6\\ \\ 7\\ \\ 8\\ \\ 9\\ 10\\ 11$ æ–‡æœ¬ä¸²(text)ï¼š $a\\ \\ b\\ \\ x\\ \\ a\\ \\ b\\ \\ c\\ \\ a\\ \\ b\\ \\ c\\ \\ a\\ \\ b\\ \\ y$ $\\qquad\\qquad\\qquad\\ \\ \\ 0\\ \\ 1\\ \\ 2\\ \\ 3\\ \\ 4\\ \\ 5$ æ¨¡å¼ä¸²(pattern)ï¼š $a\\ \\ b\\ \\ c\\ \\ a\\ \\ b\\ \\ y$ æˆ‘ä»¬æœ‰ä¸¤ä¸ªæŒ‡é’ˆiå’Œjï¼Œåˆ†åˆ«æŒ‡å‘æ–‡æœ¬ä¸²å’Œæ¨¡å¼ä¸²ã€‚åœ¨i=0,j=0ä»¥åŠi=1,j=1çš„æ—¶å€™éƒ½åŒ¹é…ä¸Šäº†ã€‚ä½†æ˜¯åœ¨i=2,j=2æ—¶å¤±é…äº†ã€‚å¦‚æœæ—¶æœ´ç´ ç®—æ³•çš„è¯ä¼šä»¤i=1,j=0é‡æ–°å¼€å§‹åŒ¹é…ã€‚ç„¶è€Œæˆ‘ä»¬å‘ç°æˆ‘ä»¬å®Œå…¨å¯ä»¥ä»¤i=3,j=0æ¥é‡æ–°åŒ¹é…ã€‚ä¸€ç›´åˆ°i=8,j=5æ—¶ï¼Œå®ƒä»¬åˆå¤±é…äº†ã€‚æˆ‘ä»¬ä»¤jç­‰äºæ¨¡å¼ä¸²å’Œæ–‡æœ¬ä¸²å·²ç»é…å¯¹å®Œæˆçš„éƒ¨åˆ†(å³pattern[0]~pattern[4])çš„æœ€é•¿å…¬å…±å‰ç¼€åç¼€(å³pattern[0,1]å’Œpattern[3,4])çš„å‰ç¼€æœ«å°¾éƒ¨åˆ†+1(å³1+1=2)çš„åœ°æ–¹ï¼Œæ­¤æ—¶çš„text[6,7]å’Œpattern[0,1]éƒ½æ˜¯abä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥ç›´æ¥ä»i=8,j=2å¼€å§‹åŒ¹é…ï¼Œå°±å¯ä»¥åŒ¹é…åˆ°æ¨¡å¼ä¸²äº†ã€‚è¿™å°±æ˜¯KMPç„å¦™çš„åœ°æ–¹ã€‚ 0x04 è§£å†³å¦ä¸€éƒ¨åˆ†é—®é¢˜é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼šæˆ‘ä»¬å¦‚ä½•ç¡®å®šæ¨¡å¼ä¸²æœ€é•¿å…¬å…±å‰åç¼€çš„å‰ç¼€æœ«å°¾+1çš„ä½ç½®å‘¢ï¼Ÿæˆ‘ä»¬è¿˜æ˜¯é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥æ„Ÿå—ã€‚ $\\qquad\\qquad\\qquad\\ \\ \\ 0\\ \\ 1\\ \\ 2\\ \\ 3\\ \\ 4\\ \\ 5$ æ¨¡å¼ä¸²(pattern)ï¼š $a\\ \\ b\\ \\ c\\ \\ a\\ \\ b\\ \\ y$ (æ²¡é”™å°±æ˜¯ä¸Šé¢é‚£ä¸ªæˆ‘å¤ªæ‡’äº†) æˆ‘ä»¬å¯ä»¥è®¾æ•°ç»„$next_i$ä¸ºä»¥ $i$ ä¸ºç»“å°¾çš„æ¨¡å¼ä¸²æœ€é•¿å…¬å…±å‰åç¼€çš„å‰ç¼€æœ«å°¾+1çš„ä½ç½®ã€‚ $next_0$æ˜¾ç„¶ä¸º0ã€‚ æˆ‘ä»¬ä¾ç„¶è®¾ä¸¤ä¸ªæŒ‡é’ˆiå’Œjï¼Œiåˆå§‹åŒ–ä¸º0ï¼Œå³æŒ‡å‘æ¨¡å¼ä¸²çš„å¼€å¤´ã€‚jåˆå§‹åŒ–1ï¼Œå³iåé¢ä¸€ä¸ªã€‚ pattern[i]ä¸ç­‰äºpattern[j]ï¼Œä»¤next[i]=0ï¼Œj+=1 pattern[i]ä¾ç„¶ä¸ç­‰äºpattern[j]ï¼Œä»¤next[i]=0ï¼Œj+=1 æ­¤æ—¶pattern[i]ç­‰äºpattern[j]ï¼Œä»¤next[i]=j+1=1ï¼Œi+=1ï¼Œj+=1 æ­¤æ—¶pattern[i]ç­‰äºpettern[j]ï¼Œä»¤next[i]=j+1=2ï¼Œi+=1,j+=1 æ­¤æ—¶pattern[i]ä¸ç­‰äºpatter[j]ï¼Œå¹¶ä¸”jä¸åœ¨æ¨¡å¼ä¸²çš„å¼€å¤´ï¼Œä»¤j=next[j-1]=2 æ­¤æ—¶pattern[i]ä¾ç„¶ä¸ç­‰äºpattern[j]ï¼Œå¹¶ä¸”jä¸åœ¨æ¨¡å¼ä¸²çš„å¼€å¤´ï¼Œä»¤j=next[j-1]=0 æ­¤æ—¶pattern[i]ä¾ç„¶ä¸ç­‰äºpattern[j]ï¼Œä½†æ˜¯jå·²ç»è·‘åˆ°å¼€å¤´å»äº†ï¼Œä»¤i+=1 æ­¤æ—¶pattern[i]ä¾ç„¶ä¸ç­‰äºpattern[j]ï¼Œå¹¶ä¸”iå·²ç»è·‘åˆ°äº†å°½å¤´ï¼Œæ±‚è§£ç»“æŸã€‚ %å‡ºæ¥nextæ•°ç»„æ˜¯è¿™æ ·çš„:$[0,0,0,1,2,0]$ 0x05 è§£å†³æ‰€æœ‰é—®é¢˜å…¶å®å°±æ˜¯æ”¾ä¸€ä¸‹ä»£ç  æˆ‘è‡ªè®¤ä¸ºè®²çš„è¿˜æ˜¯æ¯”è¾ƒæ¸…æ¥šï¼Œè‡³å°‘æ¯”è“ä¹¦å¥½ã€‚ ä»£ç è™½ç„¶å’Œç½‘ä¸Šå…¶ä»–äººçš„ä¸å¤ªä¸€æ ·ï¼Œä¸å¤ªæ ‡å‡†ï¼Œä½†è¿˜ç®—ç®€æ´ï¼Œè‡³å°‘æ¯”è“ä¹¦å¥½ã€‚ æ€»ä¹‹ä¸€å¥è¯ï¼Œå­¦KMPä¸è¦çœ‹ä¹¦ï¼Œä¸è¦çœ‹ä¹¦ï¼Œä¸è¦çœ‹ä¹¦ï¼ï¼ï¼ä¼šæ­»äººçš„ï¼ï¼ï¼ å¯¹äº†è¿˜æœ‰ä¸€ä¸ªå‘ç‚¹ï¼Œæˆ‘è¿™ä»½ä»£ç ç”¨std::stringä¼šREï¼Œé¬¼çŸ¥é“æˆ‘è°ƒäº†ä¸€ä¸‹åˆå‘ç°æ˜¯è¿™ä¸ªåŸå› æ—¶å¿ƒé‡Œæœ‰å¤šå‚»é€¼ /* * P3375ã€æ¨¡æ¿ã€‘KMPå­—ç¬¦ä¸²åŒ¹é….cpp * Created by boringhacker(c20220233wgy) */ #include &lt;cstdio&gt; #include &lt;iostream&gt; #include &lt;algorithm&gt; #include &lt;cstring&gt; #include &lt;queue&gt; using namespace std; namespace MAIN { const int SIZE = 1000000 + 5; int next[SIZE], n, m; char Text[SIZE], Pattern[SIZE]; // string Text, Pattern; å»ä½ çš„std::string void GetNextVal() { int i = 1, j = 0; *next = 0; while (i &lt; n) { if (Pattern[i] == Pattern[j]) next[i] = j + 1, ++i, ++j; else if (j) j = next[j - 1]; else ++i; } } void GetAnswers() { int st = 0, res = -1; int i = 0, j = 0, flag = 0; while (true) { j = st; if (Text[i] == Pattern[j]) { if (!flag) res = i + 1 - st, flag = 1; // if (j == n - 1) cout &lt;&lt; res &lt;&lt; endl, j = 0, flag = 0; è¿™é‡Œå‡ºé”…äº†ï¼Œjåº”è¯¥èµ‹ä¸ºnext[j-1] if (j == n - 1) cout &lt;&lt; res &lt;&lt; endl, j = next[j - 1], flag = 0; else ++i, ++j; st = j; if (i &gt;= m) return ; } else { if (j) st = next[j - 1]; else ++i; flag = 0; } } } void MAIN() { cin &gt;&gt; Text; cin &gt;&gt; Pattern; m = strlen(Text); n = strlen(Pattern); GetNextVal(); GetAnswers(); for (int i = 0; i &lt; n; ++i) cout &lt;&lt; next[i] &lt;&lt; &#39; &#39;; } } signed main() { MAIN::MAIN(); return 0; } æ¬¢è¿æ‰è™«å­","categories":[{"name":"Learning","slug":"Learning","permalink":"www.orchid-any.cf/categories/Learning/"}],"tags":[{"name":"DS100P","slug":"DS100P","permalink":"www.orchid-any.cf/tags/DS100P/"}],"keywords":[{"name":"Learning","slug":"Learning","permalink":"www.orchid-any.cf/categories/Learning/"}]},{"title":"æ•°æ®ç»“æ„100é¢˜ ---è«é˜Ÿ","slug":"DS100P-MO-ALGORITHM","date":"2020-02-05T06:51:04.000Z","updated":"2020-02-06T03:13:41.479Z","comments":true,"path":"2020/02/05/DS100P-MO-ALGORITHM/","link":"","permalink":"www.orchid-any.cf/2020/02/05/DS100P-MO-ALGORITHM/","excerpt":"","text":"è«é˜Ÿ($n\\sqrt{n}$) 0x01è€ƒè™‘è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼š å¯¹äºä¸€ä¸ªåºåˆ—$A_1,A_2,\\cdots,A_n$ï¼Œæœ‰å¦‚ä¸‹è¯¢é—® å½¢å¦‚$S\\ \\ l\\ \\ r$çš„å‘½ä»¤è¡¨ç¤ºå¯¹åŒºé—´$[l,r]$æ±‚å’Œï¼Œå¹¶è¾“å‡º å½¢å¦‚$Q\\ \\ l\\ \\ r$è¡¨ç¤º$\\cdots$ æœ¬é¢˜ä¸å¼ºåˆ¶åœ¨çº¿ å¯¹äºè¿™æ ·çš„é™æ€é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ç”¨è«é˜Ÿæ¥è§£å†³ã€‚æ®è¯´è«é˜Ÿæ”¯æŒä¿®æ”¹ä½†æˆ‘å¤ªå¼±ä¸ä¼š ç°åœ¨ä½ æœ‰åŒºé—´$[3,5]$çš„å’Œï¼Œå¯ä»¥æ±‚$[3,6]$çš„åŒºé—´å’Œå—ï¼Ÿæ˜¾ç„¶ï¼Œå°†$[3,5]$çš„åŒºé—´å’ŒåŠ ä¸Š$A_6$å³å¯ã€‚ç±»ä¼¼çš„ï¼Œæ±‚$[2,4]$çš„åŒºé—´å’Œï¼Œæˆ‘ä»¬åªéœ€å‡å»$A_5$å³å¯ã€‚ å¯ä»¥ç»“åˆä¸‹å›¾æ„ŸçŸ¥ä¸€ä¸‹ 0x02å¥½ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æƒ³ä¸€ä¸‹å¦‚ä½•ç»´æŠ¤è¿™ç§è¯¢é—®ä¹‹é—´çš„å…³ç³»ã€‚ å¾ˆå®¹æ˜“æƒ³åˆ°æ’åºï¼Œé¦–å…ˆæˆ‘ä»¬å¯¹è¯¢é—®çš„å·¦ç«¯ç‚¹è¿›è¡Œæ’åºã€‚å†æŠŠæ•´ä¸ªè¯¢é—®åºåˆ—åˆ†ä¸º$\\sqrt{n}$å—ï¼Œæ¯å—ä»¥å†…å†æŒ‰å³ç«¯ç‚¹æ’åºã€‚ æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¾—å‡ºä»¥ä¸‹ç»“è®ºï¼š è«é˜Ÿå°±æ˜¯å¯¹äºä¸€ç³»åˆ—çš„è¯¢é—®ï¼Œé€šè¿‡æ’åºå‡å°è¯¢é—®çš„ä¹‹é—´çš„å·®è·ï¼Œç„¶åä»¥è®¡ç®—è´¡çŒ®çš„æ–¹æ³•ç¦»çº¿çš„å¾—å‡ºç­”æ¡ˆ 0x03æ¥ä¸€é“ç®€å•çš„ä¾‹é¢˜ å°Bçš„è¯¢é—®å°B æœ‰ä¸€ä¸ªé•¿ä¸º $n$ çš„æ•´æ•°åºåˆ— $a$ï¼Œå€¼åŸŸä¸º $[1,k]$ã€‚ä»–ä¸€å…±æœ‰ $m$ ä¸ªè¯¢é—®ï¼Œæ¯ä¸ªè¯¢é—®ç»™å®šä¸€ä¸ªåŒºé—´ $[l,r]$ï¼Œæ±‚ï¼š å…¶ä¸­ $c_i$ è¡¨ç¤ºæ•°å­— $i$ åœ¨ $[l,r]$ ä¸­çš„å‡ºç°æ¬¡æ•°ã€‚å°Bè¯·ä½ å¸®åŠ©ä»–å›ç­”è¯¢é—® è¿™é“é¢˜è®©æˆ‘ä»¬æ±‚ \\sum\\limits_{i=1}^k c_i^2å¼€ä¸€ä¸ªæ¡¶ï¼Œè®¡ç®—æ¯ä¸ªæ•°å‡ºç°çš„æ¬¡æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”±æ­¤è®¡ç®—ç­”æ¡ˆçš„è´¡çŒ®ï¼Œå°±å¯ä»¥å†™å‡ºä»¥ä¸‹çš„ä»£ç  #include &lt;cstdio&gt; #include &lt;iostream&gt; #include &lt;algorithm&gt; #include &lt;cstring&gt; #include &lt;queue&gt; #include &lt;cmath&gt; using namespace std; const int SIZE = 5e4 + 5; struct QueryNode { int l, r; int id; // å‚¨å­˜è¯¢é—®çš„é¡ºåºï¼Œæ–¹ä¾¿è¾“å‡º } Q[SIZE]; int a[SIZE], n, m, k, pos[SIZE]; int cnt[SIZE], ans[SIZE], res; // a:åŸåºåˆ— // pos:æ¯ä¸ªä½ç½®æ‰€å¤„çš„å— // cnt:æ¡¶ // ans:è¯¢é—®çš„ç­”æ¡ˆ // res:æ¯æ¬¡è°ƒæ•´æ‰€å¾—åˆ°çš„è´¡çŒ® inline void add(int x) { cnt[a[x]]++, res += cnt[a[x]] * cnt[a[x]] - (cnt[a[x]] - 1) * (cnt[a[x]] - 1); } inline void del(int x) { cnt[a[x]]--, res -= (cnt[a[x]] + 1) * (cnt[a[x]] + 1) - cnt[a[x]] * cnt[a[x]]; } signed main() { scanf(&quot;%d %d %d&quot;, &amp;n, &amp;m, &amp;k); int block = sqrt(n); for (int i = 1; i &lt;= n; ++i) scanf(&quot;%d&quot;, &amp;a[i]), pos[i] = i / block; for (int i = 1; i &lt;= m; ++i) scanf(&quot;%d %d&quot;, &amp;Q[i].l, &amp;Q[i].r), Q[i].id = i; sort(Q + 1, Q + 1 + m, [](QueryNode x, QueryNode y) { return pos[x.l] ^ pos[y.l] ? pos[x.l] &lt; pos[y.l] : x.r &lt; y.r; }); int l = 1, r = 0; for (int i = 1; i &lt;= m; ++i) { while (l &gt; Q[i].l) add(--l); // è¿™å››å¥éƒ½æ˜¯åœ¨å¯¹å½“å‰çš„åŒºé—´å¯¹äºè¯¢é—®çš„åŒºé—´è¿›è¡Œè°ƒæ•´ while (r &lt; Q[i].r) add(++r); // è¿™ä¸‰å¥éƒ½æ˜¯åœ¨å¯¹å½“å‰çš„åŒºé—´å¯¹äºè¯¢é—®çš„åŒºé—´è¿›è¡Œè°ƒæ•´ while (l &lt; Q[i].l) del(l++); // è¿™äºŒå¥éƒ½æ˜¯åœ¨å¯¹å½“å‰çš„åŒºé—´å¯¹äºè¯¢é—®çš„åŒºé—´è¿›è¡Œè°ƒæ•´ while (r &gt; Q[i].r) del(r--); // è¿™ä¸€å¥éƒ½æ˜¯åœ¨å¯¹å½“å‰çš„åŒºé—´å¯¹äºè¯¢é—®çš„åŒºé—´è¿›è¡Œè°ƒæ•´ ans[Q[i].id] = res; } for (int i = 1; i &lt;= m; ++i) printf(&quot;%d\\n&quot;, ans[i]); return 0; } 0x04å…¶å®è«é˜Ÿæ˜¯æœ‰å¥—è·¯çš„ï¼ŒåŸºæœ¬ä¸Šè«é˜Ÿçš„é¢˜éƒ½æ˜¯è¿™æ ·çš„: for (int i = 1; i &lt;= m; ++i) { while (l &gt; Q[i].l) add(--l); while (r &lt; Q[i].r) add(++r); while (l &lt; Q[i].l) del(l++); while (r &gt; Q[i].r) del(r--); ans[Q[i].id] = res; } æˆ‘ä»¬åªéœ€è€ƒè™‘$add$å‡½æ•°ä»¥åŠ$del$å‡½æ•°å³å¯","categories":[{"name":"Learning","slug":"Learning","permalink":"www.orchid-any.cf/categories/Learning/"}],"tags":[{"name":"DS100P","slug":"DS100P","permalink":"www.orchid-any.cf/tags/DS100P/"}],"keywords":[{"name":"Learning","slug":"Learning","permalink":"www.orchid-any.cf/categories/Learning/"}]},{"title":"æ•°æ®ç»“æ„100é¢˜ ---åç¼€å…¨å®¶æ¡¶ ä¹‹ åç¼€æ•°ç»„","slug":"DS100P-SUFFIX-ARRAY","date":"2020-02-05T06:51:04.000Z","updated":"2020-02-06T03:19:50.589Z","comments":true,"path":"2020/02/05/DS100P-SUFFIX-ARRAY/","link":"","permalink":"www.orchid-any.cf/2020/02/05/DS100P-SUFFIX-ARRAY/","excerpt":"","text":"åç¼€æ•°ç»„0x01 ä»€ä¹ˆæ˜¯åç¼€æ•°ç»„(Suffix Array)æˆ‘ä»¬çŸ¥é“ï¼Œå¯¹äºä¸€ä¸ªé•¿åº¦ä¸º $n$ çš„å­—ç¬¦ä¸²æœ‰ $n$ ä¸ªåç¼€ï¼Œè­¬å¦‚å¯¹äºå­—ç¬¦ä¸² $DCBAE$ æ¥è¯´ï¼Œå®ƒçš„åç¼€ä¾¿æ˜¯: é‚£ä¹ˆä»€ä¹ˆæ˜¯åç¼€æ•°ç»„( $SA$ )å‘¢ï¼Ÿåœ¨æˆ‘ä»¬å¯¹å­—ç¬¦ä¸²çš„ $n$ ä¸ªåç¼€æ’åºè¿‡åï¼Œæˆ‘ä»¬å®šä¹‰åç¼€æ•°ç»„ï¼š $SA$ æ•°ç»„ï¼šæ’åœ¨ç¬¬iä½çš„æ˜¯ç¬¬ $SA$ [i]ä¸ªåç¼€ å³åç¼€æ•°ç»„ã€‚ åŒæ—¶æˆ‘ä»¬å®šä¹‰ï¼š RANKæ•°ç»„ï¼šæ’åœ¨ç¬¬RANK[i]ä½çš„åç¼€æ˜¯ç¬¬iä¸ªåç¼€ ä¸éš¾çœ‹å‡ºRANKå’Œ $SA$ äº’é€† 0x02 å¦‚ä½•æ±‚å‡º $SA$ æ•°ç»„(ç²—ç•¥çš„)æœ´ç´ çš„åšæ³•æ˜¯ç›´æ¥$sort$ï¼Œ$\\Theta(n^2\\log n)$ çˆ¹å¦ˆæ¨é“ä¸æˆé’¢ã€‚ ç¨å¾®æœ‰ç‚¹è„‘å­éƒ½ä¼šæƒ³åˆ°$hash$ä½†æ˜¯ä¾ç„¶çˆ†ç‚¸ã€‚ å¦‚æœæ·±å…¥æ€è€ƒçš„è¯å¾ˆå®¹æ˜“æƒ³åˆ°å€å¢ï¼Œæ—¶é—´å¤æ‚åº¦ $\\Theta(n\\log n)$ + å¤§å¸¸æ•°ç¢°ä¸Šæ¯’ç˜¤é¢˜å½“åœºå»ä¸–ã€‚ $DC3$ï¼Ÿå¸¸æ•°å¤§ï¼Œæ¿å­éš¾èƒŒã€‚ $LUOGU$ æ—¥æŠ¥æ›¾ç»æœ‰è¿‡ä¸€ç‰‡æ—¥æŠ¥ç»™å‡ºäº†ä¸€ç§è¯±å¯¼æ’åºçš„è§£å†³æ–¹æ³•ï¼Œä½†æ˜¯æˆ‘ä¸æ˜¯å¾ˆç†è§£ã€‚ æˆ‘åœ¨è¿™é‡Œç»™å‡ºä¸€ç§ä¸­æ–‡äº’è”ç½‘ä¸Šå‡ ä¹æ²¡æœ‰ä»»ä½•èµ„æ–™çš„ $SA$ æ•°ç»„çº¿æ€§æ—¶é—´å¤æ‚åº¦æ„é€ æ–¹æ³•(æˆ‘ä¹Ÿä¸çŸ¥é“å«ä»€ä¹ˆåå­—)ã€‚ 0x03 å¦‚ä½•æ±‚å‡º $SA$ æ•°ç»„(å…·ä½“çš„)é¦–å…ˆå®šä¹‰æ–‡æœ¬ä¸² $text$ ä¸ºæˆ‘ä»¬çš„å¾…æ±‚ $SA$ çš„å­—ç¬¦æ•°ç»„ å…¶æ¬¡å®šä¹‰ $suffix_i$ ä¸ºä»¥ $i$ èµ·å¤´çš„ $text$ çš„åç¼€ ç„¶åå®šä¹‰ $type_i = \\begin{cases}L, suffix_i &gt; suffix_{i+1} \\\\\\displaystyle S, suffix_i &lt; suffix_{i+1}\\end{cases}$ å‚è€ƒå›¾ç‰‡(æ‰‹å†™å­—å¯èƒ½æœ‰äº›çœ‹ä¸æ¸…æ¥š)ï¼š å­—ç¬¦ä¸²æœ€åçš„æ˜¯ä»€ä¹ˆï¼Ÿä½ å¯ä»¥è®¤ä¸ºè¿™æ˜¯å› ä¸ºä½œè€…æ‡’ä¸æƒ³åˆ°å¤„åˆ¤è¾¹ç•Œè€ŒåŠ ä¸Šçš„æ¯”å­—ç¬¦ä¸²ä¸­ä»»æ„ä¸€ä¸ªå­—ç¬¦çš„ASCLLç éƒ½å°çš„å­—ç¬¦ å†æ¥å®šä¹‰ $dist_i$ ä¸º $text_i$ è·ç¦»ä¸Šä¸€ä¸ª $type_i$ ä¸º $S$ çš„è·ç¦» å‚è€ƒå›¾ç‰‡(æ‰‹å†™å­—å¯èƒ½æœ‰äº›çœ‹ä¸æ¸…æ¥š)ï¼š å†å®šä¹‰ä¸€ä¸ªæ¡¶ $bucket$ï¼Œä»¥ $text$ ä¸­çš„å­—ç¬¦ä¸ºåŒºåˆ«æ¡¶ä¹‹é—´çš„â€œé”®å€¼â€ã€‚ä¾ç„¶å‚è€ƒå›¾ç‰‡ æˆ‘ä»¬å…¶å®å¯ä»¥å‘ç°æ­¤æ—¶çš„ $bucket$ å·²ç»å’Œæˆ‘ä»¬è¦æ±‚çš„ $SA$ å·®çš„ä¸è¿œäº†ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿæ¡¶æ’å•Šï¼æ­¤æ—¶çš„æ¡¶å¤–éƒ¨å…¶å®å·²ç»æ˜¯æœ‰åºçš„äº†ï¼Œåªæ˜¯æˆ‘ä»¬å†…éƒ¨è¿˜æ— æ³•ç¡®å®šé¡ºåºã€‚æ¯”å¦‚ $I$ è¿™ä¸ªæ¡¶é‡Œï¼Œæˆ‘ä»¬æ— æ³•ç¡®å®š $suffix_{2},suffix_{5},suffix_{8},suffix_{11}$ çš„æ’åºé¡ºåºï¼Œå› ä¸ºä»–ä»¬å¼€å¤´çš„é¦–å­—æ¯ä¸åŒã€‚é‚£è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿè¯·ç»§ç»­å¾€ä¸‹çœ‹ã€‚ æˆ‘ä»¬å†å®šä¹‰ä¸€ä¸ªæ¡¶ $D_lists$ â€œé”®å€¼â€ ä¸º $list_i$ã€‚å‚è€ƒå›¾ç‰‡(æ³¨æ„æ­¤æ—¶æˆ‘ä»¬ä¸è€ƒè™‘é”®å€¼(å³ $dist$ )ä¸º0çš„æƒ…å†µ) ä»¥é”®å€¼ä¸º1ä¸¾ä¸€ä¸ªä¾‹å­ã€‚å®ƒçš„æ„æ€å°±æ˜¯è¯´ $dist$ ä¸º1çš„æƒ…å†µæœ‰ $suffix_{9},suffix_{3,6}$ è¿™ä¸‰ç§æƒ…å†µã€‚ä¸ $bucket$ è¿™ä¸ªæ¡¶ç±»ä¼¼ä½†ä¸åŒçš„ï¼Œæˆ‘ä»¬èƒ½åˆ†æ¸… $suffix_9$ å’Œ $sufiix_{3,6}$ çš„é¡ºåºï¼Œä½†æˆ‘ä»¬æ— æ³•åˆ†æ¸… $suffix_3$ å’Œ $suffix_6$ çš„é¡ºåºã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬æ¥çœ‹ï¼Œä¸‹æ ‡ä¸º9çš„åç¼€æ˜¯ä»¥ $P$ å¼€å¤´çš„ï¼Œç„¶è€Œä¸‹æ ‡ä¸º3å’Œ6çš„åç¼€å´éƒ½æ˜¯ä»¥ $S$ å¼€å¤´çš„ï¼Œæ‰€ä»¥ $suffix_9$ ä¸€å®šæ’åœ¨ $suffix_{3,6}$ çš„å‰é¢ã€‚$suffix_{3,6}$ å´å› ä¸ºé¦–å­—æ¯ç›¸åŒæ‰€ä»¥æ— æ³•åˆ†æ¸…æ¥šé¡ºåºã€‚ ä¸‹ä¸€æ­¥æˆ‘ä»¬å°è¯•å°†æ‰€æœ‰ $type$ ä¸º $S$ çš„ $suffix$ æ‰¾å‡ºæ¥ æˆ‘ä»¬æŠŠ $bucket$ æ‰«ä¸€éï¼Œå³å¯å¾—å‡ºï¼š å›¾ä¸­çš„ $S-Substring$ å³ä¸ºæˆ‘ä»¬æ‰€æ±‚çš„æ‰€æœ‰ $type$ ä¸º $S$ çš„ $suffix$ã€‚ åŒæ ·ï¼Œæˆ‘ä»¬ä¸çŸ¥é“ $suffix_{2,5,8}$ å“ªä¸ªåœ¨å‰å“ªä¸ªåœ¨åã€‚ä¸€ç§ $naive$ çš„åšæ³•å°±æ˜¯æŠŠ $[2,5,8]$ ä¾æ¬¡+1ï¼Œç›¸å½“äºç›´æ¥æš´åŠ›æ¯”è¾ƒä¸‹ä¸€ä¸ªå­—æ¯ï¼Œç„¶åé€šè¿‡ $D_lists$ æ¥åˆ†æå®ƒä»¬çš„å…ˆåå…³ç³»ã€‚ æˆ‘ä»¬å‘ç°äº†ä¸€ä¸ªæ‚²å‰§çš„äº‹å®ï¼šå·²ç»åŠ åˆ°3äº†ï¼Œæˆ‘ä»¬å´ä¾ç„¶æ— æ³•åˆ†æ¸… $[2,5]$ çš„é¡ºåºã€‚å¦‚æœç»§ç»­åŠ ä¸‹å»æˆ–è®¸å¯ä»¥åˆ†æ¸…å®ƒä»¬çš„é¡ºåºï¼Œä½†æ—¶é—´å¤æ‚åº¦å°±éš¾ä»¥ä¿æŒåœ¨ $\\Theta(n)$ï¼Œæ¢å¥è¯è¯´ï¼Œå®ƒå¾ˆå®¹æ˜“è¢«å¡ã€‚ æ€ä¹ˆåŠå‘¢ï¼Ÿæˆ‘ä»¬åˆ†æä¸€ä¸‹è¿™ç§æƒ…å†µå‡ºç°çš„åŸå› ã€‚ æ˜¾ç„¶æ­¤æ—¶ä¸¤ä¸ªåç¼€çš„éƒ¨åˆ†å‰ç¼€æ˜¯ç›¸åŒçš„ã€‚å³ä¸‹å›¾çš„æƒ…å†µï¼š","categories":[{"name":"Learning","slug":"Learning","permalink":"www.orchid-any.cf/categories/Learning/"}],"tags":[{"name":"DS100P","slug":"DS100P","permalink":"www.orchid-any.cf/tags/DS100P/"}],"keywords":[{"name":"Learning","slug":"Learning","permalink":"www.orchid-any.cf/categories/Learning/"}]},{"title":"æ•°æ®ç»“æ„100é¢˜ ---Link-Cut Tree","slug":"DS100P-LINK-CUT-TREE","date":"2020-02-05T06:51:04.000Z","updated":"2020-02-06T02:48:17.341Z","comments":true,"path":"2020/02/05/DS100P-LINK-CUT-TREE/","link":"","permalink":"www.orchid-any.cf/2020/02/05/DS100P-LINK-CUT-TREE/","excerpt":"","text":"Link-Cut Tree0x00æœ¬æ–‡çš„å›¾æ¥è‡ªQiulyçš„åšå®¢æµ…è°ˆlink-cut Tree æœ¬æ–‡ç…§æ¬Qiulyçš„åšå®¢æµ…è°ˆlink-cut Tree lctè¿™ä¸œè¥¿ä¸å¥½å†™ï¼Œæˆ‘è¿™ç§è’Ÿè’»å†™ä¸å¥½æ‰€ä»¥åªèƒ½ç…§æ¬Qiulyï¼Œè·ŸQiulyå”¯ä¸€çš„åŒºåˆ«å°±æ˜¯æˆ‘å­—æ˜¯è‡ªå·±æ‰“çš„â€¦â€¦ 0x01LCTå…¶å®å¯ä»¥çœ‹åšåŠ å¼ºç‰ˆçš„é‡é“¾å‰–åˆ†ï¼Œå¯ä»¥è¯´é‡é“¾å‰–åˆ†èƒ½åšçš„LCTéƒ½èƒ½åšã€‚ä¸ä»…å¦‚æ­¤ï¼ŒLCTä»£ç æ¯”é‡é“¾å‰–åˆ†çŸ­ï¼Œå¸¸æ•°æœ‰æ—¶æ¯”é‡é“¾å‰–åˆ†å°ã€‚ LCTç”±å¾ˆå¤šæ£µSplayç»„æˆï¼Œå…¶ä¸­å°†Splayæ£®æ—ä¸­çš„æ‰€æœ‰Splayè¿æ¥èµ·æ¥çš„å«åš è™šè¾¹ ã€‚Splayä¸­è¾¹å«åšå®è¾¹ã€‚ åŸæ¥çš„æ£®æ—æˆ‘ä»¬å«åšåŸæ£®æ—ï¼Œç”¨å®è¾¹è¿èµ·æ¥çš„ä¸€æ£µæ ‘å«åŸæ ‘ã€‚Splayçš„å…³é”®å­—æ˜¯èŠ‚ç‚¹åœ¨ä¹¦ä¸­çš„æ·±åº¦ã€‚ Splayæ˜¯LCTçš„è¾…åŠ©æ ‘ã€‚fhq-treapå…¶å®ä¹Ÿå¯ä»¥ï¼Œä½†å‡æ‘Šæ—¶é—´å¤æ‚åº¦ä¼šå¤šå‡ºä¸€ä¸ª\\log 0x02ä»¥ä¸‹æ˜¯ä¸€äº›LCTå¸¸ç”¨çš„åŸºç¡€æ“ä½œ access(x):å°†xåˆ°rootçš„è·¯å¾„ä¸Šçš„è¾¹å…¨éƒ¨å˜æˆå®è¾¹ï¼Œå¹¶æ–­å¼€ä¸è‡ªå·±å„¿å­çš„è”ç³» findroot(x):æ‰¾å‡ºxæ‰€åœ¨åŸæ ‘çš„root makeroot(x):è®©xå˜ä¸ºæ‰€åœ¨åŸæ ‘çš„root connect(x,y):è¿æ¥xå’Œyæ‰€åœ¨çš„åŸæ ‘ erase(x,y):æ‹†å¼€xå’Œyæ‰€åœ¨çš„åŸæ ‘ split(x,y):å°†x,yæåœ¨ä¸€æ£µè¾…åŠ©æ ‘ Access(x): æ¢å¥è¯æ¥è¯´å°±æ˜¯å°†ç‚¹xåˆ°åŸæ ‘ä¸­rootä¹‹é—´çš„é“¾ä¸¢åˆ°ä¸€ä¸ªsplayé‡Œ ä¸¾ä¸ªä¾‹å­ï¼Œç°åœ¨æœ‰ä¸€ä¸ªæ£®æ—é•¿æˆè¿™æ ·ï¼š&lt;/li&gt;&lt;/ul&gt; ç°åœ¨xä¸º6ã€‚æˆ‘ä»¬access(x)ã€‚ é‚£ä¹ˆ{1-3ï¼Œ3-6}ä¼šå˜ä¸ºå®è¾¹ï¼Œ1-2ä¼šå˜æˆè™šè¾¹ï¼Œå‡è®¾6æœ‰ä¸€å„¿å­nï¼Œä¹‹é—´ç”¨å®è¾¹è¿ç€ï¼Œé‚£ä¹ˆè¿™æ¡è¾¹ä¹Ÿå°†å˜æˆè™šè¾¹ã€‚ æ¯æ¬¡å°† x ç‚¹ splay åˆ°å½“å‰æ‰€åœ¨è¾…åŠ©æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œå°†å®ƒçš„å³å„¿å­æ›´æ–°ä¸ºä¸Šä¸€ä¸ª x ï¼Œç„¶åä»¤ x è·³åˆ°å®ƒçš„çˆ¶èŠ‚ç‚¹ï¼Œç¬¬ä¸€ä¸ª x çš„å³å„¿å­è®¾ä¸º0ã€‚ ä¸ºä»€ä¹ˆæ˜¯å³å„¿å­è€Œä¸æ˜¯å·¦å„¿å­å‘¢ï¼Ÿ å› ä¸ºfa[x]çš„æ·±åº¦å°äºxï¼Œè€Œåœ¨Splayé‡Œé¢fa[x]æ˜¯xçš„çˆ¸çˆ¸ï¼Œæ‰€ä»¥xåœ¨Splayä¸­æ˜¯fa[x]çš„å³å„¿å­ã€‚ æˆ‘ä»¬å°† x æ—‹è½¬åˆ°è¾…åŠ©æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯å°†å½“å‰åŸæ ‘è¿™æ¡é“¾ä¸Šæ·±åº¦å°äº x (åœ¨ x ä¸Šé¢çš„ç‚¹)ä¸¢åˆ°äº† x çš„å·¦å­æ ‘ä¸Šï¼Œå°† x çš„å³å­æ ‘è®¾ä¸ºä¸Šä¸€ä¸ª x ç‚¹ç›¸å½“äºå°† x åŸæ¥çš„å³å­æ ‘ä¸¢åˆ°äº†æ–°çš„ splay é‡Œé¢(è€Œå®ƒä»¬ä¹‹é—´ç”¨è™šè¾¹ç›¸è¿)ï¼Œå¹¶ä¸”å°†ä¸Šä¸€æ®µé“¾è¿æ¥èµ·æ¥ã€‚ ç°åœ¨å°±å¯ä»¥äº†ã€‚è¿™æ£µæ–° Splay ä¸­åªæœ‰è¿™æ¡é“¾ä¸Šçš„ç»“ç‚¹ï¼Œæ²¡æœ‰å…¶ä»–ä»»ä½•çš„ç»“ç‚¹ã€‚å¦‚æœæˆ‘ä»¬æŒ‡å®šè¦è¿™ä¸‰ä¸ªç»“ç‚¹åŒæ—¶è¿›è¡Œæ“ä½œï¼Œå¯ä»¥ç›´æ¥ä¸‹ä¼ lazy_tagåˆ°è¿™ä¸‰ä¸ªç»“ç‚¹ç»„æˆçš„ Splay çš„æ ¹ç»“ç‚¹å“¦!åˆ°åé¢Splayçš„æ—¶å€™å°±å¯ä»¥ç›´æ¥ä¸‹ä¼ è·Ÿæ–°ç»“ç‚¹ä¿¡æ¯äº†ã€‚ æ€»ä½“è¿‡ç¨‹ï¼š è™šè¾¹ï¼šå„¿å­è®¤çˆ¶ï¼Œçˆ¶ä¸è®¤å­ å®è¾¹ï¼šå„¿å­è®¤çˆ¶ï¼Œçˆ¶ä¹Ÿè®¤å­ ç”¨FlashHuçš„è¯æ¥è¯´ï¼š 1.è½¬åˆ°æ ¹ã€‚ 2.æ¢å„¿å­ã€‚ 3.æ›´æ–°ä¿¡æ¯ã€‚ 4.å½“å‰æ“ä½œç‚¹åˆ‡æ¢ä¸ºè½»è¾¹æ‰€æŒ‡çš„çˆ¶äº²ï¼Œè½¬1ã€‚ inline void Access(int x){ for(register int y=0;x;y=x,x=fa[x]){ Splay(x);//è½¬ ch[x][1]=y;//è®¤å„¿å­äº† pushup(x);//å„¿å­æœ‰å˜åŒ–ï¼Œæ›´æ–° } } findroot(x): é¦–å…ˆè¦æ˜ç™½ï¼š æ ¹èŠ‚ç‚¹æ˜¯çš„æ·±åº¦æœ€å°çš„ æˆ‘ä»¬å¯ä»¥é€šè¿‡xå‘ä¸Šæ‰¾ï¼Œç”¨ Access æ“ä½œå¯ä»¥å°†xå’Œxçš„æ ¹ç»“ç‚¹æåˆ°ä¸€ä¸ª Splay é‡Œã€‚ åˆå› ä¸ºæœ‰BSTçš„æ€§è´¨ï¼šxçš„å·¦å­æ ‘æ‰€æœ‰ç»“ç‚¹çš„æƒå€¼ &lt; x &lt; xå³å­æ ‘æ‰€æœ‰ç»“ç‚¹çš„æƒå€¼ã€‚ è€Œæˆ‘ä»¬åˆçŸ¥é“ï¼Œåœ¨æ‰§è¡Œå®Œ Access æ“ä½œåï¼Œè¿™è¯¾ Splay é‡Œé¢çš„ç»“ç‚¹æƒå€¼æœ€å¤§çš„(æ·±åº¦æœ€å¤§çš„)å°±æ˜¯xã€‚ äºæ˜¯æˆ‘ä»¬å¯ä»¥å°†x Splay åˆ°è¿™æ£µ Splay çš„æ ¹ç»“ç‚¹ï¼Œé‚£ä¹ˆç°åœ¨æœ€å·¦è¾¹çš„èŠ‚ç‚¹ä¾¿æ˜¯è¿™è¯¾æ ‘çš„æ ¹ç»“ç‚¹äº†ã€‚ inline int findroot(int x){ Access(x);//Accesså°†xå’Œæ ¹ç»“ç‚¹æåˆ°åŒä¸€ä¸ªSplayä¸­ Splay(x);//è½¬åˆ°Splayçš„æ ¹ç»“ç‚¹ while(ch[x][0])pushdown(x),x=ch[x][0];//ä¸æ–­çš„æ‰¾å·¦å„¿å­&amp;æ›´æ–°èŠ‚ç‚¹ä¿¡æ¯ return x;//æœ€å·¦è¾¹çš„å°±æ˜¯æ ¹ç»“ç‚¹äº†ã€‚ } makeroot(x): å°†xåˆ°æ ¹ç»“ç‚¹çš„è·¯å¾„ä¸Šçš„ç‚¹å…¨éƒ¨ç¿»è½¬(å³xå˜æˆäº†æ ¹èŠ‚ç‚¹) å…·ä½“æ“ä½œæ˜¯æˆ‘ä»¬å…ˆå°†xç‚¹ä¸åŸæ ‘ä¸­çš„æ ¹æ‰“é€šä¸€æ¡é“¾ï¼Œé‚£ä¹ˆç°åœ¨å®ƒä»¬å°±åœ¨åŒä¸€æ£µè¾…åŠ©æ ‘é‡Œé¢äº†ï¼Œæˆ‘ä»¬å‘ç°xä¸€å®šæ˜¯åœ¨å®ƒæ‰€åœ¨çš„è¾…åŠ©æ ‘çš„ä¸­åºéå†çš„æœ€åä¸€ä¸ªçš„(å› ä¸ºå®ƒæ˜¯è¿™æ¡é“¾ä¸Šæœ€æ·±çš„ç‚¹)ï¼Œæˆ‘ä»¬æŠŠxç‚¹ splay åˆ°è¾…åŠ©æ ‘çš„æ ¹ä¸Šï¼Œé‚£ä¹ˆxæ˜¾ç„¶æ˜¯æ²¡æœ‰å³å­æ ‘çš„ï¼Œæˆ‘ä»¬è¦å®ç°å°†xç§»åˆ°åŸæ ‘çš„æ ¹ä¸Šï¼Œä¹Ÿå°±æ˜¯å°†xåˆ°æ ¹çš„è¿™æ¡é“¾çš„æ·±åº¦å…¨éƒ¨ç¿»è½¬ä¸€éï¼Œåœ¨è¾…åŠ©æ ‘ä¸Šçš„ä½“ç°å°±æ˜¯å°†æ•´æ£µæ ‘ç¿»è½¬ä¸€éï¼Œæˆ‘ä»¬å¯ä»¥å†™ä¸ªç¿»è½¬æ ‡è®°æ¥å‡å°‘å¤æ‚åº¦ã€‚ inline void filp(int x){//Splayæ™®é€šåŒºé—´ç¿»è½¬ swap(ch[x][0],ch[x][1]);r[x]^=1; } inline void makeroot(int x){ Access(x); Splay(x); filp(x);//lazy_tag&amp;ç¿»è½¬åŒºé—´ } split(x,y) è¿™ä¸ªæ“ä½œæ˜¯å°†xåˆ°yä¹‹é—´çš„é‚£æ¡è·¯å¾„ä¸¢åˆ°ä¸€æ£µè¾…åŠ©æ ‘é‡Œï¼Œå¹¶ä¸”è¿™æ£µè¾…åŠ©æ ‘ä»¥yèŠ‚ç‚¹ä¸ºæ ¹ã€‚ Splay ç»´æŠ¤çš„æ˜¯åŸæ ‘ä¸­çš„ä¸€æ¡é“¾ï¼Œæˆ‘ä»¬ä¸èƒ½ä¿è¯x,yä¼šåœ¨åŒä¸€æ¡é“¾é‡Œã€‚ æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å…ˆæŠŠxå˜æˆåŸæ ‘çš„æ ¹èŠ‚ç‚¹(è¿™ä¸‹å­Access(y)å°±ä¼šå°†xåˆ°yä¹‹é—´çš„æ‰€æœ‰èŠ‚ç‚¹ä¸¢åˆ°ä¸€ä¸ª Splay ä¸­äº†)ã€‚ inline void split(int x,int y){ makeroot(x);Access(y);Splay(y); } connect(x,y): å°†xå’Œyæ‰€åœ¨åŸæ ‘åˆå¹¶èµ·æ¥ é¦–å…ˆå°†xç‚¹ä¸¢åˆ°åŸæ ‘çš„æ ¹ï¼Œç„¶åå»æ‰¾æ‰¾yçš„æ ¹æ˜¯ä¸æ˜¯xï¼Œå¦‚æœä¸æ˜¯è¯´æ˜x,yä¸åœ¨ä¸€ä¸ªåŸæ ‘å†…ï¼Œæˆ‘ä»¬å°†xçš„çˆ¶èŠ‚ç‚¹è®¾ä¸ºyï¼Œä¹Ÿå°±ç›¸å½“äºä»yåˆ°xè¿äº†ä¸€æ¡è™šè¾¹ã€‚ inline void connect(int x,int y){ makeroot(x);//è½¬åˆ°æ ¹ if(findroot(y)!=x)fa[x]=y;//è¿æ¥ä¸€æ¡è™šè¾¹ / erase(x,y): é¦–å…ˆæˆ‘ä»¬å…ˆæŠŠx,yä¹‹é—´çš„é‚£æ¡è¾¹ç”¨split(x,y)æ‹å‡ºæ¥ï¼Œå› ä¸ºx,yæ˜¯ç›¸é‚»çš„ï¼Œæ‰€ä»¥yçš„å·¦å„¿å­ä¸€å®šæ˜¯xï¼Œå°†å®ƒä»¬çš„çˆ¶å­å…³ç³»æ¶ˆç­æ‰å³å¯ã€‚ æ¶ˆç­çˆ¶å­å…³ç³»æ—¶ä¸€å®šæ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š 1.xå’Œyåœ¨ä¸€ä¸ªåŸæ ‘é‡Œ(ä¸åœ¨ä¸€ä¸ªæ ‘é‡Œé¢å¾€å“ªå„¿åˆ‡å•Š) 2.splitä¹‹åxæ˜¯yçš„å·¦å„¿å­ 3.xçš„å³å„¿å­æ˜¯ç©ºçš„(ä¿è¯äº†ä¸­åºéå†ä¸­yç´§è·Ÿåœ¨xçš„åé¢ï¼Œå³æ·±åº¦ç›¸é‚»)(xçš„æƒå€¼(æ·±åº¦)åªæ¯”yå°1ï¼Œè€Œxåˆæ­£å¥½æ˜¯ç›´æ¥è¿ç€yçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ— æ³•å†æ‰¾åˆ° &gt;x è€Œåˆ &lt;y çš„æ•´æ•°äº†) inline void erase(int x,int y){ split(x,y); if(findroot(y)==x&amp;&amp;fa[x]==y&amp;&amp;!ch[x][1] fa[x]=ch[y][0]=0; }return; } ä½†æ˜¯å¦‚æœæˆ‘ä»¬åœ¨findrootä¸­æ·»åŠ äº†Splayçš„è¯ï¼Œeraseä¸­xå’Œyçš„çˆ¶å­å…³ç³»å°±å˜äº†ï¼Œéœ€è¦æ”¹ä¸ºè¿™æ ·ï¼Œå¦åˆ™ä¼šå‡ºç°ä¸€äº›å¥‡å¥‡æ€ªæ€ªçš„é”™è¯¯ï¼š inline void erase(int x,int y){ split(x,y); if(findroot(y)==x&amp;&amp;fa[y]==x&amp;&amp;! fa[y]=ch[x][1]=0;pushup(x); de> 0X03 Splayçš„æ”¹åŠ¨ï¼š æ—‹è½¬çš„æ”¹åŠ¨ï¼š è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ä¸‹ï¼Œå¦‚æœxçš„çˆ¶äº²èŠ‚ç‚¹çš„çˆ¶äº²èŠ‚ç‚¹yå·²ç»ä¸åœ¨å½“å‰çš„è¿™æ£µè¾…åŠ©æ ‘ä¸Šï¼Œåªéœ€è¦è¿å•å‘è¾¹(ä¹Ÿå°±æ˜¯è™šè¾¹ï¼Œè®¤çˆ¶ä¸è®¤å­)ï¼Œå¦åˆ™æ­£å¸¸è¿å°±è¡Œï¼Œè¿™é‡Œè¦å’Œæ™®é€šçš„rotateåŒºåˆ†å¼€æ¥ã€‚ åšä¸ªå¯¹æ¯”ï¼š ç°åœ¨çš„rotate(x): è¿™é‡Œçš„xå¯ä»¥ä¸æ›´æ–°ï¼Œå› ä¸ºä¼šåœ¨ä¸‹ä¸€æ¬¡rotateæ—¶æ›´æ–°ã€‚ inline void rotate(int x){ int y=fa[x],z=fa[y],k=chk(x),v=ch[x][!k]; x;ch[x][!k]=y,ch[y][k]=v; if(v)fa[v]=y;fa[y]=x,fa[x]=z;pushup(y); } Splayçš„æ”¹åŠ¨ åŒæ ·è¦æ³¨æ„ä¸€ä¸‹åªèƒ½Splayåˆ°è¾…åŠ©æ ‘çš„æ ¹èŠ‚ç‚¹ï¼ŒSplayä¹‹å‰éœ€å…ˆä¸‹ä¼ ä¸€ä¸‹è¿™ä¸€æ¡é“¾ä¸Šéœ€æ“ä½œçš„æ‰€æœ‰çš„ç‚¹ï¼Œç”¨æ ˆæ¥å®Œæˆå³å¯ inline void Splay(int x){ int y=x,top=0;hep[++top]=y; while(get(y))hep[++top]=y=fa[y]; while(top)pushdown( while(get(x)){//åŸºæœ¬æ™®é€šçš„Splay y=fa[x],top=fa[y]; rotate((ch[y][0]==x)^(ch[top][0]==y)?x:y); rotate(x); }pushup(x);return; } æœ€åæ”¾ä¸€ä¸‹æ¨¡æ¿é¢˜ä»£ç  #include &lt;cstdio&gt; #include &lt;iostream&gt; #include &lt;algorithm&gt; #include &lt;cstring&gt; #include &lt;queue&gt; #include &lt;stack&gt; using namespace std; const int SIZE = 3e5 + 5; struct ReadNode { template &lt; typename T&gt; void operator &gt;&gt; (T &amp;a) { a = 0; T f = 1; char ch; while (!isdigit(ch = getchar())) if (ch == &#39;-&#39;) f = -1; while (isdigit(ch)) a = (a &lt;&lt; 3) + (a &lt;&lt; 1) + (ch ^ &#39;0&#39;), ch = getchar(); a *= f; } template &lt; typename T&gt; void write(T x) { if (x &lt; 0) x = -x, putchar(&#39;-&#39;); if (x &gt; 9) write(x / 10); putchar(x % 10 + &#39;0&#39;); } template &lt; typename T&gt; void operator &lt;&lt; (T x) { write(x); } } win; int n, q, dis[SIZE]; /******************LinkCutTree******************/ class LinkCutTree { private: struct TreeNode { int ch[2]; int val; int sum; int rev; int fa; } T[SIZE + 5]; int st[SIZE + 5]; inline void exch(int &amp;x, int &amp;y) { x ^= y ^= x ^= y; } inline void reverse(int x) { exch(T[x].ch[0], T[x].ch[1]); T[x].rev ^= 1; } inline void link(int x, int y, int w) { T[T[x].fa = y].ch[w] = x; } inline bool push_up(int x) { return (T[x].sum = T[x].val ^ T[T[x].ch[0]].sum ^ T[T[x].ch[1]].sum), 1; } inline void push_down(int x) { T[x].rev &amp;&amp; (reverse(T[x].ch[0]), reverse(T[x].ch[1]), T[x].rev = 0); } inline void makeroot(int x) { access(x); splay(x); reverse(x); } inline void split(int x, int y) { makeroot(x); access(y); splay(y); } inline bool isroot(int x) { return (T[T[x].fa].ch[0] ^ x &amp;&amp; T[T[x].fa].ch[1] ^ x); } inline bool which(int x) { return T[T[x].fa].ch[1] == x; } inline void rotate(int x) { int y = T[x].fa, z = T[y].fa, w = which(x); !isroot(y) &amp;&amp; (T[z].ch[which(y)] = x), T[x].fa = z, link(T[x].ch[w ^ 1], y, w), link(y, x, w ^ 1), push_up(y), push_up(x); } inline void splay(int x) { int y = x, top = 0; while (st[++top] = y, !isroot(y)) y = T[y].fa; while (top) push_down(st[top]), --top; while (!isroot(x)) y = T[x].fa, !isroot(y) &amp;&amp; (rotate(which(x) ^ which(y) ? x : y), 0), rotate(x); } inline void access(int x) { for (int son = 0; x; x = T[son = x].fa) splay(x), T[x].ch[1] = son, push_up(x); } inline int getroot(int x) { access(x), splay(x); while (T[x].ch[0]) push_down(x), x = T[x].ch[0]; return splay(x), x; } public: inline void init(int length, int *data) { for (int i = 1; i &lt;= length; ++i) T[i].val = data[i]; } inline void connect(int x, int y) { makeroot(x), getroot(y) ^ x &amp;&amp; (T[x].fa = y); } inline void erase(int x, int y) { makeroot(x), !(getroot(y) ^ x) &amp;&amp; !(T[y].fa ^ x) &amp;&amp; !(T[y].ch[0]) &amp;&amp; (T[y].fa = T[x].ch[1] = 0, push_up(x)); } inline void insert(int x, int v) { splay(x), T[x].val = v; } inline int find(int x, int y) { return split(x, y), T[y].sum; } } lct_mast; /*****************EndLinkCutTree*****************/ signed main() { win &gt;&gt; n; win &gt;&gt; q; for (int i = 1; i &lt;= n; ++i) win &gt;&gt; dis[i]; lct_mast.init(n, dis); for (int i = 1; i &lt;= q; ++i) { int opt, x, y; win &gt;&gt; opt; win &gt;&gt; x; win &gt;&gt; y; switch(opt) { case 0: win &lt;&lt; lct_mast.find(x, y), puts(&quot;&quot;); break; case 1: lct_mast.connect(x, y); break; case 2: lct_mast.erase(x, y); break; case 3: lct_mast.insert(x, y); break; } } return 0; }","categories":[{"name":"Learning","slug":"Learning","permalink":"www.orchid-any.cf/categories/Learning/"}],"tags":[{"name":"DS100P","slug":"DS100P","permalink":"www.orchid-any.cf/tags/DS100P/"}],"keywords":[{"name":"Learning","slug":"Learning","permalink":"www.orchid-any.cf/categories/Learning/"}]},{"title":"æ•°æ®ç»“æ„100é¢˜ ---splay","slug":"DS100P-SPLAY","date":"2020-02-05T06:51:04.000Z","updated":"2020-02-06T03:15:11.688Z","comments":true,"path":"2020/02/05/DS100P-SPLAY/","link":"","permalink":"www.orchid-any.cf/2020/02/05/DS100P-SPLAY/","excerpt":"","text":"update:å¢åŠ å‡ é“å¥½ä¸€ç‚¹çš„ä¾‹é¢˜å§ [NOI2004]éƒé—·çš„å‡ºçº³å‘˜ [æ¨¡æ¿]æ–‡è‰ºå¹³è¡¡æ ‘ [SHOI2013]å‘ç‰Œ [TJOI2010]ä¸­ä½æ•° [TJOI2007]ä¹¦æ¶ æ­£æ–‡ï¼šå…³äºSPLAYå…¶å®æˆ‘æ›´åå‘äºæŠŠsplayå«åšcosplay è®²å¹³è¡¡æ ‘æ€»é€ƒä¸è¿‡BST(Binary Search Tree)ï¼ŒäºŒå‰æœç´¢æ ‘ï¼Œä»¥ä¸‹æ˜¯BSTçš„æ€§è´¨ï¼š ä¸€æ£µåˆæ³•çš„BSTæ¯ä¸ªèŠ‚ç‚¹ä¸Šéƒ½å¸¦æœ‰ä¸€ä¸ªæ•°å€¼ï¼Œæˆ‘ä»¬å°†å…¶ç§°ä¸ºèŠ‚ç‚¹çš„â€œå…³é”®ç â€ã€‚é‚£ä¹ˆå¯¹äºä¸€æ£µBSTä¸Šçš„ä»»æ„èŠ‚ç‚¹ï¼Œæ»¡è¶³ï¼š è¯¥èŠ‚ç‚¹çš„å…³é”®ç ä¸å°äºå®ƒå·¦å­æ ‘çš„ä»»æ„ç»“ç‚¹çš„å…³é”®ç  è¯¥ç»“ç‚¹çš„å…³é”®ç ä¸å¤§äºå®ƒå³å­æ ‘çš„ä»»æ„ç»“ç‚¹çš„å…³é”®ç  æ˜¾ç„¶ï¼ŒBSTçš„ä¸­åºéå†æ˜¯ä¸€ä¸ªé€’å¢çš„åºåˆ— å»ºç«‹ä¸€æ£µBSTå› ä¸ºç¬”è€…å¾ˆæ‡’ï¼Œä¸æƒ³åˆ°å¤„åˆ¤è¾¹ç•Œï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬å¯ä»¥åœ¨ä¸€æ£µç©ºçš„BSTä¸­é¢„å…ˆæ’å…¥ä¸¤ä¸ªç»“ç‚¹ï¼Œä¸€ä¸ªæ­£æ— ç©·ï¼Œä¸€ä¸ªè´Ÿæ— ç©·ï¼Œå¦‚å›¾: const int SIZE = 1e5 + 5; const int INF = 0x7fffffff; struct BSTNode { int l, r; // å·¦å³å„¿å­çš„ç¼–å· int val; // å…³é”®ç  } T[SIZE]; int tot, root; int clone(int val) { // æ–°å»ºèŠ‚ç‚¹ T[++tot].val = val; return tot; } void build() { clone(-INF), clone(INF); root = 1, T[1].r = 2; } ä»¥ä¸Šæ˜¯å»ºæ ‘çš„ä»£ç  é‚£ä¹ˆï¼ŒBSTå°±è®²åˆ°è¿™é‡Œ å¹³è¡¡æ ‘çš„è¯ç”Ÿå½“BSTå½¢æˆä¸€æ¡é“¾çš„æ—¶å€™ï¼Œæ¯æ¬¡æŸ¥è¯¢ä¼šå˜æˆ$O(n^2)$ è¿™ç§æ·±åº¦è¿‡æ·±çš„BSTæ˜¯ä¸å¹³è¡¡çš„ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ç§èƒ½ä¿æŒæ ‘çš„æ·±åº¦åœ¨$\\log(n)$çš„æ•°æ®ç»“æ„ï¼Œäºæ˜¯ä¾¿è¯ç”Ÿäº†å¹³è¡¡æ ‘ SPLAYsplayï¼Œåˆç§°cosplayä¼¸å±•æ ‘ï¼Œæœ‰â€œåºåˆ—ä¹‹ç‹â€çš„ç¾ç§°ï¼Œå¸¸æ•°å·¨å¤§ï¼Œè·‘çš„æ²¡æœ‰$fhq-treap$å¿«ï¼Œä½†è¿™ä¸åœ¨æˆ‘ä»¬çš„è®¨è®ºèŒƒå›´ä»¥å†… æƒ³è±¡ä¸€ä¸‹è¿™æ ·ä¸€é¢—BSTï¼Œæˆ‘ä»¬å…ˆæŠŠå®ƒä»¬çš„å¤§å°å…³ç³»åˆ—å‡ºæ¥ã€‚ YY, X","categories":[{"name":"Learning","slug":"Learning","permalink":"www.orchid-any.cf/categories/Learning/"}],"tags":[{"name":"DS100P","slug":"DS100P","permalink":"www.orchid-any.cf/tags/DS100P/"}],"keywords":[{"name":"Learning","slug":"Learning","permalink":"www.orchid-any.cf/categories/Learning/"}]},{"title":"æ•°æ®ç»“æ„100é¢˜ ---çº¿æ®µæ ‘","slug":"DS100P-SEGMENT-TREE","date":"2020-02-05T06:51:04.000Z","updated":"2020-02-06T02:35:24.434Z","comments":true,"path":"2020/02/05/DS100P-SEGMENT-TREE/","link":"","permalink":"www.orchid-any.cf/2020/02/05/DS100P-SEGMENT-TREE/","excerpt":"","text":"çº¿æ®µæ ‘ â€”LYC(ZBing)($nlogn$) çº¿æ®µæ ‘ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯æ¯ä¸ªæ ‘çš„èŠ‚ç‚¹è®°å½•ä¸€æ¡çº¿æ®µä¸Šçš„ä¸€äº›ä¿¡æ¯ï¼Œéå¸¸çµæ´»ï¼Œå¯ä»¥å®ç°å¾ˆå¤šæ“ä½œï¼Œä½†å¸¸æ•°æ¯”æ ‘çŠ¶æ•°ç»„å¤§ä¸€ç‚¹ã€‚ å°±åƒè¿™æ ·ï¼š çº¿æ®µæ ‘çš„ç»å…¸åº”ç”¨å°±æ˜¯ç»Ÿè®¡åŒºé—´å’Œï¼Œæˆ‘ä»¬è¿™é‡Œä¹Ÿç”¨è¿™ä¸ªæ¥è¿›è¡Œçº¿æ®µæ ‘çš„è®²è§£ã€‚ 1).å»ºæ ‘æˆ‘ä»¬å…ˆæ”¾ä»£ç å§ï¼Œçœ‹ä»£ç ç†è§£ã€‚ void build(int l,int r,int x) { if(l==r) { nodes[x]=a[l]; return; } else { int mid=(l+r)&gt;&gt;1; build(l,mid,x&lt;&lt;1); build(mid+1,r,(x&lt;&lt;1)+1); nodes[x]=nodes[x&lt;&lt;1]+nodes[(x&lt;&lt;1)+1]; } } é¦–å…ˆï¼Œæˆ‘ä»¬éå†åˆ°çº¿æ®µæ ‘çš„æ¯ä¸€ä¸ªå¶å­èŠ‚ç‚¹ã€‚çº¿æ®µæ ‘çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½ä»£è¡¨äº†ä¸€ä¸ªåŒºé—´ï¼Œå½“è¿™ä¸ªåŒºé—´çš„$l=r$æ—¶ï¼Œè¯´æ˜æˆ‘ä»¬åˆ°è¾¾äº†å¶å­èŠ‚ç‚¹ã€‚è¿™ä¸ªå¶å­èŠ‚ç‚¹ä»£è¡¨çš„åŒºé—´åªåŒ…å«äº†$a[l]$è¿™ä¸€ä¸ªæ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦å°†è¿™ä¸ªèŠ‚ç‚¹çš„å€¼ç½®ä¸º$a[l]$ã€‚ ç„¶åæˆ‘ä»¬é€’å½’å›å»ï¼Œæ¯ä¸€ä¸ªéå¶å­èŠ‚ç‚¹éƒ½å¯ä»¥æŠŠå®ƒä»£è¡¨çš„åŒºé—´åˆ†æˆä¸¤åŠï¼Œå¯¹åº”å®ƒçš„ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼ˆå¯èƒ½æ²¡æœ‰ä¸¤ä¸ªï¼‰ã€‚å®ƒä¸¤ä¸ªå­èŠ‚ç‚¹çš„å€¼å°±æ˜¯è¿™ä¸¤ä¸ªè¾ƒå°åŒºé—´çš„å…ƒç´ å’Œã€‚ç”±è¿™ä¸¤ä¸ªå­èŠ‚ç‚¹çš„å€¼ä¹Ÿå°±æ˜¯è¿™ä¸¤ä¸ªå°åŒºé—´çš„å…ƒç´ å’Œç›¸åŠ å°±å¯ä»¥å¾—åˆ°å½“å‰èŠ‚ç‚¹ä»£è¡¨åŒºé—´çš„å…ƒç´ å’Œã€‚ æ—¶é—´å¤æ‚åº¦($nlogn$) 2).å•ç‚¹ä¿®æ”¹åƒè¿™ç§åŒºé—´å’Œé—®é¢˜çš„å•ç‚¹ä¿®æ”¹ä¸€èˆ¬éƒ½æ˜¯ç»™ä¸€ä¸ªç‚¹åŠ ä¸Šä¸€ä¸ªå€¼ã€‚ è¿˜æ˜¯å…ˆæ”¾ä»£ç å§ï¼š void update(int l,int r,int x,int pos,int val) { nodes[x]-=val; if(l==r) return; int mid=(l+r)&gt;&gt;1; if(pos&lt;=mid) update(l,mid,x&lt;&lt;1,pos,val); else update(mid+1,r,(x&lt;&lt;1)+1,pos,val); } è¿˜æ˜¯å…ˆé€’å½’æ‰¾åˆ°è¦ä¿®æ”¹çš„å¶å­èŠ‚ç‚¹ã€‚å…ˆå°†å®ƒçš„å€¼åŠ ä¸Švalã€‚ ç„¶åå†é€’å½’å›å»ï¼Œå› ä¸ºå¾€ä¸‹æ‰¾æ—¶æ‰¾åˆ°çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹ä»£è¡¨çš„åŒºé—´éƒ½åŒ…å«è¿™ä¸ªå¶å­èŠ‚ç‚¹ä»£è¡¨çš„åŒºé—´ï¼Œæ‰€ä»¥è¿™äº›èŠ‚ç‚¹çš„å€¼ä¹Ÿè¦åŠ ä¸Švalã€‚ æ—¶é—´å¤æ‚åº¦($logn$) 3).åŒºé—´æŸ¥è¯¢åŒºé—´æŸ¥è¯¢çš„æœ¬è´¨å°±æ˜¯æŠŠè¦æŸ¥è¯¢çš„åŒºé—´æ‹†åˆ†æˆå¾ˆå¤šå°åŒºé—´ï¼Œç›´æ¥åˆ©ç”¨ä¹‹å‰ç»´æŠ¤çš„èŠ‚ç‚¹çš„å€¼è¿›è¡ŒæŸ¥è¯¢ã€‚ int find(int l,int r,int x,int fr,int ba) { if(l&gt;ba||r&lt;fr) return 0; if(l&gt;=fr||r&lt;=ba) return nodes[x]; int mid=(l+r)&gt;&gt;1; return find(l,mid,x&lt;&lt;1,fr,ba)+find(mid+1,r,(x&lt;&lt;1)+1,fr,ba); } æˆ‘ä»¬å¯¹äºå½“å‰é€’å½’æŸ¥æ‰¾åˆ°çš„èŠ‚ç‚¹æ‰€ä»£è¡¨çš„åŒºé—´ä¸è¦æŸ¥è¯¢çš„åŒºé—´è¿›è¡Œåˆ†ç±»è®¨è®ºï¼š $1$&gt;.æ¯«æ— å…³è” å³å½“å‰åŒºé—´çš„å·¦ç«¯ç‚¹åœ¨æŸ¥è¯¢åŒºé—´å³ç«¯ç‚¹çš„å³è¾¹æˆ–å½“å‰åŒºé—´çš„å³ç«¯ç‚¹åœ¨æŸ¥è¯¢åŒºé—´å·¦ç«¯ç‚¹çš„å·¦è¾¹ã€‚ æ—¢ç„¶ä»–ä»¬æ¯«æ— å…³è”ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è¿”å›ä¸€ä¸ªå€¼0ï¼Œå› ä¸ºä»–ä»¬å¯¹è¿™ä¸ªåŒºé—´çš„å’Œæ²¡æœ‰ä»»ä½•è´¡çŒ®ã€‚ $2$&gt;.è¢«åŒ…å« å³å½“å‰åŒºé—´çš„å·¦ç«¯ç‚¹åœ¨æŸ¥è¯¢åŒºé—´çš„å·¦ç«¯ç‚¹çš„å³è¾¹ä¸”å½“å‰åŒºé—´çš„å³ç«¯ç‚¹åœ¨æŸ¥è¯¢åŒºé—´çš„å³ç«¯ç‚¹çš„å·¦è¾¹ã€‚ æ—¢ç„¶è¿™ä¸ªèŠ‚ç‚¹ä»£è¡¨çš„åŒºé—´å…¨éƒ¨å±äºæŸ¥è¯¢åŒºé—´å†…ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ²¡æœ‰å¿…è¦å†ç»§ç»­é€’å½’ä¸‹å»äº†ï¼Œç›´æ¥æŠŠè¿™ä¸ªèŠ‚ç‚¹çš„å€¼åŠ ä¸Šå»ã€‚ $3$&gt;.æœ‰éƒ¨åˆ†é‡å ä½†ä¸è¢«åŒ…å« å³ä¸Šä¸¤ç§æƒ…å†µçš„å‰©ä½™æƒ…å†µã€‚ å¯¹äºè¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬æ²¡æœ‰åŠæ³•æŠŠèŠ‚ç‚¹çš„å€¼ç›´æ¥åŠ ä¸Šå»ï¼Œå› ä¸ºè¿™ä¸ªèŠ‚ç‚¹ä»£è¡¨çš„åŒºé—´ä¸å…¨å±äºæŸ¥è¯¢åŒºé—´ã€‚ä¹Ÿä¸èƒ½ç›´æ¥è·³è¿‡ï¼Œå› ä¸ºæœ‰éƒ¨åˆ†èŠ‚ç‚¹å±äºæŸ¥è¯¢åŒºé—´ã€‚æ‰€ä»¥æˆ‘ä»¬ç»§ç»­å‘å®ƒçš„å­èŠ‚ç‚¹é€’å½’ï¼Œç›¸å½“äºæŠŠè¿™ä¸ªåŒºé—´åˆ†æˆä¸¤åŠï¼ŒæŸ¥è¯¢ä¸¤ä¸ªå­åŒºé—´ä¸­å±äºæŸ¥è¯¢åŒºé—´çš„å€¼åŠ èµ·æ¥ã€‚ æ—¶é—´å¤æ‚åº¦ï¼ˆ$logn$ï¼‰ 4).åŒºé—´ä¿®æ”¹é¢å¯¹åŒºé—´ä¿®æ”¹ï¼Œå¦‚æœæˆ‘ä»¬ç»§ç»­ç”¨å•ç‚¹ä¿®æ”¹ï¼Œæ—¶é—´å¤æ‚åº¦ä¼šé€€å›åˆ°ï¼ˆ$n^2logn$ï¼‰ æ‰€ä»¥æˆ‘ä»¬å¼•å…¥äººç±»çš„æœ¬è´¨æ‡’æ ‡è®°ã€‚ å½“æˆ‘ä»¬æ‰¾åˆ°äº†ä¸€ä¸ªå®Œå…¨æ˜¯è¦ä¿®æ”¹çš„åŒºé—´ï¼Œæˆ‘ä»¬å°±ç›´æ¥æŠŠå®ƒçš„æ‡’æ ‡è®°åŠ ä¸Š$val$ã€‚ å¯¹äºä¸­é€”éå†åˆ°çš„å…¶ä»–åŒºé—´ï¼Œæˆ‘ä»¬ç›´æ¥è®¡ç®—ä¿®æ”¹è¿™ä¸ªåŒºé—´çš„å’Œã€‚ ä»£ç ï¼š void update(int l,int r,int x,int fr,int ba,int val) { if(l&gt;ba||r&lt;fr) return; if(l&gt;=fr&amp;&amp;r&lt;=ba) lazy[x]+=val; else { nodes[x]+=val*max(0,min(r,ba)-max(l,fr)+1); int mid=(l+r)&gt;&gt;1; update(l,mid,x&lt;&lt;1,fr,ba,val); update(mid+1,r,(x&lt;&lt;1)+1,fr,ba,val); } } é•¿å¾—å’ŒåŒºé—´æŸ¥è¯¢å¾ˆåƒå¯¹å§ æ”¹äº†ä¿®æ”¹ä¹‹åï¼Œæˆ‘ä»¬çš„æŸ¥è¯¢ä¹Ÿè¦è¿›è¡Œä¿®æ”¹ã€‚è¦æŠŠæ‰“ä¸Šçš„æ‡’æ ‡è®°è¿›è¡Œä¸‹ä¼ ï¼Œä¸ç„¶æŸ¥è¯¢åˆ°ä¸‹é¢çš„èŠ‚ç‚¹æ—¶ï¼Œä¸‹é¢çš„èŠ‚ç‚¹æ²¡æœ‰è¢«ä¿®æ”¹ã€‚ ä¸‹ä¼ æ—¶åªéœ€è¦è®©å½“å‰èŠ‚ç‚¹åŠ ä¸ŠåŸæ¥åº”åŠ è€Œæ‹–å»¶äº†çš„å€¼ï¼Œè®©å®ƒçš„å·¦å³å„¿å­çš„æ‡’æ ‡è®°åŠ ä¸Šå®ƒçš„æ‡’æ ‡è®°ã€‚å› ä¸ºå½“åˆä¿®æ”¹æ—¶ï¼Œå¹¶æ²¡æœ‰ä¿®æ”¹åˆ°å·¦å³èŠ‚ç‚¹ã€‚æœ€åå†æŠŠæ‡’æ ‡è®°æ¸…é›¶ã€‚ å°±åƒè¿™æ ·ï¼š void pushdown(int l,int r,int x) { nodes[x]+=(r-l+1)*lazy[x]; lazy[x&lt;&lt;1]+=lazy[x]; lazy[(x&lt;&lt;1)+1]+=lazy[x]; lazy[x]=0; } int find(int l,int r,int x,int fr,int ba) { if(l&gt;ba||r&lt;fr) return 0; if(lazy[x]) pushdown(l,r,x); if(l&gt;=fr&amp;&amp;r&lt;=ba) return nodes[x]; else { int mid=(l+r)&gt;&gt;1; return find(l,mid,x&lt;&lt;1,fr,ba)+find(mid+1,r,(x&lt;&lt;1)+1,fr,ba); } } $\\ $ çº¿æ®µæ ‘çš„è®²è§£åˆ°è¿™é‡Œå°±è¿™ä¹ˆå®Œäº†ï¼Œä½†çº¿æ®µæ ‘çš„è¿ç”¨ååˆ†å¹¿æ³›ï¼Œçµæ´»ã€‚è¦ç†Ÿç»ƒæŒæ¡å¹¶è¿ç”¨çº¿æ®µæ ‘ï¼Œè¿˜è¦å¤šåŠ¨è„‘ï¼Œæƒ³å¥½é¢˜ã€‚","categories":[{"name":"Learning","slug":"Learning","permalink":"www.orchid-any.cf/categories/Learning/"}],"tags":[{"name":"DS100P","slug":"DS100P","permalink":"www.orchid-any.cf/tags/DS100P/"}],"keywords":[{"name":"Learning","slug":"Learning","permalink":"www.orchid-any.cf/categories/Learning/"}]},{"title":"æ•°æ®ç»“æ„100é¢˜ ---trieæ ‘","slug":"DS100P-TRIE","date":"2020-02-05T06:51:04.000Z","updated":"2020-02-06T02:40:31.526Z","comments":true,"path":"2020/02/05/DS100P-TRIE/","link":"","permalink":"www.orchid-any.cf/2020/02/05/DS100P-TRIE/","excerpt":"","text":"trieæ ‘($\\sum{len}$) $trie$æ ‘ï¼Œä¸æ˜¯ä¸€ç§äºŒå‰æ ‘ï¼Œå®ƒæ˜¯ä¸€ç§å¤šå‰æ ‘ï¼ˆå…¶å®ä¹Ÿå¯ä»¥æ˜¯äºŒå‰æ ‘ï¼‰ å¯ä»¥ç”¨æ¥æ±‚ä¸€å †æ•°ä¸­ä¸¤ä¸ªï¼ˆæˆ–ä¸‰ä¸ªï¼‰å¼‚æˆ–èµ·æ¥çš„æœ€å¤§å€¼ã€‚ å¯ä»¥æŸ¥æ‰¾å•è¯ã€‚ å¯¹äºä¸€äº›æœ‰å‰ç¼€çš„å•è¯ï¼Œæ¯”å¦‚WGY_2333å’ŒWGY_AND_LYC_WRITE_BLOGã€‚ å®ƒä»¬å°±å¯ä»¥å…±ç”¨æ ‘ä¸Šçš„ä¸€äº›èŠ‚ç‚¹ï¼ˆå³WGY_ï¼‰ï¼ŒæŸ¥è¯¢æ—¶å°±å¯ä»¥ä»$\\ $2$\\ $å’Œ$\\ $L$\\ $æ¥å¯¹ä»–ä»¬è¿›è¡ŒåŒºåˆ† æ‰€ä»¥æˆ‘ä»¬è¿˜æ˜¯çœ‹çœ‹å®ƒæ˜¯æ€ä¹ˆå®ç°çš„å§ã€‚ 1&gt;.æ’å…¥å¯¹äº$trie$æ ‘ï¼Œæ ‘ä¸Šçš„æ¯ä¸€æ¡è¾¹éƒ½ä»£è¡¨äº†ä¸€ä¸ªå­—æ¯æˆ–è€…ä¸€ä¸ªæ•°å­—ã€‚ æ‰€ä»¥ä¸€ä¸ªèŠ‚ç‚¹ä¼šæœ‰å¾ˆå¤šå„¿å­ï¼Œæˆ‘ä»¬å°±è¦å¼€ä¸€ä¸ªå„¿å­æ•°ç»„$ch$ã€‚ è¦ç»Ÿè®¡è¿™ä¸ªèŠ‚ç‚¹è¢«ç»è¿‡äº†å¤šå°‘æ¬¡ï¼Œä¹Ÿå°±æ˜¯å¤šå°‘å•è¯æœ‰è¿™ä¸ªå‰ç¼€ï¼Œå°±è¦åŠ ä¸€ä¸ª$sum$ã€‚ è¦ç»Ÿè®¡æœ‰å¤šå°‘ä¸ªå•è¯åœ¨è¿™é‡Œç»“æŸï¼Œä¹Ÿå°±æ˜¯è¦æŸ¥è¯¢çš„å•è¯æœ‰å¤šå°‘ä¸ªå·²æ’å…¥çš„å•è¯ä½œå‰ç¼€ï¼Œå°±è¦åŠ ä¸€ä¸ª$end$ã€‚ æ’å…¥æ—¶ï¼Œå…ˆçœ‹è¿™ä¸ªèŠ‚ç‚¹æœ‰æ²¡æœ‰ä½ è¦èµ°çš„é‚£ä¸ªå„¿å­ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±æ–°å»ºä¸€ä¸ªï¼Œèµ°ä¸‹å»ã€‚å¦åˆ™å°±ç›´æ¥èµ°åˆ°è¿™ä¸ªå„¿å­ï¼ˆå…±ç”¨èŠ‚ç‚¹å˜›ï¼‰ã€‚ ä»£ç ï¼šï¼ˆä»¥å°å†™å­—æ¯å•è¯ä¸ºä¾‹ï¼‰ struct node { int ch[26],sum,end; }nodes[MAXN]; int root=1,cnt=1; void ins(int len) { int x=root; for(int i=0;i&lt;len;++i) { if(!nodes[x].ch[str[i]-&#39;a&#39;]) nodes[x].ch[str[i]-&#39;a&#39;]=++cnt; x=nodes[x].ch[str[i]-&#39;a&#39;]; ++nodes[x].sum; } ++nodes[x].end; } 2&gt;.æŸ¥è¯¢$trie$æ ‘çš„æŸ¥è¯¢æœ‰å¾ˆå¤šç§ï¼Œä¸€èˆ¬ä¾ç…§é¢˜ç›®è¦æ±‚æ¥è‡ªå·±å®šä¹‰ã€‚ æˆ‘ä»¬è¿™é‡Œåˆä»¥å°å†™å­—æ¯å•è¯æŸ¥è¯¢å­˜åœ¨æ€§ä¸ºä¾‹ã€‚ åŒæ ·æ˜¯ä»æœ€ä¸Šé¢çš„æ ¹èŠ‚ç‚¹å¼€å§‹ã€‚å¦‚æœå½“å‰èŠ‚ç‚¹æœ‰è¿™ä¸ªå•è¯ç°åœ¨ä½ç½®å­—æ¯çš„å„¿å­ï¼Œå°±èµ°ä¸‹å»ã€‚å¦åˆ™å°±ç›´æ¥è¿”å›falseï¼Œå› ä¸ºä¹‹å‰æ²¡æœ‰è¿‡å•è¯èµ°è¿‡è¿™æ¡è·¯å¾„,å¦‚æœæœ‰è¿‡è¿™ä¸ªå‰ç¼€çš„å•è¯èµ°è¿‡ï¼Œè‚¯å®šä¼šåˆ›å»ºè¿™ä¸ªèŠ‚ç‚¹ã€‚ æœ€åå†åˆ¤æ–­æœ‰æ²¡æœ‰å•è¯åœ¨è¿™ä¸ªåœ°æ–¹ç»“æŸã€‚ ä»£ç : bool find(int len) { int x=root; for(int i=0;i&lt;len;++i) { if(!nodes[x].str[str[i]-&#39;a&#39;]) return false; x=nodes[x].str[str[i]-&#39;a&#39;]; } return nodes[x].end; } trieæ ‘å°±åªæœ‰è¿™ä¹ˆç‚¹ï¼ŒæƒŠä¸æƒŠå–œï¼Œæ„ä¸æ„å¤–","categories":[{"name":"Learning","slug":"Learning","permalink":"www.orchid-any.cf/categories/Learning/"}],"tags":[{"name":"DS100P","slug":"DS100P","permalink":"www.orchid-any.cf/tags/DS100P/"}],"keywords":[{"name":"Learning","slug":"Learning","permalink":"www.orchid-any.cf/categories/Learning/"}]},{"title":"æ•°æ®ç»“æ„100é¢˜ ---æ ‘é“¾å‰–åˆ†","slug":"DS100P-TREE-CHAIN-SPLITTING","date":"2020-02-05T06:51:04.000Z","updated":"2020-02-06T02:43:12.769Z","comments":true,"path":"2020/02/05/DS100P-TREE-CHAIN-SPLITTING/","link":"","permalink":"www.orchid-any.cf/2020/02/05/DS100P-TREE-CHAIN-SPLITTING/","excerpt":"","text":"æ ‘é“¾å‰–åˆ†($nlogn$) æ ‘é“¾å‰–åˆ†å‡†ç¡®åœ°è¯´å¹¶ä¸æ˜¯æ•°æ®ç»“æ„ï¼Œå®ƒåªæ˜¯æ•°æ®ç»“æ„çš„ä¸€ç§åº”ç”¨ã€‚ å®ƒç”¨äºå°†ä¸€æ£µæ ‘ä¸Šçš„èŠ‚ç‚¹è½¬æ¢åˆ°ä¸€ä¸ªåºåˆ—ä¸­ï¼Œç„¶åç”¨å„ç§æ•°æ®ç»“æ„ç»´æŠ¤ã€‚ æ‰€ä»¥æˆ‘åªè®²å¦‚ä½•è½¬æ¢å’Œä½¿ç”¨ï¼Œè€Œç»´æŠ¤å°±å› é¢˜è€Œå¼‚äº†ã€‚ æ ‘é“¾å‰–åˆ†æœ‰å¥½å‡ ç§æ–¹æ³•ï¼šé‡é“¾å‰–åˆ†ï¼Œé•¿é“¾å‰–åˆ†â€¦ ä½†æˆ‘å°±è®²æœ€å¸¸ç”¨çš„é‡é“¾å‰–åˆ†ã€‚ é‡é“¾å‰–åˆ†ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯æŒ‰ç…§èŠ‚ç‚¹çš„å­æ ‘å¤§å°æ¥å‰–åˆ†è¿™æ£µæ ‘ã€‚ ä¸€ä¸ªèŠ‚ç‚¹å­èŠ‚ç‚¹ä¸­å­æ ‘å¤§å°æœ€å¤§çš„å­èŠ‚ç‚¹å«åšè¿™ä¸ªèŠ‚ç‚¹çš„é‡å„¿å­ã€‚ ä»¥ä¸€ä¸ªè½»å„¿å­ä¸ºèµ·ç‚¹ï¼Œå…¶ä½™å…¨æ˜¯é‡å„¿å­çš„é“¾å«åšé‡é“¾ã€‚ é‡é“¾ä¸Šçš„è¾¹å«åšé‡è¾¹ã€‚ å°±åƒè¿™æ ·ï¼ˆçº¢è‰²çš„è¾¹ä¸ºé‡è¾¹ï¼‰ å¯ä»¥å‘ç°ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½åœ¨ä¸”ä»…åœ¨ä¸€æ¡é‡é“¾ä¸Šï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠè¿™ä¸€æ¡é“¾è½¬æ¢åˆ°ä¸€ä¸ªè¿ç»­çš„åŒºé—´æ¥è¿›è¡Œç»´æŠ¤ã€‚ dfs1æˆ‘ä»¬é‡‡ç”¨dfsçš„å½¢å¼æ¥è¿›è¡Œå‰–åˆ†ï¼Œè®°å½•ä¿¡æ¯ã€‚ ç¬¬ä¸€æ¬¡dfsæˆ‘ä»¬éœ€è¦è®°å½•æ¯ä¸ªèŠ‚ç‚¹çš„çˆ¶äº²ï¼Œå­æ ‘å¤§å°ï¼Œé‡å„¿å­å’Œæ·±åº¦ã€‚ å¾ˆç®€å•å¯¹å§ï¼Œå°±æ˜¯æš´åŠ›$dfs$ï¼Œä½†è¦æ³¨æ„ä¸è¦æœå›åˆ°çˆ¶äº²èŠ‚ç‚¹å’Œä¸€äº›å…¶ä»–çš„å‘ã€‚ ä»£ç ï¼š void dfs1(int x,int last) { fa[x]=last;//è®°å½•çˆ¶äº²èŠ‚ç‚¹ã€‚ sum[x]=1;//åˆå§‹åŒ–å­æ ‘å¤§å°ï¼šè¯¥èŠ‚ç‚¹æœ¬èº«ã€‚ depth[x]=depth[last]+1;//æ·±åº¦ï¼šçˆ¶äº²èŠ‚ç‚¹æ·±åº¦+1ã€‚ int big=0,bi=0;//å¯»æ‰¾é‡å„¿å­ for(int i=0;i&lt;e[x].size();++i) { if(e[x][i]^last)//é¿å…é‡æ–°å›åˆ°çˆ¶äº²èŠ‚ç‚¹ { dfs1(e[x][i],x); sum[x]+=sum[e[x][i]]; if(sum[e[x][i]]&gt;big) { big=sum[e[x][i]]; bi=e[x][i]; } } } son[x]=bi;//è®°å½•é‡å„¿å­ã€‚ } //è°ƒç”¨:dfs(root,root) dfs2ç»è¿‡åˆšåˆš$dfs1$çš„å‡†å¤‡ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œå‰–åˆ†äº†ï¼Œè¿™æ¬¡è®°å½•$dfs$åºï¼Œè½¬æ¢å‡ºçš„åºåˆ—ä¸Šçš„æ¯ä¸€ä¸ªå€¼ï¼Œä»¥åŠæ¯ä¸ªèŠ‚ç‚¹æ‰€åœ¨é‡é“¾çš„èµ·ç‚¹ã€‚ æˆ‘ä»¬åœ¨è¿™æ¬¡$dfs$æ—¶åº”è¯¥ä¼˜å…ˆèµ°é‡å„¿å­ï¼Œè¿™æ ·æ‰èƒ½ä½¿ä¸€æ¡é‡é“¾ä¸Šçš„å€¼éƒ½åœ¨åºåˆ—ä¸Šè¿åœ¨ä¸€èµ·ï¼Œæ–¹ä¾¿æˆ‘ä»¬æ“ä½œã€‚ ä»£ç : void dfs2(int x,int last,bool heavier) { dfn[x]=++tot;//è®°å½•dfsåº turn[tot]=val[x];//è®°å½•åºåˆ— if(heavier) hb[x]=hb[fa[x]];// else hb[x]=x;//è®°å½•æ‰€åœ¨é‡é“¾èµ·ç‚¹ if(b[x].son) build2(b[x].son,1);//ä¼˜å…ˆéå†é‡å„¿å­ for(int i=0;i&lt;e[x].size();++i) { if(e[x][i]^son[x]&amp;&amp;e[x][i]^fa[x]) build2(e[x][i],0);//é¿å…é‡å¤éå† } } ä¸€ä¸ªèŠ‚ç‚¹çš„$dfs$åºå°±æ˜¯å®ƒåœ¨åºåˆ—ä¸­çš„ä½ç½®ã€‚å¯¹å§ ä½¿ç”¨å¯¹äºä¸€äº›å­æ ‘ä¸Šçš„æ“ä½œï¼Œ$dfs$åºå·²ç»èƒ½å¤Ÿæå®šäº†ï¼Œæˆ‘ä»¬åªéœ€è¦ç”¨å‰–å‡ºçš„é‡é“¾å¯¹é‚£äº›ç»“ç‚¹é—´è·¯å¾„çš„æ“ä½œè¿›è¡Œåº”å¯¹å°±å¥½äº†ã€‚ å¯¹äºä¸¤ä¸ªèŠ‚ç‚¹é—´çš„è·¯å¾„ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“æƒ³åˆ°$LCA$ã€‚è€Œæˆ‘ä»¬è®°å½•äº†é‡é“¾çš„èµ·ç‚¹ï¼Œå¯ä»¥å¤„ç†è¿™æ¡é‡é“¾ï¼Œç„¶åç›´æ¥è·³åˆ°ä¸Šé¢ä¸€æ¡é‡é“¾çš„æœ«ç«¯ã€‚ æ³¨æ„å½“ä¸¤ä¸ªèŠ‚ç‚¹åœ¨åŒä¸€æ¡é‡é“¾æ—¶è·³å‡ºå¾ªç¯ï¼Œåœ¨æœ€åå¤„ç†ä»–ä»¬ä¹‹é—´çš„è·¯å¾„ã€‚ ç”±äºä»–ä»¬å·²ç»åœ¨åŒä¸€æ¡é‡é“¾ä¸Šäº†ï¼Œä»–ä»¬åŠä»–ä»¬ä¹‹é—´çš„èŠ‚ç‚¹$dfs$åºæ˜¯è¿ç»­çš„ï¼Œæ‰€ä»¥å†å¤„ç†è¿™ä¸ªè¿ç»­åŒºé—´å°±å¥½äº†ã€‚ ä»£ç ï¼š //è®¾solve(x,y)æ˜¯å¯¹xåˆ°yåŒºé—´çš„æ“ä½œ(å› é¢˜è€Œå¼‚) ___ LCA(int x,int y) { int fx=hb[x],fy=hb[y];//å¾—åˆ°é‡é“¾èµ·ç‚¹ while(fx^fy) { if(depth[fx]&lt;depth[fy])//ä»æ·±åº¦å¤§çš„å¾€ä¸Šè·³ { swap(fx,fy); swap(x,y); } solve(dfn[fx],dfn[x]);//å¤„ç†è¿™æ¡é‡é“¾çš„åŒºé—´ x=fa[fx];//è·³åˆ°ä¸Šé¢ä¸€æ¡é‡é“¾ fx=hb[x];//æ›´æ–°é‡é“¾èµ·ç‚¹ } solve(min(dfn[x],dfn[y]),max(dfn[x],dfn[y]));//æœ€åå¤„ç†åŒä¸€æ¡é‡é“¾ä¸Šçš„å‰©ä½™æœªå¤„ç†éƒ¨åˆ†ã€‚ //return ans; } 5.ä¸»å¸­æ ‘($nlogn$) â€œä½ æ˜¯ä¸»å¸­æ ‘å—ï¼Ÿæœ‰é‚£ä¹ˆå¤šçˆ·çˆ·ï¼â€â€”â€”$LJS$ã€‚ è¿™å¥è¯è¿ç”¨æ‰“æ¯”æ–¹çš„è¯´æ˜æ–¹æ³•ï¼Œç”ŸåŠ¨å½¢è±¡åœ°è¯´æ˜äº†ä¸»å¸­æ ‘æ¯ä¸ªèŠ‚ç‚¹å¯èƒ½æœ‰å¾ˆå¤šçˆ¶äº²çš„ç‰¹ç‚¹ï¼Œä½“ç°è¯´æ˜è¯­è¨€çš„ç”ŸåŠ¨æ€§ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸»å¸­æ ‘çš„å‡ ä¸ªèŠ‚ç‚¹å¯èƒ½å…±ç”¨ä¸€ä¸ªå­èŠ‚ç‚¹ã€‚ å°±åƒè¿™æ ·ï¼š ä¸»å¸­æ ‘å¯ä»¥ç”¨æ¥æŸ¥è¯¢é™æ€åŒºé—´ç¬¬kå°ï¼Œé™æ€åŒºé—´å‰kå¤§çš„å’Œç­‰ç­‰ã€‚ï¼ˆç”¨æ³•ååˆ†çµæ´»ï¼‰ æˆ‘ä»¬ä¼šåˆ›å»ºå¾ˆå¤šç‰ˆæœ¬çš„æ ‘ï¼Œä¸€äº›ç‰ˆæœ¬ä¼šå…±ç”¨ä¸€äº›èŠ‚ç‚¹ï¼Œä»¥èŠ‚çœç©ºé—´å’Œæ—¶é—´ã€‚ ä¸»å¸­æ ‘ä¹Ÿå«å¯æŒä¹…åŒ–çº¿æ®µæ ‘ã€‚ä½†å¯æŒä¹…åŒ–è¿˜æœ‰å¾ˆå¤šä¸œè¥¿ã€‚æˆ‘å°±è®²å¯æŒä¹…åŒ–çº¿æ®µæ ‘å§ã€‚ 1.å¦‚ä½•å…±ç”¨èŠ‚ç‚¹æˆ‘ä»¬è€ƒè™‘å•ç‚¹ä¿®æ”¹çš„çº¿æ®µæ ‘ã€‚ å¦‚æœè¦å¾—åˆ°è¿™ä¸ªåºåˆ—æŸä¸ªå…ƒç´ $x$åŠ ä¸Šä¸€ä¸ªå€¼$val$ä¹‹åçš„æ–°ç‰ˆæœ¬ï¼Œæˆ‘ä»¬å‘ç°ï¼Œæ”¹å˜çš„åªæœ‰å¯¹åº”å…ƒç´ $x$çš„èŠ‚ç‚¹å’Œä»–çš„ç¥–å…ˆä¼šåŠ ä¸Š$val$ã€‚é‚£ä¹ˆå…¶ä»–èŠ‚ç‚¹æˆ‘ä»¬å¯ä»¥ä¸ä¸Šä¸€ä¸ªç‰ˆæœ¬å…±ç”¨ã€‚ æ‰€ä»¥æˆ‘ä»¬æ¯æ¬¡æ–°å»ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œç»§æ‰¿ä¹‹å‰è¯¥ä½ç½®çš„å€¼å’Œå·¦å³å„¿å­ï¼Œç„¶åæ›´æ–°å€¼ï¼Œå†ç»§ç»­å‘ä¸‹å¯»æ‰¾å…ƒç´ $x$çš„ä½ç½®ï¼Œæœ€åé€’å½’å›æ¥æ›´æ–°è¿™ä¸ªå„¿å­ã€‚ æˆ‘ä»¬ä½¿ç”¨$root$æ•°ç»„æ¥è®°å½•æ¯ä¸ªç‰ˆæœ¬çš„æ ¹èŠ‚ç‚¹ç¼–å·ã€‚ ä»£ç ï¼š void ins(int l,int r,int pre,int &amp;now,int pos,int val)//åŒºé—´å·¦å³ç«¯ç‚¹ï¼Œä¸Šä¸€ä¸ªç‰ˆæœ¬ä¸­å¯¹åº”è¿™ä¸ªåŒºé—´çš„ç‚¹ï¼Œå½“å‰ç‰ˆæœ¬ä¸­å¯¹åº”è¿™ä¸ªåŒºé—´çš„ç‚¹ï¼Œä¿®æ”¹ä½ç½®ï¼Œå¢åŠ çš„å€¼ã€‚ { nodes[++tot]=nodes[pre];//å…ˆæ•´ä¸ªå¤åˆ¶ now=tot;//æ›´æ–°ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„å„¿å­ã€‚ nodes[now].sum+=val;//æ›´æ–°å½“å‰èŠ‚ç‚¹çš„å€¼ if(l==r) return; //å‘ä¸‹ç»§ç»­å¯»æ‰¾ int mid=(l+r)&gt;&gt;1; if(pos&lt;=mid) ins(l,mid,nodes[pre].l,nodes[now].l,pos,val); else ins(mid+1,r,nodes[pre].r,nodes[now].r,pos,val); } //è°ƒç”¨ï¼šins(1,n,root[i-1],root[i],p,v); æœ€å$root[i]$çš„å¼•ç”¨å°±ç›¸å½“äºè®°å½•äº†è¿™ä¸ªç‰ˆæœ¬çš„æ ¹èŠ‚ç‚¹ã€‚ æŸ¥è¯¢å…¶å®å°±å’Œæ™®é€šçš„çº¿æ®µæ ‘ä¸€æ ·ï¼Œä½†ä¸»å¸­æ ‘çš„ç”¨é€”ä¸æ­¢è¿™ä¸ªã€‚ 2.ä¾‹é¢˜ã€æ¨¡æ¿ã€‘å¯æŒä¹…åŒ–çº¿æ®µæ ‘ 1ï¼ˆä¸»å¸­æ ‘ï¼‰ å¦‚é¢˜ï¼Œç»™å®š $n$ ä¸ªæ•´æ•°æ„æˆçš„åºåˆ—ï¼Œå°†å¯¹äºæŒ‡å®šçš„é—­åŒºé—´æŸ¥è¯¢å…¶åŒºé—´å†…çš„ç¬¬ $k$ å°å€¼ã€‚ æƒå€¼çº¿æ®µæ ‘ï¼š (çº¿æ®µæ ‘çš„å¦ä¸€ç§åº”ç”¨ï¼Œåªæ˜¯æ¯ä¸ªèŠ‚ç‚¹ç»´æŠ¤æ•´ä¸ªåºåˆ—å€¼åœ¨$[l,r]$åŒºé—´å†…çš„æ•°çš„ä¸ªæ•°) è¿™é“é¢˜è¦æ±‚æŸ¥è¯¢é™æ€åŒºé—´ç¬¬$k$å°ã€‚é‚£ä¹ˆå¯¹äºç¬¬$k$å°è¿™ç§é—®é¢˜ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨æƒå€¼çº¿æ®µæ ‘ ç¦»æ•£åŒ–ï¼š$-1e9\\leq a_i \\leq1e9$ çš„æ•°æ®çº¿æ®µæ ‘è‚¯å®šå¼€ä¸ä¸‹ï¼Œä½†è¿™é“é¢˜åªéœ€è¦æ±‚ç¬¬kå°ï¼Œæ²¡æœ‰å¿…è¦å¼€é‚£ä¹ˆå¤§ï¼Œå¯ä»¥å¯¹æ•°æ®è¿›è¡Œç¦»æ•£åŒ–ã€‚ æˆ‘ä»¬æŒ‰ç…§åºåˆ—çš„é¡ºåºæ’å…¥$a_i$ã€‚å¾—åˆ°æ¯ä¸ª$root[i]$ä»£è¡¨çš„æƒå€¼çº¿æ®µæ ‘ä»£è¡¨ä»$a_1$åˆ°$a_i$çš„æ¯ä¸ªæ•°å€¼çš„å‡ºç°æ¬¡æ•°ã€‚ é‚£ä¹ˆæ ¹æ®å‰ç¼€å’Œçš„æ€æƒ³ï¼ŒåŒºé—´$[l,r]$ä¸­æ¯ä¸ªæ•°å€¼çš„å‡ºç°ä¸ªæ•°å°±æ˜¯$[1,r]$çš„å‡å»$[1,l-1]$çš„ã€‚é‚£ä¹ˆæ•°å€¼çš„åŒºé—´ä¹Ÿå…·æœ‰è¿™ä¸ªæ€§è´¨ã€‚ æ‰€æœ‰å¯¹äºæ¯ä¸ªè¯¢é—®ï¼Œæˆ‘ä»¬åªéœ€è¦æŸ¥è¯¢ä¸€æ¬¡ï¼Œç”¨$root[r]$å’Œ$root[l-1]$çš„æƒå€¼çº¿æ®µæ ‘å¤„ç†å‡ºåŒºé—´$[l,r]$åº”æœ‰çš„æƒå€¼çº¿æ®µæ ‘ï¼Œå°±å¯ä»¥åƒæ­£å¸¸çš„æƒå€¼çº¿æ®µæ ‘ä¸€æ ·æŸ¥è¯¢ç¬¬kå°äº†ã€‚ ä»£ç ï¼š #include&lt;vector&gt; #include&lt;cstdio&gt; #include&lt;algorithm&gt; using namespace std; int n,m,a[200010],x,y,z,cnt,root[200010]; struct node { int l,r,sum; }nodes[8000010];//40*n vector&lt;int&gt; v; void ins(int l,int r,int pre,int &amp;now,int p)//æ’å…¥ï¼Œåˆ›å»ºæ–°ç‰ˆæœ¬ { nodes[++cnt]=nodes[pre]; now=cnt; ++nodes[cnt].sum; if(l==r) return; int m=(l+r)&gt;&gt;1; if(p&lt;=m) ins(l,m,nodes[pre].l,nodes[cnt].l,p); else ins(m+1,r,nodes[pre].r,nodes[cnt].r,p); } int find(int l,int r,int p1,int p2,int k) { if(l==r) return l; int m=(l+r)&gt;&gt;1; int X=nodes[nodes[p2].l].sum-nodes[nodes[p1].l].sum;//ç°åœºå¤„ç†ï¼Œå¾—åˆ°[x,y]åŒºé—´å†…ï¼Œå€¼åœ¨[l,mid]å†…çš„æ•°çš„ä¸ªæ•° if(k&lt;=X) return find(l,m,nodes[p1].l,nodes[p2].l,k);//å¦‚æœk&lt;=X.è¯´æ˜ç¬¬kå°çš„æ•°åœ¨å·¦è¾¹ã€‚ else return find(m+1,r,nodes[p1].r,nodes[p2].r,k-X);//å¦åˆ™åœ¨å³è¾¹ã€‚ } int getid(int X)//å¾—åˆ°ç¦»æ•£åŒ–åçš„æ•°å€¼ { return lower_bound(v.begin(),v.end(),X)-v.begin()+1; } int main() { scanf(&quot;%d %d&quot;,&amp;n,&amp;m); for(int i=1;i&lt;=n;++i) { scanf(&quot;%d&quot;,&amp;a[i]); v.push_back(a[i]); } sort(v.begin(),v.end()); v.erase(unique(v.begin(),v.end()),v.end());//ç¦»æ•£åŒ– for(int i=1;i&lt;=n;++i) ins(1,n,root[i-1],root[i],getid(a[i]));//æŒ‰é¡ºåºæ’å…¥æ¯ä¸ªå€¼ï¼Œå¾—åˆ°root[i]å¯¹åº”çš„æƒå€¼çº¿æ®µæ ‘ã€‚ for(int i=1;i&lt;=m;++i) { scanf(&quot;%d %d %d&quot;,&amp;x,&amp;y,&amp;z); printf(&quot;%d\\n&quot;,v[find(1,n,root[x-1],root[y],z)-1]);//æŸ¥è¯¢åŒºé—´[x,y]ï¼›è¾“å‡ºåŸå€¼ } return 0; } 3.ç¼ºç‚¹åŠæ³¨æ„äº‹é¡¹å†…å­˜æ± ä¸€èˆ¬ä»1å¼€å§‹ç”¨ï¼Œ$nodes[0]$ä½œä¸ºç©ºç™½ï¼Œå€¼ä¸º$0$ï¼Œå„¿å­èŠ‚ç‚¹æŒ‡å‘è‡ªå·±ï¼Œå€¼è¿˜æ˜¯ä¸º$0$ã€‚ å½“ä½ è¿™ä¸ªç‰ˆæœ¬çš„æ ‘è¿˜æ²¡æœ‰æ”¹è¿‡æŸä¸ªèŠ‚ç‚¹çš„æŸä¸ªå„¿å­æ—¶ï¼Œè¿™ä¸ªèŠ‚ç‚¹çš„è¿™ä¸ªå„¿å­ä¼šæŒ‡å‘$nodes[0]$ï¼Œä¹Ÿå°±ç›¸å½“äºä¸‹é¢éƒ½æ˜¯$0$ï¼Œæ­£å¥½ç¬¦åˆã€‚ æ•°ç»„ä¸€å®šè¦å¼€å¤§ï¼Œå¦‚æœå¼€å¾—ä¸å¤Ÿå¤§å¯èƒ½ä¼šå‡ºç°$MLE$,$TLE$,$RE$,$WA$. ä½†ä¹Ÿä¸è¦å¼€å¤ªå¤§ï¼Œä¸ç„¶ä¼š$MLE$,$CE$. ä¸»å¸­æ ‘æ˜¯é™æ€çš„ï¼Œé‡åˆ°è¦åŠ¨æ€ä¿®æ”¹è€Œä¸æ˜¯ç”Ÿæˆä¸€ä¸ªæ–°ç‰ˆæœ¬çš„é—®é¢˜ï¼Œå°±å¯èƒ½è¦ç”¨æ ‘å¥—æ ‘äº†ã€‚ å¯æŒä¹…åŒ–å¯ä»¥ç”¨åœ¨å¾ˆå¤šæ•°æ®ç»“æ„ä¸Šï¼Œå¹³è¡¡æ ‘ï¼Œçº¿æ®µæ ‘ï¼Œ$trie$æ ‘â€¦â€¦å¯å¤Ÿå¾—å†™ï¼Œä½†å®ƒä»¬çš„æ€æƒ³éƒ½æ˜¯ç›¸ä¼¼çš„ï¼Œéƒ½æ˜¯æ¯ä¸ªç‰ˆæœ¬ä¸ä¹‹å‰çš„ç‰ˆæœ¬å…±ç”¨èŠ‚ç‚¹ä»¥èŠ‚çœæ—¶é—´ï¼Œç©ºé—´ã€‚","categories":[{"name":"Learning","slug":"Learning","permalink":"www.orchid-any.cf/categories/Learning/"}],"tags":[{"name":"DS100P","slug":"DS100P","permalink":"www.orchid-any.cf/tags/DS100P/"}],"keywords":[{"name":"Learning","slug":"Learning","permalink":"www.orchid-any.cf/categories/Learning/"}]},{"title":"æ•°æ®ç»“æ„100é¢˜ ---æ ‘å¥—æ ‘","slug":"DS100P-TREE-COVER-TREE","date":"2020-02-05T06:51:04.000Z","updated":"2020-02-06T02:42:02.735Z","comments":true,"path":"2020/02/05/DS100P-TREE-COVER-TREE/","link":"","permalink":"www.orchid-any.cf/2020/02/05/DS100P-TREE-COVER-TREE/","excerpt":"","text":"æ ‘å¥—æ ‘($nlog^2n$) æ ‘å¥—æ ‘ä¹Ÿæ˜¯ä¸€ç§æš´åŠ›æ€æƒ³ï¼Œå®ƒå¯ä»¥æœ‰å¾ˆå¤šå®ç°ï¼šæ ‘çŠ¶æ•°ç»„å¥—å¹³è¡¡æ ‘ï¼Œä¸»å¸­æ ‘å¥—æ ‘çŠ¶æ•°ç»„â€¦â€¦ ä½†æ˜¯æœ€å¸¸è§çš„è¿˜æ˜¯çº¿æ®µæ•°å¥—å¹³è¡¡æ ‘ã€‚ 1.æ€æƒ³&amp;&amp;å»ºæ ‘æ ‡å‡†è¯´æ³•ï¼šçº¿æ®µæ ‘çš„æ¯ä¸ªèŠ‚ç‚¹å¯¹åº”å¹³è¡¡æ ‘çš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚ ??? å…¶å®è¿˜æ˜¯çº¿æ®µæ ‘æ¯ä¸ªèŠ‚ç‚¹å¯¹åº”ä¸€ä¸ªåŒºé—´ï¼Œä½†æ˜¯æˆ‘ä»¬æŠŠè¿™ä¸ªåŒºé—´å»ºæˆä¸€æ£µå¹³è¡¡æ ‘å°±è¡Œäº†ï¼Œçº¿æ®µæ ‘èŠ‚ç‚¹è®°å½•è¿™ä¸ªåŒºé—´å»ºæˆçš„å¹³è¡¡æ ‘çš„æ ¹èŠ‚ç‚¹å°±è¡Œäº†ã€‚ çº¿æ®µæ ‘æœ‰$logn$å±‚ï¼Œæ¯å±‚çš„èŠ‚ç‚¹å¯¹åº”çš„åŒºé—´èƒ½å¤Ÿæ‹¼æˆä¸€ä¸ªå®Œæ•´çš„åŒºé—´ï¼Œå³æ¯å±‚$n$ä¸ªå¹³è¡¡æ ‘èŠ‚ç‚¹ï¼Œå¹³è¡¡æ ‘æ¯ä¸ªèŠ‚ç‚¹æ’å…¥æ˜¯$logn$çš„ï¼Œæ‰€ä»¥å»ºæ ‘çš„æ—¶é—´å¤æ‚åº¦æ˜¯$nlog^2n$ fhq-treapç¤ºä¾‹ void build(int l,int r,int x) { for(int i=l;i&lt;=r;++i) { split(root[x],a[i],root1,root2); root[x]=merge(merge(root1,newnode(a[i])),root2); } if(l^r) { int mid=(l+r)&gt;&gt;1; build(l,mid,x&lt;&lt;1); build(mid+1,r,x&lt;&lt;1|1); } } 2.æŸ¥è¯¢åŒºé—´æ’åç»™å®šä¸€ä¸ªåŒºé—´å’Œä¸€ä¸ªå€¼ï¼ŒæŸ¥è¯¢åŒºé—´ä¸­æ¯”ä»–å°çš„å…ƒç´ ä¸ªæ•°åŠ 1ã€‚ æˆ‘ä»¬å¯ä»¥åƒçº¿æ®µæ ‘ä¸€æ ·ï¼Œå…ˆæŠŠè¿™ä¸ªåŒºé—´æ‹†åˆ†æˆä¸€äº›èƒ½ç”¨æˆ‘ä»¬ä¹‹å‰å»ºæ ‘å»ºå‡ºçš„å¹³è¡¡æ ‘è¡¨ç¤ºçš„å°åŒºé—´ï¼Œå†æŸ¥è¯¢å°åŒºé—´ä¸­æ¯”è¿™ä¸ªå€¼å°çš„å…ƒç´ ä¸ªæ•°åŠ èµ·æ¥çš„å’Œã€‚ å¾ˆæ˜æ˜¾ f[i,j]=f[i,k]+f[k+1,j]ï¼ˆi\\leq k","categories":[{"name":"Learning","slug":"Learning","permalink":"www.orchid-any.cf/categories/Learning/"}],"tags":[{"name":"DS100P","slug":"DS100P","permalink":"www.orchid-any.cf/tags/DS100P/"}],"keywords":[{"name":"Learning","slug":"Learning","permalink":"www.orchid-any.cf/categories/Learning/"}]}]}